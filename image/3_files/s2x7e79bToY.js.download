;/*FB_PKG_DELIM*/

__d("BrowsePlacesPerfTypedLogger",["Banzai","GeneratedLoggerUtils"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:BrowsePlacesPerfLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:BrowsePlacesPerfLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:BrowsePlacesPerfLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setExecutionTimeSecs=function(a){this.$1.execution_time_secs=a;return this};c.setMethodName=function(a){this.$1.method_name=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};return a}();c={execution_time_secs:!0,method_name:!0,page_id:!0};f["default"]=a}),66);
__d("BrowseFacebarHighlighter",["csx","CSS","NodeHighlighter"],(function(a,b,c,d,e,f,g,h){"use strict";a={};Object.assign(a,d("NodeHighlighter"),{getHighlightCandidates:function(){return["._53ad"]},isDiscardNode:function(a){return d("CSS").hasClass(a,"DefaultText")},createSegmentedRegex:function(a){a=this.escapeAndAddBidirectionalCharsToTokens(a);return"(^|\\s|\\b)("+a.join("|")+")"}});b=a;g["default"]=b}),98);
__d("PhotoEverstoreLogger",["AsyncRequest","Event","ImageUtils"],(function(a,b,c,d,e,f){var g={BATCH_WINDOW_MS:500,storedLog:[]};function h(){}Object.assign(h,{_log:function(a){g.storedLog.push(a),g.storedLog.length==1&&setTimeout(i,g.BATCH_WINDOW_MS)},logImmediately:function(a){h._log(a)},registerForLogging:function(a){var c=document.getElementById(a);c!=null&&(b("ImageUtils").hasLoaded(c)?h._log(c.src):b("Event").listen(c,"load",function(a){h._log(c.src)}))}});function i(){var a=g.storedLog;g.storedLog=[];a=JSON.stringify(a);new(b("AsyncRequest"))().setURI("/ajax/photos/logging/everstore_logging.php").setData({loggedUrls:a}).setMethod("POST").setOption("suppressErrorHandlerWarning",!0).setOption("suppressErrorAlerts",!0).send()}e.exports=h}),null);
__d("PhotoViewerImage",["PhotoEverstoreLogger","URI","Vector"],(function(a,b,c,d,e,f){var g;a=function(){"use strict";function a(a){this._hiResDimensions=a.hiResDimensions&&b("Vector").deserialize(a.hiResDimensions),this._normalDimensions=a.normalDimensions&&b("Vector").deserialize(a.normalDimensions),this._info=a.info,this._video=a.video,this._shouldLog=a.everstoreLogThis,this._hiResSrc=a.hiResSrc,this._normalSrc=a.normalSrc,this._thumbSrc=a.thumbSrc,this._isInverted=!1,this._data=a}var c=a.prototype;c.getURIString=function(){return new(g||(g=b("URI")))(this._info.permalink).getUnqualifiedURI().toString()};c.hasHiResDimensions=function(){return!!this._hiResDimensions};c.getHiResDimensions=function(){return this._hiResDimensions};c.getNormalDimensions=function(){return this._normalDimensions};c.getHiResSrc=function(){return this._hiResSrc};c.getNormalSrc=function(){return this._normalSrc};c.getThumbSrc=function(){return this._thumbSrc};c.getInfo=function(){return this._info};c.getPermalink=function(){return this._info.permalink};c.getHighestResSrc=function(){return this._hiResSrc||this._normalSrc};c.preload=function(a){var c;this.getHighestResSrc()&&(a&&!this._resource?(this._resource=new Image(),this._resource.src=this.getHighestResSrc(),c=this._resource.src,this._shouldLog&&b("PhotoEverstoreLogger").logImmediately(this._resource.src)):!a&&!this._small&&(this._small=new Image(),this._small.src=this._normalSrc||this._hiResSrc,c=this._small.src,this._shouldLog&&b("PhotoEverstoreLogger").logImmediately(this._small.src)));return c};c.setNormalDimensions=function(a,c){this._normalDimensions=new(b("Vector"))(a,c)};c.setHiResDimensions=function(a,c){this._hiResDimensions=new(b("Vector"))(a,c)};c.invertDimensions=function(){this.hasHiResDimensions()&&(this._hiResDimensions=new(b("Vector"))(this._hiResDimensions.y,this._hiResDimensions.x)),this._normalDimensions=new(b("Vector"))(this._normalDimensions.y,this._normalDimensions.x),this._isInverted=!this._isInverted};c.copy=function(){return new a(this._data)};return a}();e.exports=a}),null);
__d("PhotosConst",[],(function(a,b,c,d,e,f){a={VIEWER_PERMALINK:0,VIEWER_SNOWLIFT:6,VIEWER_VAULTBOX:8,VIEWER_SNOWFLAKE:14,VIEWER_COMPOSER:16,VIEWER_CAROUSEL:19,VIEWER_SPHERICAL:20,VIEWER_PERMALINK_STRING:"permalink",VIEWER_SNOWLIFT_STRING:"snowlift",VIEWER_VAULTBOX_STRING:"vaultbox",VIEWER_CAROUSEL_STRING:"carousel",BULK_EDITOR:3,BULK_EDITOR_REACT:15,EDITOR_MODAL:17,FLASH_UPLOADER:4,HTML5_UPLOADER:10,SIZE_NORMAL:"n",PIC_NORMAL_FBX_SIZE:180,ALBUM_NAME_MAXLEN:65};e.exports=a}),null);
__d("UFI2DOMAttachmentEventEmitter",["EventEmitter"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("EventEmitter"))}),null);
__d("PhotoStreamCache",["DOM","HTML","PhotoEverstoreLogger","PhotoViewerImage","PhotosConst","ReactDOM","ReactRenderer","Rect","UFI2DOMAttachmentEventEmitter","UIPagelet","URI","Vector","ge","react"],(function(a,b,c,d,e,f){var g,h,i=g||b("react");a=function(){"use strict";function a(){}var c=a.prototype;c.init=function(b,c,d,e,f){this.version=b,this.pageletName=c,this.pageletRootID=d,this.tagSuggestionMode=f,this.bufferSize=a.BUFFER_SIZE,this.fullBucketSize=a.FULL_BUCKET_SIZE,this.initError=!1,this.isActive=!0,this.usesOpaqueCursor=!1,this.usesNonCircularPhotoSet=!1,this.reachedLeftEnd=!1,this.reachedRightEnd=!1,this.leftLock=!1,this.rightLock=!1,this.useAjaxPipe=!0,this.logger=e,this.viewAsUser=null,this.reset()};c.setViewAs=function(a){this.viewAsUser=a};c.isInViewAsMode=function(){return!!this.viewAsUser};c.getViewAsUserId=function(){return this.viewAsUser};c.getUsesOpaqueCursor=function(){return this.usesOpaqueCursor};c.isNonCircularPhotoSet=function(){return this.usesNonCircularPhotoSet};c.setReachedLeftEnd=function(){this.reachedLeftEnd=!0};c.setReachedRightEnd=function(){this.reachedRightEnd=!0};c.hasReachedLeftEnd=function(){return this.reachedLeftEnd};c.hasReachedRightEnd=function(){return this.reachedRightEnd};c.nonCircularPhotoSetCanPage=function(a){if(!this.isNonCircularPhotoSet())return!0;if(a<0)return this.getCursorPos()||!this.hasReachedLeftEnd();return a>0?this.getLength()-1!=this.getCursorPos()||!this.hasReachedRightEnd():!0};c.setUseAjaxPipe=function(a){this.useAjaxPipe=a};c.reset=function(){this.cache={image:{},extra:{},html:{},ufi_config:{},ufi_dom_attachment_event_emitters:{},ufi_roots:{}},this.snowliftUFIModule=null,this.fbidList=[],this.loaded=!1,this.allLoaded=!1,this.permalinkMap={},this.position=0,this.totalCount=null,this.firstCursor=null,this.firstCursorIndex=null,this.firstOpaqueCursor=null};c.waitForInitData=function(){this.fbidList.push(a.INIT_PLACEHOLDER)};c.unmountUFIRoots=function(){Object.entries(this.cache.ufi_roots).forEach(function(a){a[0];a=a[1];return a.ufiMainRoot&&b("ReactDOM").unmountComponentAtNode(a.ufiMainRoot)})};c.destroy=function(){this.unmountUFIRoots(),this.reset(),this.isActive=!1};c.isLoaded=function(){return this.loaded};c.canPage=function(){if(!this.isLoaded())return!1;if(this.totalCount!==null)return this.totalCount>1;return this.usesNonCircularPhotoSet?!0:this.getLength()>1};c.errorInCurrent=function(){if(this.initError)return!0;else if(!this.isLoaded())return!1;return this.checkErrorAt(this.getCursor())};c.getLength=function(){return this.fbidList.length};c.getPhotoSet=function(){return this.photoSetQuery.set};c.getPhotoSetQuery=function(){return this.photoSetQuery};c.getCurrentImageData=function(){return this.getImageData(this.getCursor())};c.getNextImageData=function(){if(!this.fbidList||!this.fbidList.length)return null;var a=(this.position+1)%this.fbidList.length;return this.getImageData(this.getCursorAt(a))};c.getPreviousImageData=function(){if(!this.fbidList||!this.fbidList.length)return null;var a=this.fbidList.length;a=(this.position+a-1)%a;return this.getImageData(this.getCursorAt(a))};c.addViewAsToURI=function(a){a=new(h||(h=b("URI")))(a);this.isInViewAsMode()&&a.addQueryData({viewas:this.getViewAsUserId()});return a};c.getOpaqueCursor=function(a){if(this.getImageData(a))return this.version===b("PhotosConst").VIEWER_VAULTBOX?this.getImageData(a).getInfo().opaquecursor:this.getImageData(a).info.opaquecursor;return a==this.firstCursor?this.firstOpaqueCursor:null};c.getImageData=function(b){b=this.getCacheContent(b,a.IMAGE_DATA);b&&(b.info.permalink=this.addViewAsToURI(b.info.permalink));return b};c.getCurrentHtml=function(){return this.getCacheContent(this.getCursor(),a.HTML)};c.getCurrentExtraData=function(){return this.getCacheContent(this.getCursor(),a.EXTRA)};c.getCurrentUFIConfig=function(){return this.getCacheContent(this.getCursor(),a.UFI_CONFIG)};c.getCurrentUFIRoots=function(b){var c=this.getCacheContent(this.getCursor(),a.UFI_ROOTS),d=this.getCacheContent(this.getCursor(),a.UFI_DOM_ATTACHMENT_EVENT_EMITTERS);if(c){b(c,d);return}this.createUFIRoots(this.getCursor(),function(a,c){b(a,c)})};c.containsUFIConfig=function(){return Object.keys(this.cache.ufi_config).length>0};c.getCacheContent=function(b,c){return!b||b===a.ERROR_ID||b===a.INIT_PLACEHOLDER?null:this.cache[c][b]};c.getCursorPos=function(){return this.position};c.getCursor=function(){return this.position>=0&&this.position<this.getLength()?this.fbidList[this.position]:null};c.getCursorAt=function(a){return this.fbidList[a]};c.getCursorForURI=function(a){return this.permalinkMap[a]};c.calculatePositionForMovement=function(a){a=this.position+a;if(this.allLoaded){var b=this.getLength();a=(b+a%b)%b}return a};c.isValidMovement=function(a){if(!this.isLoaded()||!this.canPage())return!1;a=this.calculatePositionForMovement(a);return this.getCursor()>0||a>=0&&a<this.getLength()};c.moveCursor=function(a){if(!this.isValidMovement(a))return;this.position=this.calculatePositionForMovement(a);a!==0&&this.loadMoreIfNeccessary(a>0)};c.checkErrorAt=function(b){if(!this.isLoaded())return!1;return b===a.ERROR_ID?!0:!1};c.getRelativeMovement=function(a){for(var b=0;b<this.getLength();b++)if(this.fbidList[b]==a)return b-this.position;return null};c.preloadImages=function(c){var d,e=this.getLength(),f=this.cache.image,g=a.BUFFER_SIZE;e>g*2?(d=(this.position+e-g%e)%e,g=(this.position+g)%e):(d=0,g=e-1);while(d!=g){var h,i=this.fbidList[d],j=c&&c(f[i]);this.version===b("PhotosConst").VIEWER_VAULTBOX?h=f[i]&&f[i].preload(j):f[i]&&f[i].url&&(j&&!f[i].resource?(f[i].resource=new Image(),f[i].resource.src=f[i].url,h=f[i].url,f[i].everstoreLogThis===!0&&b("PhotoEverstoreLogger").logImmediately(f[i].resource.src)):!j&&!f[i].small&&(f[i].small=new Image(),f[i].small.src=f[i].smallurl||f[i].url,h=f[i].small.src,f[i].everstoreLogThis===!0&&b("PhotoEverstoreLogger").logImmediately(f[i].small.src)));this.logger&&h&&this.logger.log(h);d=(d+1)%e}};c.loadMoreIfNeccessary=function(a){if(this.allLoaded||a&&this.rightLock||!a&&this.leftLock)return;a=a?1:-1;a=this.position+this.bufferSize*a;a<0&&!this.checkErrorAt(this.getEndCursor(!1))?(this.leftLock=!0,this.fetch(this.fullBucketSize,!1)):a>this.getLength()&&!this.checkErrorAt(this.getEndCursor(!0))&&(this.rightLock=!0,this.fetch(this.fullBucketSize,!0))};c.getEndCursor=function(a){return a?this.fbidList[this.getLength()-1]:this.fbidList[0]};c.calculateRelativeIndex=function(a,b,c){if(!this.totalCount)return null;b=this.fbidList.indexOf(b);c=this.fbidList.indexOf(c);if(b===-1||c===-1)return null;c=c-b;return(a+c+this.totalCount)%this.totalCount};c.calculateDistance=function(a,b){a=this.fbidList.indexOf(a);b=this.fbidList.indexOf(b);return a===-1||b===-1?null:(b-a+this.getLength())%this.getLength()};c.fetch=function(a,c){var d=this.getEndCursor(c);c=babelHelpers["extends"]({cursor:d,version:this.version,end:this.getEndCursor(!c),fetchSize:c?a:-1*a,relevant_count:this.relevantCount,opaqueCursor:this.getOpaqueCursor(d),tagSuggestionMode:this.tagSuggestionMode,is_from_groups:this.isFromGroups},this.photoSetQuery);this.isInViewAsMode()&&(c.viewas=this.getViewAsUserId());this.totalCount&&this.firstCursorIndex!==null&&(c.total=this.totalCount,c.cursorIndex=this.calculateRelativeIndex(this.firstCursorIndex,this.firstCursor,d));a=b("ge")(this.pageletRootID);a||(a=b("DOM").create("div",{id:this.pageletRootID}),b("DOM").appendContent(document.body,a));b("UIPagelet").loadFromEndpoint(this.pageletName,a,c,{usePipe:this.useAjaxPipe,automatic:!0,jsNonblock:!0,crossPage:!0});this.useAjaxPipe||this.setUseAjaxPipe(!0)};c.storeToCache=function(a){var b={};if(!this.isActive)return b;if("error"in a){this.processErrorResult(a.error);b.error=!0;return b}"init"in a&&(this.processInitResult(a.init),b.init={logids:a.init.logids,fbid:a.init.fbid,loggedin:a.init.loggedin,fromad:a.init.fromad,withinbusiness:a.init.withinbusiness,eid:a.init.eid});"image"in a&&(this.processImageResult(a.image),b.image=!0);"data"in a&&(this.processDataResult(a.data),b.data=!0);return b};c.processInitResult=function(c){if(this.loaded)return;this.usesOpaqueCursor=c.usesopaquecursor;this.usesNonCircularPhotoSet=c.isnoncircularphotoset;this.setIsFromGroups(c.is_from_groups);this.loaded=!0;this.photoSetQuery=c.query;c.bufferSize&&(this.bufferSize=c.bufferSize);c.fullBucketSize&&(this.fullBucketSize=c.fullBucketSize);if(this.fbidList.length===0)this.fbidList.push(c.fbid),this.rightLock=!0;else{var d=this.fbidList.indexOf(a.INIT_PLACEHOLDER);d!=-1&&(this.fbidList[d]=c.fbid)}this.firstCursor=c.fbid;this.firstOpaqueCursor=c.opaquecursor;"initIndex"in c&&"totalCount"in c&&(this.firstCursorIndex=c.initIndex,this.totalCount=c.totalCount);if(this.version==b("PhotosConst").VIEWER_PERMALINK){d=c.initialBucketSize?c.initialBucketSize:a.INIT_BUCKET_SIZE;this.fetch(d,!0)}};c.processImageResult=function(a){for(var c in a){c===this.firstCursor&&a[c].everstoreLogThis&&b("PhotoEverstoreLogger").logImmediately(a[c].url);if(this.version===b("PhotosConst").VIEWER_VAULTBOX){var d=a[c];this.cache.image[c]=new(b("PhotoViewerImage"))(d);this.permalinkMap[this.cache.image[c].getURIString()]=c}else this.cache.image[c]=a[c],a[c].dimensions&&(this.cache.image[c].dimensions=b("Vector").deserialize(a[c].dimensions)),a[c].originalDimensions&&(this.cache.image[c].originalDimensions=b("Vector").deserialize(a[c].originalDimensions)),a[c].smalldims&&(this.cache.image[c].smalldims=b("Vector").deserialize(a[c].smalldims)),this.permalinkMap[new(h||(h=b("URI")))(a[c].info.permalink).getUnqualifiedURI().toString()]=c}};c.attachToFbidsList=function(a,b,c){var d=this;if(this.allLoaded)return;a=a.filter(function(a){return!d.fbidList.includes(a)});if(b===-1){for(b=a.length-1;b>=0;b--)this.fbidList.unshift(a[b]),this.position++;this.leftLock=!1}else{for(b=0;b<a.length;b++)this.fbidList.push(a[b]);this.rightLock=!1}c&&this.setAllLoaded()};c.setAllLoaded=function(){this.allLoaded=!0,this.getCursor()===null&&(this.position=this.calculatePositionForMovement(0))};c.processDataResult=function(a){var c=this;for(var d in a){this.cache.html[d]||(this.cache.html[d]={});for(var e in a[d].html){var f=a[d].html[e];typeof f==="string"&&(f=b("HTML")(f).getRootNode());f.childNodes?this.cache.html[d][e]=Array.from(f.childNodes):this.cache.html[d][e]=[]}if("ufi_config"in a[d]){this.cache.ufi_config[d]=a[d].ufi_config;if("snowlift_ufi_module"in a[d]){f=a[d].snowlift_ufi_module.module;this.snowliftUFIModule=f}}if(!("extra"in a[d])){this.cache.extra[d]=null;continue}this.cache.extra[d]={tagRects:{}};if(!Array.isArray(a[d].extra.tagRects))for(e in a[d].extra.tagRects)a[d].extra.tagRects[e]&&(this.cache.extra[d].tagRects[e]=b("Rect").deserialize(a[d].extra.tagRects[e]));Object.keys(a[d].extra).forEach(function(b){if(b=="tagRects")return;c.cache.extra[d][b]=a[d].extra[b]})}};c.processErrorResult=function(b){if(!this.isLoaded()){this.initError=!0;return}b=b.side;var c=[a.ERROR_ID];this.attachToFbidsList(c,b)};c.setTotalCount=function(a){this.totalCount=a};c.setFirstCursorIndex=function(a){this.firstCursorIndex=a};c.setIsFromGroups=function(a){this.isFromGroups=a};c.createUFIRoots=function(a,c){var d={ufiMainRoot:b("DOM").create("div"),ufiComposerRoot:b("DOM").create("div"),ufiStageActionsRoot:b("DOM").create("div")},e=this.snowliftUFIModule;if(!e){this.cache.ufi_roots[a]=d;c(d);return}var f=this.getCurrentUFIConfig();if(Object.keys(f).length===0){this.cache.ufi_roots[a]=d;c(d);return}var g=f.preloader;f=f.props;f.composerPortalNode=d.ufiComposerRoot;f.stageActionsPortalNode=d.ufiStageActionsRoot;var h=f.domAttachmentEventEmitter=new(b("UFI2DOMAttachmentEventEmitter"))();this.cache.ufi_dom_attachment_event_emitters[a]=h;var j=g?g.getContextProvider():null;g&&j?b("ReactRenderer").renderComponent(i.jsx(j,{value:g,children:i.jsx(e,babelHelpers["extends"]({},f))}),d.ufiMainRoot):(f.usePreloadedQueryRenderer=!1,b("ReactRenderer").renderComponent(i.jsx(e,babelHelpers["extends"]({},f)),d.ufiMainRoot));this.cache.ufi_roots[a]=d;c(d,h)};return a}();Object.assign(a,{ERROR:"error",HTML:"html",IMAGE_DATA:"image",EXTRA:"extra",UFI_CONFIG:"ufi_config",UFI_DOM_ATTACHMENT_EVENT_EMITTERS:"ufi_dom_attachment_event_emitters",UFI_ROOTS:"ufi_roots",BUFFER_SIZE:3,INIT_BUCKET_SIZE:4,FULL_BUCKET_SIZE:12,ERROR_ID:-1,INIT_PLACEHOLDER:1});e.exports=a}),null);
__d("PhotosetSearchPivotData",["AsyncRequest","PhotoStreamCache","Promise","ThisControllerNoLongerExists"],(function(a,b,c,d,e,f){"use strict";var g,h=/^(perm:)?tag:(\d+)/,i={};a={fetch:function(a,c){if(!(a in i)){var d=b("ThisControllerNoLongerExists").__DEADBUILDER__("fj266x8op").setInt("fbid",a);if(c){var e={};c.fbidList.forEach(function(a){a=c.getCacheContent(a,b("PhotoStreamCache").EXTRA);a&&Object.keys(a.tagRects).forEach(function(a){if(h.test(a)){a=RegExp.$2;a in e?e[a]++:e[a]=1}})});d.setIntToIntMap("tags",e)}i[a]=new(g||(g=b("Promise")))(function(a,c){new(b("AsyncRequest"))().setURI(d.getURI()).setHandler(function(b){a(b.getPayload())}).setErrorHandler(c).setAllowCrossPageTransition(!0).send()})}return i[a]["catch"](function(b){delete i[a];throw b})}};e.exports=a}),null);
__d("Facepile.react",["cx","fbt","ix","HovercardLink","Image.react","Link.react","List.react","createReactClass_DEPRECATED","intlSummarizeNumber","joinClasses","react"],(function(a,b,c,d,e,f,g,h,i,j){var k=d("react"),l={small:24,medium:32,large:50};a=c("createReactClass_DEPRECATED")({displayName:"Facepile",defaultProps:{moreColor:"blue",moreCount:0,showHovercard:!1,tooltipPosition:"above",showToolTip:!0,spacing:"none"},_onFaceClick:function(a,b){this.props.onFaceClick&&this.props.onFaceClick(a,b)},componentDidMount:function(){this.props.onComponentDidMount&&this.props.onComponentDidMount()},getPicSize:function(){return l[this.props.size]||this.props.size},renderFace:function(a,b){var e=this.getPicSize(),f=d("HovercardLink").constructEndpoint({id:a.uniqueID}).toString();return k.jsx("li",{className:"_43q7",onClick:this._onFaceClick.bind(this,a,b),children:k.jsx(c("Link.react"),{"aria-label":a.name,className:"_2rt_ link","data-hover":this.props.showHovercard?null:"tooltip","data-hovercard":this.props.showHovercard?f:null,"data-ignoreclass":"_2rt_","data-tooltip-alignh":"left","data-tooltip-content":a.name,"data-tooltip-position":this.props.tooltipPosition,href:a.URL,children:k.jsx(c("Image.react"),{src:a.profilePicURI,width:e,height:e,className:"img"})})},a.uniqueID)},renderMore:function(){if(!this.props.moreCount)return null;var a=this.props.numFaces!=null&&this.props.numFaces<=this.props.profiles.length?this.props.moreCount+1:this.props.moreCount,b=c("intlSummarizeNumber")(a,0),d=b.length,e;a===0||this.props.size==="small"&&d>2||this.props.size===28&&d>2||this.props.size==="medium"&&d>3||this.props.size==="large"&&d>6?e=k.jsx(c("Image.react"),{src:j("97502")}):e="+"+b;var f;(this.props.showToolTip===void 0||this.props.showToolTip===!0)&&(a===1?f=i._("1 other person"):f=i._("{num} other people",[i._param("num",a)]));b=c("joinClasses")("_43q8 _43q7"+(d<2?" _43qa":"")+(d===2?" _43qb":"")+(d===3?" _43qd":"")+(d>3?" _43qe":"")+(this.props.moreColor==="blue"?" _49c8":"")+(this.props.moreColor==="gray"?" _49cb":""));return k.jsx("li",{className:b,children:k.jsx("a",{"data-hover":f?"tooltip":null,"data-tooltip-position":f?"right":null,"data-tooltip-content":f,ajaxify:this.props.moreDialogLink||this.props.morePageLink,href:this.props.morePageLink,role:"button",rel:this.props.moreDialogLink?"dialog":null,children:e})})},render:function(){var a=this.props.spacing||this.defaultProps.spacing;a=c("joinClasses")(this.props.className,"_43qm"+(this.props.size==28?" _3cxu":"")+(this.props.size=="small"?" _43q9":"")+(this.props.size=="medium"?" _43qc":"")+(this.props.size=="large"?" _43qf":"")+(a!=this.defaultProps.spacing?" _4nab":""));var b=this.props.numFaces==null?this.props.profiles:this.props.profiles.slice(0,this.props.moreCount?this.props.numFaces-1:this.props.numFaces);return k.jsx("div",{className:a,style:this.props.style,children:k.jsxs(c("List.react"),{className:"_4cg3",direction:"horizontal",spacing:this.props.spacing||"none",border:"none",children:[b.map(this.renderFace),this.renderMore()]})})}});b=a;g["default"]=b}),98);
__d("ProfileBrowserLink",["URI"],(function(a,b,c,d,e,f,g){var h="/ajax/browser/dialog/",i="/browse/",j=function(a,b,d){return new(c("URI"))(a+b).setQueryData(d)};function a(a,b){return j(i,a,b)}function b(a,b){return j(h,a,b)}g.constructPageURI=a;g.constructDialogURI=b}),98);
__d("ProfileBrowserTypes",[],(function(a,b,c,d,e,f){a=Object.freeze({FRIEND_CHECKINS:"friendcheckins",FRIENDED_FANS_OF:"friended_fans_of",GROUP_FRIEND_MEMBERS:"group_friend_members",GROUP_JOIN_REQUESTERS_FRIENDS_IN_GROUP:"group_join_requesters_friends_in_group",GROUP_MEMBERS:"group_members",GROUP_MESSAGE_VIEWERS:"group_message_viewers",LIKES:"likes",LIVE_VIDEO_VIEWERS:"live_video_viewers",MUTUAL_FRIENDS:"mutual_friends",OPTION_VOTERS:"option_voters",PAGE_FEATURED_ADMINS:"featured_admins",WORK_ADMIN_GROUP_ADMINS:"work_admin_group_admins",WORK_ADMIN_GROUP_MEMBERS:"work_admin_group_members"});f["default"]=a}),66);
__d("LtgSeeTranslationLink.react",["cx","Arbiter","AsyncRequest","ContentTranslationStrings","Link.react","LoadingIndicator.react","ReactCSSTransitionGroup","XLtgPostTranslationController","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){b=a.call(this,b,c)||this;b.state={loading:!1,error_loading:!1,translated_content:null};return b}var d=b.prototype;d.render=function(){return i.jsxs("div",{children:[this.$1(),this.$2()]})};d.$1=function(){var a=this;if(this.state.error_loading||this.state.translated_content)return null;var b=this.state.loading?i.jsx(c("LoadingIndicator.react"),{size:"small",color:"white"}):i.jsx(c("Link.react"),{onClick:function(b){a.$3(b)},children:c("ContentTranslationStrings").SEE_TRANSLATION}),d=(this.props.size==="small"?"_2xzj":"")+(this.props.size!=="small"?" _43f9":"");return i.jsx("div",{className:d,children:b})};d.$2=function(){var a=(this.props.size==="small"?"_2xzi":"")+(this.props.size!=="small"?" _49k0":""),b=null;this.state.translated_content?b=i.jsx("div",{dangerouslySetInnerHTML:this.state.translated_content}):this.state.error_loading&&(b=c("ContentTranslationStrings").NO_TRANSLATION_AVAILABLE);a=this.state.translated_content||this.state.error_loading?i.jsx("div",{className:a,children:b}):null;return i.jsx(c("ReactCSSTransitionGroup"),{transitionName:"ltgtranslatedcontent",transitionEnterTimeout:2e3,transitionLeaveTimeout:2e3,children:a})};d.$3=function(a){var b=this;this.setState({loading:!0});a=c("XLtgPostTranslationController").getURIBuilder().setString("ftid",this.props.contentid.toString()).setEnum("text_size",this.props.size).getURI();new(c("AsyncRequest"))().setURI(a).setHandler(function(a){a=a.getPayload();a&&a.text?(b.setState({loading:!1,translated_content:a.text}),c("Arbiter").inform("ufi/translationRendered")):b.setState({loading:!1,error_loading:!0})}).setErrorHandler(function(){this.setState({loading:!1,error_loading:!0})}).send()};return b}(i.Component);a.defaultProps={size:"medium"};g["default"]=a}),98);
__d("PhotoSessionLog",["AsyncRequest","Run","URI","Vector","WWWBase"],(function(a,b,c,d,e,f){var g;function h(){}Object.assign(h,{UNKNOWN:0,ESC:1,X:2,OUTSIDE:3,UNLOAD:4,NAVIGATE:5,AGGREGATE:6,LEAVE:7,LOADING:8,PERMALINK:0,SNOWLIFT:6,SNOWDOWN:13,AGGREGATION_COUNT:20,set:null,time:null,views:0,fbidList:[],details:{},width:0,height:0,first:!1,last:!1,logIds:!1,version:null,source:null,lastVisibleStart:0,currentDuration:0,buttonLikes:0,pagingAction:"",cycle:!1,endOfRelevant:!1,relevantCount:0,closingTypeToString:function(a){return{0:"UNKNOWN",1:"ESC",2:"X",3:"OUTSIDE",4:"UNLOAD",5:"NAVIGATE"}[a]||"UNKNOWN"},initLogging:function(a){this.set=null;this.time=new Date();this.views=0;this.hiResLoads=0;this.fullScreenViews={};this.first=!0;this.last=!1;this.logIds=!1;this.eid="";this.version=a;this.buttonLikes=0;this.pagingAction="";this.cycle=!1;this.endOfRelevant=!1;this.relevantCount=0;this.topLevelPostId=0;this.storyLocation=0;this.storyAttachmentStyle="";this.attachedStoryAttachmentStyle="";this.qid="";this.mfStoryKey="";this.pageInsightsData=null;this.lastVisibleStart=Date.now();this.currentDuration=0;if(a===h.SNOWLIFT){a=b("Vector").getViewportDimensions();this.width=a.x;this.height=a.y}},_isSnowlift:function(){return this.version===h.SNOWLIFT},setLogFbids:function(a){this.logIds=a},setTopLevelPostId:function(a){this.topLevelPostId=a},setStoryLocation:function(a){this.storyLocation=a},setStoryAttachmentStyle:function(a){this.storyAttachmentStyle=a},setAttachedStoryAttachmentStyle:function(a){this.attachedStoryAttachmentStyle=a},setQid:function(a){this.qid=a},setMfStoryKey:function(a){this.mfStoryKey=a},setPageInsightsData:function(a){this.pageInsightsData=a},setEid:function(a){this.eid=a},setPhotoSet:function(a){this.set=a},addButtonLike:function(){this.buttonLikes++},setPagingAction:function(a){this.pagingAction=a},setCycle:function(a){this.cycle=a},setEndOfRelevant:function(a){this.endOfRelevant=a},setRelevantCount:function(a){this.relevantCount=a},setEndMetrics:function(a){this.endMetrics=a},setSource:function(a){this.source=a},addPhotoView:function(a,b,c){this.logIds&&this.views>=this.AGGREGATION_COUNT&&this.logPhotoViews(this.AGGREGATE),this.updateLastFbidDuration(),this.views++,a&&this.fbidList.push([a.fbid,a.owner,Date.now()]),b&&this.hiResLoads++,c&&(this.fullScreenViews[a.fbid]=!0)},updateLastFbidDuration:function(){this.updateDuration(),this.fbidList.length>0&&this.fbidList[this.fbidList.length-1].push(this.currentDuration),this.updateLastVisibleTime(),this.currentDuration=0},updateDuration:function(){this.currentDuration+=Date.now()-this.lastVisibleStart},updateLastVisibleTime:function(){this.lastVisibleStart=Date.now()},logEnterFullScreen:function(a){this.fullScreenViews[a]=!0},addDetailData:function(a,b){this.details[a]||(this.details[a]={t:b.num_tags,l:b.has_location,c:b.has_caption,cm:b.comment_count,lk:b.like_count,w:b.width,h:b.height,ad:"{}",p:this.pagingAction})},updateAdData:function(a,b){this.details[a]&&(this.details[a].ad=JSON.stringify(b))},logPhotoViews:function(a){if(!this.views)return;this.updateLastFbidDuration();a!=this.AGGREGATE&&(this.last=!0);this.logData(a?a:this.UNKNOWN);this.views=0;this.hiResLoads=0;this.fbidList=[];this.details={};this.first=!1;this.buttonLikes=0;this.last&&(this.set=null,this.logIds=!1,this.fullScreenViews={})},logInitialLoad:function(){this.logData(h.LOADING)},logData:function(a){var c=[],d={},e=0;a===this.LOADING?(e=this.topLevelPostId,this.topLevelPostId||(c=this.fbidList,d=this.details)):(c=this.fbidList,d=this.details);c={set:this.set,time:new Date()-this.time,fbids:c,details:d,eid:this.eid,first:this.first,last:this.last,close:a,button_likes:this.buttonLikes,version:this.version,endmetric:this.endMetrics,cycle:this.cycle,end_relev:this.endOfRelevant,relev_count:this.relevantCount,source:this.source,top_level_post_id:e,story_location:this.storyLocation,story_attachment_style:this.storyAttachmentStyle,attached_story_attachment_style:this.attachedStoryAttachmentStyle,qid:this.qid,mf_story_key:this.mfStoryKey,page_insights:this.pageInsightsData};if(this.version===h.SNOWLIFT){d=b("Vector").getViewportDimensions();c.width=d.x||this.width;c.height=d.y||this.height;this.hiResLoads>0&&(c.hires_loads=this.hiResLoads);if(this.last){e=Object.keys(this.fullScreenViews).length;e>0&&(c.fullscreen=e)}}d=new(g||(g=b("URI")))(b("WWWBase").uri).setPath("/ajax/photos/logging/session_logging.php");new(b("AsyncRequest"))().setAllowCrossPageTransition(!0).setURI(d).setOption("asynchronous_DEPRECATED",a!=h.UNLOAD).setOption("suppressErrorHandlerWarning",!0).setData(c).send()}});b("Run").onUnload(function(){h.logPhotoViews(h.UNLOAD)});b("Run").onLeave(function(){h.logPhotoViews(h.LEAVE)});e.exports=h}),null);
__d("PhotosUtils",["Vector"],(function(a,b,c,d,e,f,g){function a(){}Object.assign(a,{getNearestBox:function(a,b){var c=Infinity,d=null;for(var e in a){var f=a[e];if(f.contains(b)){f=b.distanceTo(f.getCenter());f<c&&(c=f,d=e)}}return d},absoluteToNormalizedPosition:function(a,b){var d=c("Vector").getElementPosition(a);a=c("Vector").getElementDimensions(a);b=b.sub(d).mul(100/a.x,100/a.y);b.domain="pure";return b},normalizedToAbsolutePosition:function(a,b){var d=c("Vector").getElementPosition(a);a=c("Vector").getElementDimensions(a);b=b.mul(a.x/100,a.y/100).add(d);b.domain="document";return b},isFacebox:function(a){return a.match(/^face:/)},isTag:function(a){return a.match(/^tag:/)}});g["default"]=a}),98);
__d("PhotoPermalinkURI",["FBLogger"],(function(a,b,c,d,e,f,g){function a(a){return h(a)!==null}function h(a){if(i(a)){var b=a.getQueryData();if(Boolean(b.fbid))return{photo_id:String(b.fbid),set_token:b.set!=null?String(b.set):null};if(Boolean(b.id)&&Boolean(b.pid)){c("FBLogger")("photos","PhotoPermalinkURI_js").warn("Legacy PID usage in PhotoPermalinkURI.js");return{photo_id:String(b.id)+":"+String(b.pid),set_token:b.set!=null?String(b.set):null}}return null}b=a.getPath();b[b.length-1]==="/"&&(b=b.substring(0,b.length-1));a=b.split("/");if(a.length>=3&&a[2]==="photos")if(a.length===4&&/^\d+$/.exec(a[3])!==null)return{photo_id:a[3],set_token:null};else if(a.length===5&&/^\d+$/.exec(a[4])!==null)return{photo_id:a[4],set_token:a[3]};return null}function i(a){a=a.getPath();a[a.length-1]==="/"&&(a=a.substring(0,a.length-1));return a==="/photo.php"||a==="/force_photo/photo.php"||a==="/photo"||a==="/force_photo/photo/index.php"||a==="/photo/index.php"||a==="/force_photo/photo"||a==="/video.php"||a==="/video/video.php"?!0:!1}g.isValid=a;g.parse=h;g.isValidLegacy=i}),98);
__d("PhotosetSearchPivot.react",["cx","fbt","LeftRight.react","PhotosetSearchPivotData","XUISpinner.react","XUIText.react","createReactClass_DEPRECATED","joinClasses","prop-types","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||b("react"),k=function(c){babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.render=function(){return j.jsx("div",{className:"_25r",children:j.jsxs("a",{href:this.props.uri,className:"_25t _3-8t",children:[j.jsxs("div",{className:"_25u",children:[j.jsx("div",{className:"_25v _25w",style:{backgroundImage:"url("+this.props.images[0].uri+")"}}),j.jsxs("div",{className:"_25x",children:[j.jsxs("div",{className:"_25y",children:[j.jsx("div",{className:"_25z"}),j.jsx("div",{className:"_26r",children:j.jsx("div",{className:"_273 _25w",style:{backgroundImage:"url("+this.props.images[1].uri+")"}})})]}),j.jsxs("div",{className:"_274",children:[j.jsx("div",{className:"_25z"}),j.jsx("div",{className:"_26r",children:j.jsx("div",{className:"_273 _25w",style:{backgroundImage:"url("+this.props.images[2].uri+")"}})})]})]})]}),j.jsx(b("XUIText.react"),{display:"block",className:"_27f _2pi4",dangerouslySetInnerHTML:{__html:this.props.title.__html}})]})})};return a}(j.Component);k.propTypes={normalized:b("prop-types").string,title:b("prop-types").object,uri:b("prop-types").string,images:b("prop-types").array};a=b("createReactClass_DEPRECATED")({displayName:"PhotosetSearchPivot",propTypes:{fbid:b("prop-types").string,endofalbum:b("prop-types").bool,withBackground:b("prop-types").bool,linesAroundHeader:b("prop-types").bool,onclose:b("prop-types").func},fetchPivots:function(a){var c=this;b("PhotosetSearchPivotData").fetch(a).then(function(b){setTimeout(c.onFetchSuccess.bind(c,a,b.pivots),0)},function(b){setTimeout(c.onFetchError.bind(c,a),0)})},onFetchSuccess:function(a,b){if(!this.isMounted()||this.props.fbid!==a)return;b=b||[];a="show";b.length===0&&(a="hide");this.setState({pivots:b,action:a})},onFetchError:function(a){if(!this.isMounted()||this.props.fbid!==a)return;this.setState({pivots:[],action:"hide"})},getInitialState:function(){this.fetchPivots(this.props.fbid);return{pivots:[],action:"loading"}},UNSAFE_componentWillReceiveProps:function(a){a.fbid?(this.setState({action:"loading"}),this.fetchPivots(a.fbid)):this.setState({action:"hide",pivots:[]})},onExitClicked:function(){this.props.onclose()},render:function(){if(this.state.action==="loading")return j.jsx("div",{className:b("joinClasses")(this.props.className,"_27h _2ph_"),children:j.jsx(b("XUISpinner.react"),{size:"large"})});if(this.state.action==="hide")return j.jsx("span",{});var a=this.state.pivots.map(function(a){return j.jsx(k,{normalized:a.normalized,title:a.title,uri:a.uri,images:a.images})}),c=this.props.endofalbum?j.jsx("span",{className:"_2pij",children:h._("End of album")}):null,d="_27m _2pi3 _2pib"+(this.props.linesAroundHeader?" _3-te":"");c=j.jsxs("span",{children:[c,j.jsx("span",{className:"_4ptz",children:h._("Other photos you may like")})]});this.props.onclose?c=j.jsxs(b("LeftRight.react"),{className:d,children:[c,j.jsx("a",{href:"#",onClick:this.onExitClicked,className:"_27n"})]}):c=j.jsx("div",{className:d,children:c});return j.jsx("div",{className:b("joinClasses")(this.props.className,(this.state.action==="hide"?"_27j":"")+(this.state.action==="show"?" _27k":"")),children:j.jsxs("div",{className:"_27l"+(this.props.withBackground?" _3-tf":""),children:[c,j.jsx("div",{className:"_27o _2pi8 clearfix",children:a})]})})}});e.exports=a}),null);
__d("PhotosetPivotSlide.react",["cx","fbt","ix","xuiglyph","Image.react","Link.react","PhotosetSearchPivot.react","XUIText.react","react"],(function(a,b,c,d,e,f,g,h,i,j,k){var l=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){if(d.props.albumOwnerName)if(d.props.isAlbum)return i._("End of {user_name}'s album",[i._param("user_name",l.jsx(c("XUIText.react"),{weight:"bold",children:d.props.albumOwnerName}))]);else return i._("End of {user_name}'s photos",[i._param("user_name",l.jsx(c("XUIText.react"),{weight:"bold",children:d.props.albumOwnerName}))]);else if(d.props.isAlbum)return i._("End of album");else return i._("End of photos")},b)||babelHelpers.assertThisInitialized(d)}var d=b.prototype;d.render=function(){return l.jsxs("div",{className:"_1_ap"+(this.props.visible?" _1_aq":""),children:[l.jsxs("div",{className:"_1_ar",children:[l.jsx(c("XUIText.react"),{display:"block",children:this.$1()}),l.jsxs(c("Link.react"),{className:"_1_as",onClick:this.props.onReturn,children:[l.jsx(c("Image.react"),{className:"_1_at",src:j("88724")}),i._("Return to beginning")]})]}),l.jsx(c("PhotosetSearchPivot.react"),{className:"_1_au",fbid:this.props.visible?this.props.fbid:null,linesAroundHeader:!0})]})};return b}(l.Component);g["default"]=a}),98);
__d("DisableContextMenuMixin",["Event","emptyFunction"],(function(a,b,c,d,e,f){"use strict";a=b("emptyFunction");c={getContextMenuContainer:a,_contextMenuEventHandler:null,disableContextMenu:function(){if(this._contextMenuEventHandler)return;this._contextMenuEventHandler=b("Event").listen(this.getContextMenuContainer(),"contextmenu",function(a){a.preventDefault(),a.stopPropagation()})},enableContextMenu:function(){this._contextMenuEventHandler&&(this._contextMenuEventHandler.remove(),this._contextMenuEventHandler=null)}};e.exports=c}),null);
__d("ObjectionableContentFilterMixin",["csx","cx","CSS","DOM","emptyFunction"],(function(a,b,c,d,e,f,g,h){a=b("emptyFunction");c={getObjectionableWarningContainer:a,getObjectionableWarningHiddenContent:a,_objectionableWarningMarkup:null,_objectionableWarningOverlay:null,_objectionableWarningHiddenContentWrapper:null,_objectionableWarningHiddenContent:null,showObjectionableWarning:function(a){var c="._f_2",d="._f_g";this._objectionableWarningMarkup&&this.hideObjectionableWarning();this._objectionableWarningOverlay=b("DOM").scry(a,c).pop();this._objectionableWarningHiddenContentWrapper=b("DOM").scry(a,d).pop();this._objectionableWarningOverlay&&b("CSS").show(this._objectionableWarningOverlay);this._objectionableWarningHiddenContentWrapper&&(this.getObjectionableWarningContainer().replaceChild(a,this.getObjectionableWarningHiddenContent()),this._objectionableWarningHiddenContentWrapper.appendChild(this.getObjectionableWarningHiddenContent()),b("CSS").addClass(a,"_dbl"));this._objectionableWarningMarkup=a;this._objectionableWarningHiddenContent=this.getObjectionableWarningHiddenContent()},hideObjectionableWarning:function(){if(!this.getObjectionableWarningContainer().contains(this._objectionableWarningMarkup))return;this.getObjectionableWarningContainer().replaceChild(this._objectionableWarningHiddenContent,this._objectionableWarningMarkup)}};e.exports=c}),null);
__d("PhotoSnowliftBackLink.react",["cx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){return i.jsx("a",{className:"_1cac"+(this.props.visible?" _1cad":""),href:this.props.href,children:this.props.name})};return b}(i.Component);g["default"]=a}),98);
__d("PhotoSnowliftUFIFeedbackTargets",["Bootloader","KeyedCallbackManager","UFI2CentralUpdates_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h=new(c("KeyedCallbackManager"))();function i(a){var b;if(!a)return;var d=babelHelpers["extends"]({},a);delete d.commentlist;delete d.commentcount;c("UFI2CentralUpdates_DEPRECATED").didUpdateFeedback(a.entidentifier);h.addResourcesAndExecute((b={},b[a.entidentifier]=d,b))}function j(a,b){c("Bootloader").loadModules(["UFIFeedbackMutator"],function(c){for(var d=0;d<a.length;d++){var e=a[d];e.arecommentsdisabled=!!e.arecommentsdisabled;e.cancomment=!!e.cancomment;e.hasviewerliked=!!e.hasviewerliked;e.hasviewersubscribed=!!e.hasviewersubscribed;e.likecount=e.likecount||0;var f=h.getResource(e.entidentifier);if(!f)break;var g=c.getHandlerForAction(e);i(g(f,e,b))}},"PhotoSnowliftUFIFeedbackTargets")}function a(a,b){a=h.executeOrEnqueue(a,b);return a}function b(a){return h.getResource(a)||null}function d(a){h.unsubscribe(a)}c("UFI2CentralUpdates_DEPRECATED").subscribe("update-feedback",function(a,b){a=b.feedbacktarget?b.feedbacktarget:b.feedbacktargets&&b.feedbacktargets[0];a&&i(a)});c("UFI2CentralUpdates_DEPRECATED").subscribe("update-actions",function(a,b){b.actions&&b.actions.length&&j(b.actions,b.payloadsource)});g.getFeedbackTarget=a;g.getFeedbackTargetIfExists=b;g.unsubscribe=d}),102);
__d("UFI2CentralUpdates_DEPRECATED",["Arbiter","ArbiterMixin","LiveTimer","ODS","ShortProfiles","UFI2UserActions_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";d("ODS").setEntitySample("feedback",1e-4);var h=0,i={},j={},k=[];function l(){if(!h){var a=i,b=j;i={};j={};Object.keys(a).length&&n("feedback-updated",a);Object.keys(b).length&&n("comments-updated",b);k.pop()}}function m(){if(k.length)return k[k.length-1];else return 0}function n(a,b){o.inform(a,{payloadSource:m(),updates:b})}var o=babelHelpers["extends"]({},c("ArbiterMixin"),{didUpdateComment:function(a){j[a]=!0,l()},didUpdateFeedback:function(a){i[a]=!0,l()},handleUpdate:function(a,b){Object.keys(b).length&&o.synchronizeInforms(function(){k.push(a);var c=babelHelpers["extends"]({payloadsource:m()},b);c.adjustedRanges&&o.inform("update-ranges",c);o.inform("update-feedback",c);o.inform("update-comment-lists",c);o.inform("update-comments",c);o.inform("update-actions",c);d("ShortProfiles").setMulti(b.profiles||{});b.servertime&&d("LiveTimer").restart(b.servertime)})},handleUpdateWithUserAction:function(a,b){b.actions.forEach(function(e){a===16?Object.prototype.hasOwnProperty.call(e,"commentid")&&(d("UFI2UserActions_DEPRECATED").UFI2UserActions.setHideAsSpam(e.commentid,!0,{source:13}),c("Arbiter").inform("bulk_actions_hidden",{})):o.handleUpdate(a,b)})},synchronizeInforms:function(a){h++;try{a()}catch(a){throw a}finally{h--,l()}}});a=o;g["default"]=a}),98);
__d("UFI2Comments_DEPRECATED",["invariant","ClientIDs","FeedbackPayloadSourceType","ImmutableObject","UFI2CentralUpdates_DEPRECATED","randomInt"],(function(a,b,c,d,e,f,g,h){"use strict";var i=5,j="unavailable_comment_key",k={},l={},m={},n={},o={};n.shareOnComment=o;var p="DONT_SHOW_SHARE_OPTION";function q(a){return a in l?l[a]:a}function r(a,b){a.forEach(function(a){var e=a.ftentidentifier,f=c("FeedbackPayloadSourceType"),g=a.clientid,h=!1,j=babelHelpers["extends"]({},a);if(g){delete j.clientid;h=d("ClientIDs").isExistingClientID(g);if(h&&l[g])return}(b===2||b===4)&&(j.islive=!0);(b===f.ENDPOINT_COMMENT_FETCH||b===f.ENDPOINT_ID_COMMENT_FETCH)&&(j.fromfetch=!0);h&&k[g]&&(j.ufiinstanceid=k[g].ufiinstanceid,j.trackingID=k[g].trackingID,l[g]=a.id,m[a.id]=g,k[a.id]=k[g],delete k[g],c("UFI2CentralUpdates_DEPRECATED").didUpdateComment(g));if(b===f.LIVE_SEND||b===4||b===f.USER_ACTION||b===f.ENDPOINT_ADD_COMMENT||b===f.ENDPOINT_EDIT_COMMENT){j.isunseen=!0;if(a.body&&a.body.text&&a.body.text.trim().split(/\s+/).length>=i&&(b===f.USER_ACTION||b===f.ENDPOINT_ADD_COMMENT)){h=o[e];h!==p&&(o[e]=!h||a.id===h||L(a.id)===h?a.id:p)}}N(a.id,new(c("ImmutableObject"))(j));c("UFI2CentralUpdates_DEPRECATED").didUpdateComment(a.id);c("UFI2CentralUpdates_DEPRECATED").didUpdateFeedback(e)})}function s(a,b){for(var c=0;c<a.length;c++){var d=a[c];switch(d.actiontype){case"fa-type:like":M(d.entidentifier)&&v(d.clientid,d.entidentifier,d.hasviewerliked,d.likecount,d.reactiondata,b);break;case"fa-type:comment-like":v(d.clientid,d.commentid,d.viewerliked,d.likecount,d.reactiondata,b);break;case"fa-type:mute-member":w(d);break;case"fa-type:reaction":M(d.entidentifier)&&x(d.entidentifier,d);break;case"fa-type:comment-reaction":x(d.commentid,d);break;case"fa-type:delete-comment":B(d);break;case"fa-type:live-delete-comment":C(d);break;case"fa-type:change-accepted-answer":D(d);break;case"fa-type:remove-preview":E(d);break;case"fa-type:mark-spam":F(d);break;case"fa-type:keep_spam":G(d);break;case"fa-type:confirm-remove":H(d);break;case"fa-type:translate-comment":z(d);break;case"fa-type:comment-likecount-update":y(d);break;case"fa-type:comment_update_constituent_title":J(d);break;case"fa-type:comment_vote":u(d);break;case"fa-type:comment_author_pin_change":t(d)}}}function t(a){var b=M(a.commentid);b&&K(b.id,{ispinnedbyauthor:a.ispinnedbyauthor})}function u(a){var b=M(a.commentID);b&&K(b.id,{voteCount:a.voteCount,voteEnabled:a.voteEnabled,voteState:a.voteState})}function v(a,b,e,f,g,h){h=M(b);if(h){h={};a=a&&d("ClientIDs").isExistingClientID(a);a||(h.hasviewerliked=e,h.likecount=f,g&&(h.reactioncount=g.reactioncount,h.reactioncountmap=g.reactioncountmap,h.reactioncountreduced=g.reactioncountreduced,h.viewerreaction=g.viewerreaction));h.likeconfirmhash=c("randomInt")(0,1024);K(b,h)}}function w(a){for(var b in k){var c=k[b];if(c.author===a.authorid){c={ismuted:a.shouldmute};K(b,c)}}}function x(a,b){var c=M(a);if(c){var e={};if(b.clientid&&d("ClientIDs").isExistingClientID(b.clientid)&&b.viewerreaction!==c.viewerreaction)return;e.hasviewerliked=b.hasviewerliked;e.likecount=b.likecount;e.reactioncount=b.reactioncount;e.reactioncountmap=b.reactioncountmap;e.reactioncountreduced=b.reactioncountreduced;e.viewerreaction=b.viewerreaction;K(a,e)}}function y(a){var b=M(a.commentid);if(b&&a.hasviewerliked===b.hasviewerliked){b={likeconfirmhash:c("randomInt")(0,1024),likecount:a.likecount};K(a.commentid,b)}}function z(a){var b=a.commentid,c=M(b);if(c){c={translationdata:a.translationdata};K(b,c)}}function A(a){return{commenterIsFOF:a.commenterIsFOF,giveFeedbackLink:a.giveFeedbackLink,isBroadcast:a.isBroadcast,reportLink:a.reportLink,reportOptionsLink:a.reportOptionsLink,showStreamBanControls:a.showStreamBanControls,userIsMinor:a.userIsMinor}}function B(a){a=M(a.commentid);a&&I(a,"status:deleted")}function C(a){a=M(a.commentid);a&&a.status!=="status:deleted"&&I(a,"status:live-deleted")}function D(a){K(a.commentid,{postacceptedanswer:a.isaccepted?a.commentid:null})}function E(a){K(a.commentid,{attachment:null})}function F(a){var b=M(a.commentid);a=a.shouldHideAsSpam?"status:spam-display":null;b&&I(b,a)}function G(a){a=M(a.commentid);a&&K(a.id,{isApproved:!0,needsApproval:!1})}function H(a){K(a.commentid,A(a))}function I(a,b){K(a.id,{priorstatus:a.status,status:b})}function J(a){var b=M(a.commentid);if(b){b={constituentTitle:a.constituentTitle,hasConstituentBadge:a.hasConstituentBadge};K(a.commentid,b)}}function K(a,b){var d=M(a)||new(c("ImmutableObject"))({});N(a,c("ImmutableObject").set(d,b));c("UFI2CentralUpdates_DEPRECATED").didUpdateComment(d.id);c("UFI2CentralUpdates_DEPRECATED").didUpdateFeedback(d.ftentidentifier)}function a(a){return"comment"+(a in m?m[a]:a)}function L(a){return a in m?m[a]:a}function M(a){return a===j?null:k[q(a)]}function N(a,b){b instanceof c("ImmutableObject")||h(0,11854),k[q(a)]=b}function b(a,b){a.length!==0||h(0,4389),n[a]=b}function e(a){return n[a]}function f(a){for(a in a)delete k[q(a)]}function O(a){var b=[];for(var c in k){var d=k[c];d.author===a&&b.push(d)}return b}function P(a){var b=[];for(var c in k){var d=k[c];d.ftentidentifier===a&&b.push(d)}return b}c("UFI2CentralUpdates_DEPRECATED").subscribe("update-comments",function(a,b){b.comments&&b.comments.length&&r(b.comments,b.payloadsource),b.privatecomments&&b.privatecomments.length&&r(b.privatecomments,b.payloadsource),b.pinnedcomments&&b.pinnedcomments.length&&r(b.pinnedcomments,b.payloadsource),b.livethreadedcomments&&b.livethreadedcomments.length&&r(b.livethreadedcomments,b.payloadsource),b.authorpinnedcomments&&b.authorpinnedcomments.length&&r(b.authorpinnedcomments,b.payloadsource)});c("UFI2CentralUpdates_DEPRECATED").subscribe("update-actions",function(a,b){b.actions&&b.actions.length&&s(b.actions,b.payloadsource)});g.getRenderKey=a;g.getLocalID=L;g.getComment=M;g.setComment=N;g.setCacheVariable=b;g.getCacheVariable=e;g.resetComments=f;g.getCommentsForAuthor=O;g.getCommentsForFTEntIdentifier=P}),102);
__d("UFI2UserActionUtils",["Nectar","TrackingNodes","collectDataAttributes"],(function(a,b,c,d,e,f,g){function a(a){if(!a)return{ft:{}};var b={ft:c("collectDataAttributes")(a,["ft"]).ft};if(h(b.ft.tn))return{};d("Nectar").addModuleData(b,a);return b}function h(a){if(a){a=c("TrackingNodes").parseTrackingNodeString(a);for(var b=0;b<a.length;b++){var d=a[b][0];switch(d){case c("TrackingNodes").types.COMMENT:return!0}}}return!1}g.getTrackingData=a}),98);
__d("UFI2UserActions_DEPRECATED",["ActorURI","MercuryServerDispatcher","PhotoSnowliftUFIFeedbackTargets","UFI2CentralUpdates_DEPRECATED","UFI2Comments_DEPRECATED","UFI2UserActionUtils","XUFIHideCommentController"],(function(a,b,c,d,e,f,g){"use strict";a={setHideAsSpam:function(a,b,e){var f=d("UFI2UserActionUtils").getTrackingData(e.target),g=d("UFI2Comments_DEPRECATED").getComment(a),h={actiontype:"fa-type:mark-spam",commentid:a,shouldHideAsSpam:b};c("UFI2CentralUpdates_DEPRECATED").handleUpdate(3,{actions:[h]});g&&d("PhotoSnowliftUFIFeedbackTargets").getFeedbackTarget(g.ftentidentifier,function(h){var i={};i[d("ActorURI").PARAMETER_ACTOR]=h.actorforpost;h=c("XUFIHideCommentController").getURIBuilder().getURI();d("MercuryServerDispatcher").trySend(h,babelHelpers["extends"]({comment_id:a,ft_ent_identifier:g.ftentidentifier,source:e.source,spam_action:b},f,i))})}};g.UFI2UserActions=a}),98);
__d("PhotoSnowliftViewable",["cx","CSS","DOM","EventEmitter","Vector"],(function(a,b,c,d,e,f,g,h){var i=2e3;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;b===void 0&&(b=i);d===void 0&&(d=1);e=a.call(this)||this;e.$PhotoSnowliftViewable5=c("DOM").create("div",{className:"_2-sx"});e.$PhotoSnowliftViewable4=b;e.$PhotoSnowliftViewable3=d;e.$PhotoSnowliftViewable1=null;e.$PhotoSnowliftViewable2=0;e.$PhotoSnowliftViewable6();setTimeout(function(){return e.whenReady(function(){return e.$PhotoSnowliftViewable7()})},0);return e}var e=b.prototype;e.$PhotoSnowliftViewable6=function(){var a=this;this.$PhotoSnowliftViewable1=setTimeout(function(){return a.$PhotoSnowliftViewable8()},this.$PhotoSnowliftViewable4)};e.$PhotoSnowliftViewable8=function(){if(this.isReady())return;this.$PhotoSnowliftViewable2<this.$PhotoSnowliftViewable3?(this.reload(),this.$PhotoSnowliftViewable2++,this.$PhotoSnowliftViewable6()):this.emit("loadingfailed")};e.reload=function(){};e.$PhotoSnowliftViewable7=function(){this.$PhotoSnowliftViewable1!==null&&(clearTimeout(this.$PhotoSnowliftViewable1),this.$PhotoSnowliftViewable1=null)};e.getElement=function(){return this.$PhotoSnowliftViewable5};e.show=function(){d("CSS").show(this.getElement())};e.hide=function(){d("CSS").hide(this.getElement())};e.suspend=function(){};e.resume=function(){};e.onToggleIntoFullScreen=function(){};e.onToggleOutOfFullScreen=function(){};e.onEnterFullScreen=function(){};e.onExitFullScreen=function(){};e.getNaturalDimensions=function(){return this.getDimensions()};e.getDimensions=function(){return c("Vector").getElementDimensions(this.getElement())};e.setDimensions=function(a){var b=this.getElement();b.style.width=a.x+"px";b.style.height=a.y+"px"};e.isReady=function(){throw new Error("Viewable has no concept of readiness - should be calling a subclass")};e.whenReady=function(a){this.isReady()?setTimeout(a,0):this.once("ready",a)};return b}(c("EventEmitter"));g["default"]=a}),98);
__d("PhotoSnowliftViewableImageWrapper",["Event","ImageUtils","PhotoSnowliftViewable","TimeSlice","Vector"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var d;d=a.call(this)||this;d.$PhotoSnowliftViewableImageWrapper1=b;d.getElement().appendChild(b);if(d.$PhotoSnowliftViewableImageWrapper1.complete)d.$PhotoSnowliftViewableImageWrapper2();else{b=c("TimeSlice").getGuardedContinuation("PhotoSnowLiftViewable photo load");c("Event").listen(d.$PhotoSnowliftViewableImageWrapper1,"load",b.bind(null,function(){return d.$PhotoSnowliftViewableImageWrapper2()}))}return d}var e=b.prototype;e.$PhotoSnowliftViewableImageWrapper2=function(){this.emit("ready")};e.isReady=function(){return d("ImageUtils").hasLoaded(this.$PhotoSnowliftViewableImageWrapper1)};e.getNaturalDimensions=function(){return this.$PhotoSnowliftViewableImageWrapper1&&this.$PhotoSnowliftViewableImageWrapper1.naturalWidth&&this.$PhotoSnowliftViewableImageWrapper1.naturalHeight?c("Vector").from(this.$PhotoSnowliftViewableImageWrapper1.naturalWidth,this.$PhotoSnowliftViewableImageWrapper1.naturalHeight):a.prototype.getNaturalDimensions.call(this)};return b}(c("PhotoSnowliftViewable"));g["default"]=a}),98);
__d("PhotoSnowliftViewablePhoto",["Bootloader","DOM","EncryptedImg","Event","ImageUtils","PhotoSnowliftViewable","TimeSlice","Vector"],(function(a,b,c,d,e,f,g){function h(a,b){if(a.src&&a.complete)setTimeout(b,0);else var d=c("Event").listen(a,"load",function(){d.remove(),b()})}function i(a,b){c("EncryptedImg").isEncrypted(b)?c("EncryptedImg").insertIntoDOM(b,a):a.src=b}a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e,f,g,h,i,j){var k;d===void 0&&(d=!1);g===void 0&&(g=!1);h===void 0&&(h=!1);j===void 0&&(j=!1);k=a.call(this)||this;k.$PhotoSnowliftViewablePhoto2=e;k.$PhotoSnowliftViewablePhoto7=b;k.$PhotoSnowliftViewablePhoto6=c;k.$PhotoSnowliftViewablePhoto3=d;k.$PhotoSnowliftViewablePhoto1=i;k.$PhotoSnowliftViewablePhoto8=f;k.$PhotoSnowliftViewablePhoto9=g;k.$PhotoSnowliftViewablePhoto10=h;k.$PhotoSnowliftViewablePhoto11=j;k.addListener("imageloaded",function(a){return k.$PhotoSnowliftViewablePhoto13(a)});k.$PhotoSnowliftViewablePhoto14();return k}var e=b.prototype;e.$PhotoSnowliftViewablePhoto14=function(){var a=this;this.$PhotoSnowliftViewablePhoto4&&this.$PhotoSnowliftViewablePhoto4.parentElement&&this.$PhotoSnowliftViewablePhoto4.parentElement.removeChild(this.$PhotoSnowliftViewablePhoto4);var b=c("DOM").create("img",{className:"spotlight",alt:this.$PhotoSnowliftViewablePhoto1});this.$PhotoSnowliftViewablePhoto2&&this.$PhotoSnowliftViewablePhoto2.setElementDimensions(b);this.$PhotoSnowliftViewablePhoto4=b;this.$PhotoSnowliftViewablePhoto4.setAttribute("aria-busy","true");this.getElement().appendChild(this.$PhotoSnowliftViewablePhoto4);this.$PhotoSnowliftViewablePhoto12=c("TimeSlice").getGuardedContinuation("PhotoSnowliftViewable image load");this.$PhotoSnowliftViewablePhoto15(this.$PhotoSnowliftViewablePhoto16());h(this.$PhotoSnowliftViewablePhoto4,this.$PhotoSnowliftViewablePhoto12.bind(void 0,function(){a.emit("imageloaded",b)}));this.whenReady(function(){return a.$PhotoSnowliftViewablePhoto17()});this.$PhotoSnowliftViewablePhoto18();this.$PhotoSnowliftViewablePhoto19()};e.$PhotoSnowliftViewablePhoto19=function(){var a=this;this.$PhotoSnowliftViewablePhoto10&&!this.$PhotoSnowliftViewablePhoto9&&c("Bootloader").loadModules(["PhotoSnowliftViewableWithContextMenuLogging"],function(b){b=b.setupContextMenuLogging;b(a.getElement(),a.$PhotoSnowliftViewablePhoto8)},"PhotoSnowliftViewablePhoto")};e.$PhotoSnowliftViewablePhoto18=function(){var a=this;if(!this.$PhotoSnowliftViewablePhoto11)return;c("Bootloader").loadModules(["PhotoSnowliftViewableWithShieldIconOverlay"],function(b){b=b.setupShieldIconOverlay;b(a.getElement())},"PhotoSnowliftViewablePhoto")};e.$PhotoSnowliftViewablePhoto15=function(a){this.$PhotoSnowliftViewablePhoto5=a,i(this.$PhotoSnowliftViewablePhoto4,this.$PhotoSnowliftViewablePhoto5)};e.$PhotoSnowliftViewablePhoto13=function(a){if(this.$PhotoSnowliftViewablePhoto4!==a)return;this.emit("ready")};e.reload=function(){this.$PhotoSnowliftViewablePhoto14()};e.$PhotoSnowliftViewablePhoto16=function(){return this.$PhotoSnowliftViewablePhoto3?this.$PhotoSnowliftViewablePhoto7:this.$PhotoSnowliftViewablePhoto6||this.$PhotoSnowliftViewablePhoto7};e.$PhotoSnowliftViewablePhoto17=function(){this.$PhotoSnowliftViewablePhoto4.setAttribute("aria-busy","false")};e.isReady=function(){return this.$PhotoSnowliftViewablePhoto4.src&&d("ImageUtils").hasLoaded(this.$PhotoSnowliftViewablePhoto4)};e.getNaturalDimensions=function(){if(this.$PhotoSnowliftViewablePhoto2)return this.$PhotoSnowliftViewablePhoto2;return this.$PhotoSnowliftViewablePhoto4&&this.$PhotoSnowliftViewablePhoto4.naturalWidth&&this.$PhotoSnowliftViewablePhoto4.naturalHeight?c("Vector").from(this.$PhotoSnowliftViewablePhoto4.naturalWidth,this.$PhotoSnowliftViewablePhoto4.naturalHeight):a.prototype.getNaturalDimensions.call(this)};e.$PhotoSnowliftViewablePhoto20=function(){return this.$PhotoSnowliftViewablePhoto5===this.$PhotoSnowliftViewablePhoto7};e.onToggleIntoFullScreen=function(){this.$PhotoSnowliftViewablePhoto20()||this.$PhotoSnowliftViewablePhoto5!==this.$PhotoSnowliftViewablePhoto7&&i(new Image(),this.$PhotoSnowliftViewablePhoto7)};e.onEnterFullScreen=function(){this.$PhotoSnowliftViewablePhoto20()||this.$PhotoSnowliftViewablePhoto15(this.$PhotoSnowliftViewablePhoto7)};return b}(c("PhotoSnowliftViewable"));g["default"]=a}),98);
__d("SphericalMediaActions",[],(function(a,b,c,d,e,f){"use strict";a="TURN_ON";b="TURN_OFF";c="ENABLE_SPHERICAL";d="DISABLE_SPHERICAL";e="REQUEST_PHOTO_FAILED";var g="REQUEST_PHOTO",h="RECEIVE_PHOTO",i="UPDATE_BASE",j="DRAG_START",k="GYRO_START",l="ZOOM_START",m="SIGNIFICANT_MOVE",n="MOUSE_ANIMATION_START",o="MOUSE_ENTER",p="TAP_HEADING_INDICATOR",q="VIEWPORT_CLICKED",r="VISIBILITY_CHANGED",s="UPDATE_DIMENSION",t="UPDATE_INITIAL_FOV",u="UPDATE_INITIAL_VIEWPORT",v="SETUP_RENDERER",w="WEBGL_CONTEXT_LOST",x="WEBGL_INIT_FAILED",y="WEBGL_RENDER_FAILED",z="SOURCE_ONLOAD",A="REPLACE_BASE_STATE",B="UPDATE_CTR_ELEM",C="SHOW_FALLBACK",D="FALLBACK_MOUSE_OVER",E="FALLBACK_MOUSE_OUT",F="FALLBACK_INDICATOR_MOUSE_OVER",G="FALLBACK_INDICATOR_MOUSE_OUT",H="UPDATE_PARTIAL_LIMITS",I="USE_FALLBACK",J="UPDATE_VIEW",K="UPDATE_VIEWPORT",L="UPDATE_FOV",M="UPDATE_YAW",N="UPDATE_VIEWPORT_AND_FOV",O="START_ANIMATING",P="STOP_ANIMATING",Q="UPDATE_FEED_ROOT_ELEMENT",R="UPDATE_PHOTO_EDIT",S="CANCEL_EDITING",T="START_EDITING",U="STOP_EDITING",V="UPDATE_PHOTO",W="UPDATE_PHOTO_FAILED",X="UPDATE_PHOTO_DONE",Y=108,Z=109,$=110,aa="RESET_MOUSE_ANIMATION",ba="START_MOUSE_ANIMATION",ca="STOP_MOUSE_ANIMATION",da="DISABLE_SPHERICAL_ON_SAVE",ea="ENABLE_SPHERICAL_ON_SAVE",fa="ENABLE_EDITING",ga="DISABLE_EDITING",ha="TAKE_STATE_SNAPSHOT",ia="RESTORE_EDIT_STATE_FROM_SNAPSHOT",ja="RESTORE_TAGS_STATE_FROM_SNAPSHOT",ka="REMOVE_STATE_SNAPSHOT",la="PHOTO_REMOVED",ma="UPDATE_FILE_URL",na="SET_VR_IS_PRESENTING",oa="SET_VR_DEVICE",pa="SET_VR_RENDERING_SUPPORTED",qa="SET_VR_RENDERER_IS_READY",ra="CANVAS_RESIZE_START",sa="CANVAS_RESIZE_IMG_LOADED",ta="CANVAS_RESIZE_SUCCESS",ua="CANVAS_RESIZE_FAILED",va="OPEN_TAG_DIALOG",wa="CLOSE_TAG_DIALOG",xa="SAVE_DIALOG_TAGS",ya="CANCEL_DIALOG_TAG_CHANGES",za="PHOTO_RENDERER_STATS",Aa="ENABLE_TAGGING",Ba="DISABLE_TAGGING",Ca="UPDATE_SPATIAL_TAGS",Da="UPDATE_SPATIAL_TAGS_FROM_COMPOSER",Ea="UPDATE_TAG_UNDER_MOUSE",Fa="TAGGING_START",Ga="TAGGING_STOP",Ha="UPDATE_TAG_CLICKED",Ia="UPDATE_TAGGER",Ja="ENTER_TAGGING_MODE",Ka="EXIT_TAGGING_MODE",La="UPDATE_TARGETED_TAG",Ma="REDIRECT_FROM_CLICKED_TAG",Na="DELETED_SPATIAL_TAG",Oa="ADD_SPATIAL_TAG_FROM_PHOTO_TAGGER";f.TURN_ON=a;f.TURN_OFF=b;f.ENABLE_SPHERICAL=c;f.DISABLE_SPHERICAL=d;f.REQUEST_PHOTO_FAILED=e;f.REQUEST_PHOTO=g;f.RECEIVE_PHOTO=h;f.UPDATE_BASE=i;f.DRAG_START=j;f.GYRO_START=k;f.ZOOM_START=l;f.SIGNIFICANT_MOVE=m;f.MOUSE_ANIMATION_START=n;f.MOUSE_ENTER=o;f.TAP_HEADING_INDICATOR=p;f.VIEWPORT_CLICKED=q;f.VISIBILITY_CHANGED=r;f.UPDATE_DIMENSION=s;f.UPDATE_INITIAL_FOV=t;f.UPDATE_INITIAL_VIEWPORT=u;f.SETUP_RENDERER=v;f.WEBGL_CONTEXT_LOST=w;f.WEBGL_INIT_FAILED=x;f.WEBGL_RENDER_FAILED=y;f.SOURCE_ONLOAD=z;f.REPLACE_BASE_STATE=A;f.UPDATE_CTR_ELEM=B;f.SHOW_FALLBACK=C;f.FALLBACK_MOUSE_OVER=D;f.FALLBACK_MOUSE_OUT=E;f.FALLBACK_INDICATOR_MOUSE_OVER=F;f.FALLBACK_INDICATOR_MOUSE_OUT=G;f.UPDATE_PARTIAL_LIMITS=H;f.USE_FALLBACK=I;f.UPDATE_VIEW=J;f.UPDATE_VIEWPORT=K;f.UPDATE_FOV=L;f.UPDATE_YAW=M;f.UPDATE_VIEWPORT_AND_FOV=N;f.START_ANIMATING=O;f.STOP_ANIMATING=P;f.UPDATE_FEED_ROOT_ELEMENT=Q;f.UPDATE_PHOTO_EDIT=R;f.CANCEL_EDITING=S;f.START_EDITING=T;f.STOP_EDITING=U;f.UPDATE_PHOTO=V;f.UPDATE_PHOTO_FAILED=W;f.UPDATE_PHOTO_DONE=X;f.UPDATE_RENDERER_PROJECTION_TYPE=Y;f.UPDATE_RENDERER_PROJECTION_TYPE_FAILED=Z;f.UPDATE_RENDERER_PROJECTION_TYPE_DONE=$;f.RESET_MOUSE_ANIMATION=aa;f.START_MOUSE_ANIMATION=ba;f.STOP_MOUSE_ANIMATION=ca;f.DISABLE_SPHERICAL_ON_SAVE=da;f.ENABLE_SPHERICAL_ON_SAVE=ea;f.ENABLE_EDITING=fa;f.DISABLE_EDITING=ga;f.TAKE_STATE_SNAPSHOT=ha;f.RESTORE_EDIT_STATE_FROM_SNAPSHOT=ia;f.RESTORE_TAGS_STATE_FROM_SNAPSHOT=ja;f.REMOVE_STATE_SNAPSHOT=ka;f.PHOTO_REMOVED=la;f.UPDATE_FILE_URL=ma;f.SET_VR_IS_PRESENTING=na;f.SET_VR_DEVICE=oa;f.SET_VR_RENDERING_SUPPORTED=pa;f.SET_VR_RENDERER_IS_READY=qa;f.CANVAS_RESIZE_START=ra;f.CANVAS_RESIZE_IMG_LOADED=sa;f.CANVAS_RESIZE_SUCCESS=ta;f.CANVAS_RESIZE_FAILED=ua;f.OPEN_TAG_DIALOG=va;f.CLOSE_TAG_DIALOG=wa;f.SAVE_DIALOG_TAGS=xa;f.CANCEL_DIALOG_TAG_CHANGES=ya;f.PHOTO_RENDERER_STATS=za;f.ENABLE_TAGGING=Aa;f.DISABLE_TAGGING=Ba;f.UPDATE_SPATIAL_TAGS=Ca;f.UPDATE_SPATIAL_TAGS_FROM_COMPOSER=Da;f.UPDATE_TAG_UNDER_MOUSE=Ea;f.TAGGING_START=Fa;f.TAGGING_STOP=Ga;f.UPDATE_TAG_CLICKED=Ha;f.UPDATE_TAGGER=Ia;f.ENTER_TAGGING_MODE=Ja;f.EXIT_TAGGING_MODE=Ka;f.UPDATE_TARGETED_TAG=La;f.REDIRECT_FROM_CLICKED_TAG=Ma;f.DELETED_SPATIAL_TAG=Na;f.ADD_SPATIAL_TAG_FROM_PHOTO_TAGGER=Oa}),66);
__d("SphericalMediaActionNamespaces",[],(function(a,b,c,d,e,f){"use strict";a="BASE";b="CORE";c="PHOTO";d="PHOTO_EDIT";e="VIEW";f.BASE=a;f.CORE=b;f.PHOTO=c;f.PHOTO_EDIT=d;f.VIEW=e}),66);
__d("SphericalMediaBaseActions",["SphericalMediaActionNamespaces","SphericalMediaActions"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").UPDATE_BASE,data:a}};function a(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").DRAG_START}}function b(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").GYRO_START}}function c(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").MOUSE_ANIMATION_START}}function e(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").MOUSE_ENTER}}function f(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").TAP_HEADING_INDICATOR}}function i(a){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").SIGNIFICANT_MOVE,data:{view:a}}}function j(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").VIEWPORT_CLICKED}}function k(a){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").VISIBILITY_CHANGED,data:a}}function l(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").ZOOM_START}}var m=function(a,b){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").UPDATE_DIMENSION,data:{width:a,height:b}}},n=function(a,b){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").UPDATE_INITIAL_VIEWPORT,data:{initialYaw:a,initialPitch:b}}},o=function(a){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").UPDATE_INITIAL_FOV,data:{initialFov:a}}},p=function(a,b){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").SETUP_RENDERER,data:{renderer:a,dt:b}}};function q(a){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").WEBGL_INIT_FAILED,data:{error:a}}}function r(a,b){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").WEBGL_RENDER_FAILED,data:{error:a,view:b}}}function s(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").WEBGL_CONTEXT_LOST}}var t=function(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").SOURCE_ONLOAD}},u=function(a){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").REPLACE_BASE_STATE,data:a}},v=function(a){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").UPDATE_SPATIAL_TAGS,data:a}},w=function(a){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").UPDATE_SPATIAL_TAGS_FROM_COMPOSER,data:a}},x=function(a){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").UPDATE_TAG_UNDER_MOUSE,data:a}},y=function(a){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").UPDATE_FILE_URL,data:a}};function z(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").CANVAS_RESIZE_START}}function A(a,b){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").CANVAS_RESIZE_IMG_LOADED,data:{width:a,height:b}}}function B(a){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").CANVAS_RESIZE_SUCCESS,data:a}}function C(a){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").CANVAS_RESIZE_FAILED,data:a}}var D=function(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").ENABLE_TAGGING}},E=function(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").DISABLE_TAGGING}},F=function(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").TAGGING_START}},G=function(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").TAGGING_STOP}},H=function(a){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").UPDATE_TAG_CLICKED,data:a}},I=function(a){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").UPDATE_TAGGER,data:a}},J=function(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").ENTER_TAGGING_MODE}},K=function(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").EXIT_TAGGING_MODE}},L=function(a){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").UPDATE_TARGETED_TAG,data:a}},M=function(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").REDIRECT_FROM_CLICKED_TAG}},N=function(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").DELETED_SPATIAL_TAG}};function O(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").ADD_SPATIAL_TAG_FROM_PHOTO_TAGGER}}function P(a){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").UPDATE_CTR_ELEM,data:{element:a}}}function Q(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").SHOW_FALLBACK}}var R=function(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").REQUEST_PHOTO}},S=function(a,b){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").REQUEST_PHOTO_FAILED,data:{id:a,error:b}}},T=function(a,b){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").RECEIVE_PHOTO,data:b}},U=function(a){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").UPDATE_PARTIAL_LIMITS,data:a}};function V(){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").USE_FALLBACK}}var W=function(a){return{namespace:d("SphericalMediaActionNamespaces").BASE,type:d("SphericalMediaActions").UPDATE_FEED_ROOT_ELEMENT,data:a}};g.updateBase=h;g.dragStart=a;g.gyroStart=b;g.mouseAnimationStart=c;g.mouseEnter=e;g.tapHeadingIndicator=f;g.significantMove=i;g.viewportClicked=j;g.visibilityChanged=k;g.zoomStart=l;g.updateDimension=m;g.updateInitialViewport=n;g.updateInitialFOV=o;g.setupRenderer=p;g.webGlInitFailed=q;g.webGlRenderFailed=r;g.webGlContextLost=s;g.sourceOnLoad=t;g.replaceBaseState=u;g.updateSpatialTags=v;g.updateSpatialTagsFromComposer=w;g.updateTagUnderMouse=x;g.updateFileURL=y;g.canvasResizeStart=z;g.canvasResizeImgLoaded=A;g.canvasResizeSuccess=B;g.canvasResizeFailed=C;g.enableTagging=D;g.disableTagging=E;g.taggingStart=F;g.taggingStop=G;g.updateTagClicked=H;g.updateTagger=I;g.enterTaggingMode=J;g.exitTaggingMode=K;g.updateTargetedTag=L;g.redirectFromClickedTag=M;g.deletedSpatialTag=N;g.addSpatialTagFromPhotoTagger=O;g.updateCtrElem=P;g.showFallbackUI=Q;g.requestPhoto=R;g.requestPhotoFailed=S;g.receivePhoto=T;g.updatePartialLimits=U;g.useFallbackUI=V;g.updateFeedRootElement=W}),98);
__d("SphericalMediaBootloaded.react",["cx","BootloadedComponent.react","JSResource","LoadingIndicator.react","SphericalMediaConstants","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=function(a,b){return i.jsx("div",{className:a,style:b,children:i.jsx(c("LoadingIndicator.react"),{className:"_4qlq",size:"small",color:"white"})})};a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){switch(this.props.componentName){case c("SphericalMediaConstants").COMP_PHOTO_EDIT_THUMB:var a=this.props.loadingElement||j("_7d7",{width:this.props.width,height:this.props.height});return i.jsx(c("BootloadedComponent.react"),babelHelpers["extends"]({bootloadLoader:c("JSResource")("SphericalPhotoEditThumbnail.react").__setRef("SphericalMediaBootloaded.react"),bootloadPlaceholder:a},this.props));case c("SphericalMediaConstants").COMP_PHOTO_VIEWER:a=i.jsx("div",{});return i.jsx(c("BootloadedComponent.react"),babelHelpers["extends"]({bootloadLoader:c("JSResource")("SphericalPhotoViewer.react").__setRef("SphericalMediaBootloaded.react"),bootloadPlaceholder:a},this.props));default:return null}};return b}(i.PureComponent);g["default"]=a}),98);
__d("SphericalMediaGyroOverlay.react",["cx","CSS","joinClasses","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=800,k=function(a,b,c){b===void 0&&(b=!0);c===void 0&&(c=!1);return{gyroRoot:"_1zvy"+(a?" _2dz7":"")+(b?" _4z8s":"")+(c?" _4z8p":""),gyroOuter:"_4z8q",gyroInner:"_4z8r",gyroMeridian:"_4z8t",gyroEquator:"_4z8u",gyroTextShell:"_4z8v",gyroText:"_4z8w"}};a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.rootRef=i.createRef(),b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.componentDidUpdate=function(a){var b=this;if(a.isActive&&!this.props.isActive)setTimeout(function(){var a=b.rootRef.current;a instanceof Element&&d("CSS").hide(a)},j);else if(!this.props.isActive){a=this.rootRef.current;a instanceof Element&&d("CSS").hide(a)}};e.componentDidMount=function(){if(!this.props.isActive){var a=this.rootRef.current;a instanceof Element&&d("CSS").hide(a)}};e.render=function(){var a=this.props,b=a.className,d=a.isActive,e=a.isInfinite;a=a.isPaused;d=k(d,e,a);return i.jsx("div",{className:c("joinClasses")(b,d.gyroRoot),ref:this.rootRef,children:i.jsxs("div",{className:d.gyroOuter,children:[i.jsxs("div",{className:d.gyroInner,children:[i.jsx("div",{className:d.gyroMeridian}),i.jsx("div",{className:d.gyroEquator})]}),i.jsx("div",{className:d.gyroTextShell,children:i.jsx("span",{className:d.gyroText,children:"360"})})]})})};return b}(i.PureComponent);g["default"]=a}),98);
__d("SphericalPhotoPlaceHolderWithGyroOverlay.react",["cx","BackgroundImage.react","Image.react","SphericalMediaGyroOverlay.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return i.jsxs("div",{className:"_5nxw _1c1o",children:[this.props.showNewRenderer?i.jsx(c("BackgroundImage.react"),{backgroundSize:"contain",height:this.props.height,src:this.props.placeholderImageURL,width:this.props.width}):i.jsx(c("Image.react"),{className:"_1c1p",height:this.props.height,src:this.props.placeholderImageURL,width:this.props.width}),i.jsx(c("SphericalMediaGyroOverlay.react"),{className:"_1c1q",isActive:!0})]})};return b}(i.PureComponent);g["default"]=a}),98);
__d("PhotoSnowliftViewableSphericalPhoto",["cx","Arbiter","Bootloader","CSS","DOM","DOMQuery","PhotoSnowliftViewable","ReactDOM","SphericalMediaActions","SphericalMediaBaseActions","SphericalMediaBootloaded.react","SphericalMediaConstants","SphericalPhotoPlaceHolderWithGyroOverlay.react","SphericalPhotoTypedConfig","SubscriptionsHandler","Vector","getViewportDimensions","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=2e3*16,k=360;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e,f,g,h,i,k,l,m,n,o,p,q,r,s){var t;l===void 0&&(l=!1);t=a.call(this,j)||this;t.$PhotoSnowliftViewableSphericalPhoto31=function(a){var b=a.dispatch;a.getState;b(d("SphericalMediaBaseActions").updateFeedRootElement(t.$PhotoSnowliftViewableSphericalPhoto5));return function(a){return function(b){return a(b)}}};t.$PhotoSnowliftViewableSphericalPhoto32=function(a){var b=a.dispatch,e=a.getState;t.$PhotoSnowliftViewableSphericalPhoto15.getTagger()?b(d("SphericalMediaBaseActions").updateTagger(t.$PhotoSnowliftViewableSphericalPhoto15.getTagger())):t.$PhotoSnowliftViewableSphericalPhoto19.addSubscriptions(c("Arbiter").subscribe(t.$PhotoSnowliftViewableSphericalPhoto15.getEventString("TAGGER_READY"),function(a,c){b(d("SphericalMediaBaseActions").updateTagger(t.$PhotoSnowliftViewableSphericalPhoto15.getTagger()))}));t.$PhotoSnowliftViewableSphericalPhoto19.addSubscriptions(c("Arbiter").subscribe("PhotoTagger.START_TAGGING",function(a,c){t.$PhotoSnowliftViewableSphericalPhoto22=!0,b(d("SphericalMediaBaseActions").enterTaggingMode())}),c("Arbiter").subscribe("PhotoTagger.STOP_TAGGING",function(a,c){b(d("SphericalMediaBaseActions").exitTaggingMode()),t.$PhotoSnowliftViewableSphericalPhoto22=!1}),c("Arbiter").subscribe("PhotoTags.SHOWTAG",function(a,f){c("Bootloader").loadModules(["SphericalMediaTaggingUtils"],function(a){a=a.getSpatialTagFromFBID;a=a(f,e().base.tags);b(d("SphericalMediaBaseActions").updateTargetedTag(a))},"PhotoSnowliftViewableSphericalPhoto")}),c("Arbiter").subscribe("PhotoTags.HIDETAG",function(a,c){b(d("SphericalMediaBaseActions").updateTargetedTag(null))}),c("Arbiter").subscribe(t.$PhotoSnowliftViewableSphericalPhoto15.getEventString("EXTRA_DATA_CHANGE"),function(a,e){a=e?e.spatialTags:null;if(a&&Array.isArray(a)){b(d("SphericalMediaBaseActions").updateSpatialTags(a));b(d("SphericalMediaBaseActions").taggingStop());var f=0;a.forEach(function(a){a.type!==c("SphericalMediaConstants").UNTAGGED_FACEBOX&&f++});if(t.$PhotoSnowliftViewableSphericalPhoto13&&t.$PhotoSnowliftViewableSphericalPhoto13>f){e=t.$PhotoSnowliftViewableSphericalPhoto13-f;for(a=0;a<e;a++)b(d("SphericalMediaBaseActions").deletedSpatialTag())}t.$PhotoSnowliftViewableSphericalPhoto13=f}}));return function(a){return function(b){return a(b)}}};t.$PhotoSnowliftViewableSphericalPhoto30=function(a){a.getState;return function(a){return function(b){if(b.type===d("SphericalMediaActions").SHOW_FALLBACK){t.$PhotoSnowliftViewableSphericalPhoto11=!0;d("CSS").hide(t.$PhotoSnowliftViewableSphericalPhoto4);var c=d("DOMQuery").scry(t.$PhotoSnowliftViewableSphericalPhoto15.stageWrapper,".fbPhotosPhotoActionsTag.tagButton");c.length>0&&d("CSS").hide(c[0])}return a(b)}}};t.$PhotoSnowliftViewableSphericalPhoto27=function(){return function(a){return function(b){b.type===d("SphericalMediaActions").SETUP_RENDERER&&(t.$PhotoSnowliftViewableSphericalPhoto11=!0,d("CSS").hide(t.$PhotoSnowliftViewableSphericalPhoto4),t.$PhotoSnowliftViewableSphericalPhoto15.adjustStageSize());return a(b)}}};t.$PhotoSnowliftViewableSphericalPhoto28=function(a){var b=a.dispatch;return function(a){return function(c){if(c.type===d("SphericalMediaActions").SETUP_RENDERER){var e=t.$PhotoSnowliftViewableSphericalPhoto15.getTagger();e&&e.taggingMode!=t.$PhotoSnowliftViewableSphericalPhoto22&&(t.$PhotoSnowliftViewableSphericalPhoto22=e.taggingMode,b(e.taggingMode?d("SphericalMediaBaseActions").enterTaggingMode():d("SphericalMediaBaseActions").exitTaggingMode()))}return a(c)}}};t.$PhotoSnowliftViewableSphericalPhoto29=function(a){a.getState;var b=a.dispatch;return function(a){return function(c){if(c.type===d("SphericalMediaActions").TURN_ON||c.type===d("SphericalMediaActions").SHOW_FALLBACK){var e=function(){var a=t.$PhotoSnowliftViewableSphericalPhoto26();b(d("SphericalMediaBaseActions").updateDimension(a.x,a.y))};t.$PhotoSnowliftViewableSphericalPhoto18.addSubscriptions(t.addListener("onEnterFullScreen",e),t.addListener("onExitFullScreen",e),t.addListener("onSetDimensions",e));e()}return a(c)}}};t.$PhotoSnowliftViewableSphericalPhoto1=s;t.$PhotoSnowliftViewableSphericalPhoto2=f;t.$PhotoSnowliftViewableSphericalPhoto3=m;t.$PhotoSnowliftViewableSphericalPhoto6=r;t.$PhotoSnowliftViewableSphericalPhoto7=o;t.$PhotoSnowliftViewableSphericalPhoto8=!1;t.$PhotoSnowliftViewableSphericalPhoto9=l;t.$PhotoSnowliftViewableSphericalPhoto10=!1;t.$PhotoSnowliftViewableSphericalPhoto11=!1;t.$PhotoSnowliftViewableSphericalPhoto14=n;t.$PhotoSnowliftViewableSphericalPhoto15=p;t.$PhotoSnowliftViewableSphericalPhoto16=q;t.$PhotoSnowliftViewableSphericalPhoto17=e;t.$PhotoSnowliftViewableSphericalPhoto18=new(c("SubscriptionsHandler"))();t.$PhotoSnowliftViewableSphericalPhoto20=g;t.$PhotoSnowliftViewableSphericalPhoto21=b;t.$PhotoSnowliftViewableSphericalPhoto5=c("DOM").create("div",{className:"_zq_ _5nxw"});t.$PhotoSnowliftViewableSphericalPhoto4=c("DOM").create("div",{className:"_zr0 _5nxw"});t.getElement().appendChild(t.$PhotoSnowliftViewableSphericalPhoto5);t.getElement().appendChild(t.$PhotoSnowliftViewableSphericalPhoto4);d("CSS").addClass(t.getElement(),"_zr1");t.$PhotoSnowliftViewableSphericalPhoto12={fov:h,pitch:i,yaw:k};t.$PhotoSnowliftViewableSphericalPhoto19=new(c("SubscriptionsHandler"))();d("CSS").addClass(t.$PhotoSnowliftViewableSphericalPhoto15.stage,"_1ziy");t.$PhotoSnowliftViewableSphericalPhoto23();return t}var e=b.prototype;e.$PhotoSnowliftViewableSphericalPhoto24=function(a){this.$PhotoSnowliftViewableSphericalPhoto20.useTiledRenderer&&c("SphericalPhotoTypedConfig").show_new_renderer?d("ReactDOM").render(i.jsx(c("SphericalPhotoPlaceHolderWithGyroOverlay.react"),{placeholderImageURL:this.$PhotoSnowliftViewableSphericalPhoto25(),showNewRenderer:!0,width:a.x,height:a.y}),this.$PhotoSnowliftViewableSphericalPhoto4,"PhotoSnowliftViewableSphericalPhoto.js"):d("ReactDOM").render(i.jsx(c("SphericalPhotoPlaceHolderWithGyroOverlay.react"),{placeholderImageURL:this.$PhotoSnowliftViewableSphericalPhoto25()}),this.$PhotoSnowliftViewableSphericalPhoto4,"PhotoSnowliftViewableSphericalPhoto.js")};e.$PhotoSnowliftViewableSphericalPhoto23=function(){var a=this.$PhotoSnowliftViewableSphericalPhoto26(),b=[this.$PhotoSnowliftViewableSphericalPhoto27,this.$PhotoSnowliftViewableSphericalPhoto28,this.$PhotoSnowliftViewableSphericalPhoto29,this.$PhotoSnowliftViewableSphericalPhoto30,this.$PhotoSnowliftViewableSphericalPhoto31];c("SphericalPhotoTypedConfig").www_can_viewer_tag&&b.push(this.$PhotoSnowliftViewableSphericalPhoto32);this.$PhotoSnowliftViewableSphericalPhoto24(a);d("ReactDOM").render(i.jsx(c("SphericalMediaBootloaded.react"),{ambientAudio:this.$PhotoSnowliftViewableSphericalPhoto1,componentName:c("SphericalMediaConstants").COMP_PHOTO_VIEWER,canvasNamespace:"Snowlift",cubeImageURI:this.$PhotoSnowliftViewableSphericalPhoto2,fallback:this.$PhotoSnowliftViewableSphericalPhoto6,enableGyro:!0,enableZoom:!0,enableTagging:!0,enableRubberBanding:!0,height:a.y,initialView:this.$PhotoSnowliftViewableSphericalPhoto12,photoID:this.$PhotoSnowliftViewableSphericalPhoto7,partialLimits:this.$PhotoSnowliftViewableSphericalPhoto14,photoSphereMetadata:this.$PhotoSnowliftViewableSphericalPhoto16,surface:c("SphericalMediaConstants").LOGGER_SURFACES.snowlift,tiledSphericalConfig:this.$PhotoSnowliftViewableSphericalPhoto20,middlewares:b,useLargeVolumeIcon:!0,width:a.x}),this.$PhotoSnowliftViewableSphericalPhoto5,"PhotoSnowliftViewableSphericalPhoto.js");this.$PhotoSnowliftViewableSphericalPhoto10=!0;this.emit("ready")};e.$PhotoSnowliftViewableSphericalPhoto33=function(){this.$PhotoSnowliftViewableSphericalPhoto19.release(),this.$PhotoSnowliftViewableSphericalPhoto18.release(),d("ReactDOM").unmountComponentAtNode(this.$PhotoSnowliftViewableSphericalPhoto4,f.id),d("ReactDOM").unmountComponentAtNode(this.$PhotoSnowliftViewableSphericalPhoto5,f.id)};e.suspend=function(){this.$PhotoSnowliftViewableSphericalPhoto33()};e.resume=function(){this.$PhotoSnowliftViewableSphericalPhoto23()};e.reload=function(){this.$PhotoSnowliftViewableSphericalPhoto23()};e.hide=function(){a.prototype.hide.call(this),this.$PhotoSnowliftViewableSphericalPhoto33()};e.getDimensions=function(){var a=c("getViewportDimensions")(),b=a.width;a=a.height;c("SphericalPhotoTypedConfig").should_snowlift_fit_to_screen?(this.$PhotoSnowliftViewableSphericalPhoto8||(b-=k),this.isRenderReady()||(b=a=Math.min(b,a))):b=a=Math.min(b,a);return c("Vector").from(b,a)};e.$PhotoSnowliftViewableSphericalPhoto26=function(){var a=c("Vector").getElementDimensions(this.getElement());return a.x===0||a.y===0?this.$PhotoSnowliftViewableSphericalPhoto3||a:a};e.$PhotoSnowliftViewableSphericalPhoto34=function(a){var b=this.getElement().parentElement;a=new(c("Vector"))(a.x,a.y);if(b&&b instanceof HTMLElement){b=c("Vector").getElementDimensions(b);var d=c("Vector").getElementDimensions(this.getElement());(b.x!==d.x||a.x<b.x||a.y<b.y)&&(a.x=b.x,a.y=b.y)}return a};e.isReady=function(){return this.$PhotoSnowliftViewableSphericalPhoto10};e.isRenderReady=function(){return this.$PhotoSnowliftViewableSphericalPhoto11};e.setDimensions=function(b){a.prototype.setDimensions.call(this,this.$PhotoSnowliftViewableSphericalPhoto34(b));if(this.$PhotoSnowliftViewableSphericalPhoto20.useTiledRenderer&&c("SphericalPhotoTypedConfig").show_new_renderer){b=this.$PhotoSnowliftViewableSphericalPhoto26();!this.$PhotoSnowliftViewableSphericalPhoto11&&(!this.$PhotoSnowliftViewableSphericalPhoto3||this.$PhotoSnowliftViewableSphericalPhoto3.x!==b.x||this.$PhotoSnowliftViewableSphericalPhoto3.y!==b.y)&&this.$PhotoSnowliftViewableSphericalPhoto24(b);this.$PhotoSnowliftViewableSphericalPhoto3=b}this.emit("onSetDimensions")};e.onToggleIntoFullScreen=function(){};e.onEnterFullScreen=function(){if(this.$PhotoSnowliftViewableSphericalPhoto8)return;this.$PhotoSnowliftViewableSphericalPhoto8=!0;this.emit("onEnterFullScreen");d("CSS").addClass(this.getElement(),"_tz-")};e.onExitFullScreen=function(){if(!this.$PhotoSnowliftViewableSphericalPhoto8)return;this.$PhotoSnowliftViewableSphericalPhoto8=!1;this.emit("onExitFullScreen");d("CSS").removeClass(this.getElement(),"_tz-")};e.$PhotoSnowliftViewableSphericalPhoto25=function(){return this.$PhotoSnowliftViewableSphericalPhoto9?this.$PhotoSnowliftViewableSphericalPhoto21:this.$PhotoSnowliftViewableSphericalPhoto17||this.$PhotoSnowliftViewableSphericalPhoto21};return b}(c("PhotoSnowliftViewable"));g["default"]=a}),98);
__d("PhotoSnowliftViewableUtils",["cx","DOM","PhotoSnowliftViewableImageWrapper","PhotoSnowliftViewablePhoto","PhotoSnowliftViewableSphericalPhoto","ReactDOM","SphericalMediaGyroOverlay.react","react"],(function(a,b,c,d,e,f,g,h){var i=d("react"),j=65,k=0,l=0;function a(a,b){return new(c("PhotoSnowliftViewableSphericalPhoto"))(a.url,a.smallurl,a.cubeImageURI,a.tiledSphericalConfig,a.initialView.fov||j,a.initialView.pitch||k,a.initialView.yaw||l,b.shouldShowHiRes(a),a.dimensions,a.partialLimits,String(a.fbid),b,a.photoSphereMetadata,a.fallback,a.ambientAudio)}function b(a,b){if(a.spherical)return new(c("PhotoSnowliftViewableSphericalPhoto"))(a.url,a.smallurl,a.spherical.cubestripuri,a.spherical.tiledsphericalconfig,a.spherical.initialviewverticalfov||j,a.spherical.initialpitch||k,a.spherical.initialheading||l,b.shouldShowHiRes(a),a.dimensions,a.spherical.partialLimits,String(a.info.fbid),b,a.spherical.photosphereMetadata,a.spherical.fallback,a.spherical.ambientAudio);else return new(c("PhotoSnowliftViewablePhoto"))(a.url,a.smallurl,b.shouldShowHiRes(a),a.dimensions,String(a.info.fbid),!!a.info.disablecontextmenu,!!a.info.logcontextmenu,a.info.caption,a.info.shouldshowshield)}function m(){var a=c("DOM").create("div",{className:"_4yca _5nxw"});d("ReactDOM").render(i.jsx(c("SphericalMediaGyroOverlay.react"),{isActive:!0}),a,"PhotoSnowliftViewableUtils.js");return a}function e(a,b){var d=a.parentElement;a=new(c("PhotoSnowliftViewableImageWrapper"))(a);d&&d.appendChild(a.getElement());b&&a.getElement().appendChild(m());return a}g.fromSphericalPhotoData=a;g.fromStreamData=b;g.fromImageElement=e}),98);
__d("PhotoViewer",["Bootloader","CSS","DOM"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(){this.image=null,this.root=null,this.stream=null}var c=a.prototype;c.getEventString=function(a){var b=this.getEventPrefix();return b?b+"."+a:null};c.getImage=function(){return this.image};c.getPosition=function(){return this.stream?this.stream.getCursor():null};c.getRoot=function(){return this.root};c.hiliteAllBoxes=function(){b("DOM").scry(this.stageWrapper,"div.tagsWrapper div.faceBox").forEach(function(a){b("CSS").addClass(a,"otherActive")}),b("DOM").scry(this.stageWrapper,"div.tagsWrapper div.fbPhotosPhotoTagboxBaseComments").forEach(function(a){b("CSS").addClass(a,"otherActive")})};c.getEventPrefix=function(){return null};c.getSourceString=function(){return null};c.getVersionConst=function(){return null};c.getViewerSource=function(){return null};c.getViewerSet=function(){return null};a.bootstrap=function(a,c){b("Bootloader").loadModules(["PhotoSnowlift"],function(b){b.bootstrap(a,c)},"PhotoViewer")};return a}();e.exports=a}),null);
__d("SnowliftVideoPivotsCarouselController",[],(function(a,b,c,d,e,f){a={setPivotsCarousel:function(a,b){this._pivotsCarousel=a,this.adjustCarousel(b)},adjustCarousel:function(a){this._pivotsCarousel&&this._pivotsCarousel.pageTo(a)},adjustCarouselOnAutoPlay:function(){this._pivotsCarousel&&this._pivotsCarousel.page()}};e.exports=a}),null);
__d("PhotoSnowlift",["csx","cx","fbt","invariant","$","Arbiter","AsyncRequest","Bootloader","CSS","DOM","DOMControl","DOMQuery","DataAttributeUtils","DataStore","Dialog","DisableContextMenuMixin","EncryptedImg","ErrorUtils","Event","FBLogger","FullScreen","FunnelLogger","ImageUtils","Input","Keys","Layer","LikeConfirmer","LinkController","LitestandShareAttachment","LitestandStoryInsertionStatus","Locale","MutationObserver","ObjectionableContentFilterMixin","PHPQuerySerializer","PageTransitions","Parent","PhotoPermalinkURI","PhotoSessionLog","PhotoSnowliftActionsGating","PhotoSnowliftBackLink.react","PhotoSnowliftLoader","PhotoSnowliftLoggingConfig","PhotoSnowliftUFIFeedbackTargets","PhotoSnowliftViewableUtils","PhotoStreamCache","PhotoViewer","PhotosConst","PhotosUtils","PhotosetPivotSlide.react","PhotosetSearchPivot.react","PhotosetSearchPivotData","ReactComponentRenderer_DEPRECATED","ReactDOM","Rect","ScriptPath","ScrollableArea","SnowliftDestroyVideoPlayerExperiment","SnowliftUFIContextualParentExperiment","SnowliftVideoPivotsCarouselController","Style","SubscriptionsHandler","TimeSlice","Toggler","Tooltip","TrackingNodeTypes","TrackingNodes","UIPagelet","URI","UserAgent_DEPRECATED","Vector","VideoData","VideoPermalinkURI","VideoPlayerAbortLoadingExperiment","Visibility","classWithMixins","computeRelativeURI","emptyFunction","ge","getActiveElement","gkx","goURI","isNode","killswitch","mixin","react","setImmediate","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k,l,m,n,o=k||b("react"),p="WWW_SNOWLIFT_ACTIONS_FUNNEL",q=74,r=75,s=70,t=76,u=315,v=200,w=2e3,x=new RegExp("\\/posts\\/(\\d+)\\/?$");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var d;d=a.call(this)||this;d.bootstrap=function(a,c){d.preload(a,c);d._href=a;d._elem=c;if(d.closeDirty){window.setTimeout(d.bootstrap.bind(babelHelpers.assertThisInitialized(d),a,c),0);return}d.resetUriStack=!0;if(d.isOpen)if(d.openExplicitly)d.closeCleanup(),d.resetUriStack=!1;else return;d._dataFt=null;var e=null;c&&(e=b("Parent").bySelector(c,"._4oep"));if(e===null){var f=b("Parent").byAttribute(c,"data-cursor");if(f)try{var g=JSON.parse(b("DataAttributeUtils").getDataFt(f));d._dataFt=g}catch(a){}else try{f=b("Parent").byAttribute(c,"data-ad");f=b("DataAttributeUtils").getParentByAttributeOrDataStoreKey(c,"data-ad","data-ad");g=JSON.parse(b("DataAttributeUtils").getDataAttribute(f,"data-ad"));d._dataFt={ad_id:g.adid}}catch(a){}}d.returningToStart=!1;d.loading&&b("CSS").removeClass(d.loading,"loading");if(c){b("CSS").addClass(d.loading=c,"loading");b("SnowliftUFIContextualParentExperiment").useUfiContextualParent?f=e||b("Parent").byClass(c,"uiStreamStory")||b("Parent").bySelector(c,"._5jmm"):f=b("Parent").byClass(c,"uiStreamStory")||e||b("Parent").bySelector(c,"._5jmm");if(f)d.storyID=f.id;else{g=b("Parent").bySelector(c,"._5b9c");g&&(d.storyID=g.getAttribute("data-ownerid"))}d._updateContainerOwnerID();d.getThumbAndSize(c)}else d.loading=null;b("Arbiter").inform("PhotoSnowlift.GO",a,"state");d.loadFrameIfUninitialized()};d.handleNavigateAway=function(a){var c=b("computeRelativeURI")(b("PageTransitions").getMostRecentURI().getQualifiedURI(),a.getAttribute("href"));if(d.backButton&&b("ReactDOM").findDOMNode(d.backButton)===a){d._navHistory.pop();d.resetUriStack=!1;d.open(c.toString());d._navHistory.pop();d.currentAuthorName=null;return!1}if(b("Parent").bySelector(a,"._56lp a")){d.resetUriStack=!1;d.open(c.toString());return!1}if(d.isOpen&&c instanceof(l||(l=b("URI")))&&c.getUnqualifiedURI().toString()!=d.startingURI.toString()&&c.getPath()!="/photo.php"){d.closingAction||(d.closingAction=b("PhotoSessionLog").NAVIGATE);d.returnToStartingURI(!1,c);d.close();return!1}c instanceof(l||(l=b("URI")))&&c.getPath()=="/photo.php"&&(l||(l=b("URI"))).getMostRecentURI().getPath()!=="/photo.php"&&d.close();return!0};d.closeCleanup=function(){b("ScriptPath").closeOverlayView("snowlift");d.closeDirty=!1;b("CSS").removeClass(d.root,"dataLoading");b("PhotoSessionLog").logPhotoViews(d.closingAction);d.destroy();b("CSS").hide(d.errorBox);d._viewable.hide();d.thumbSpherical=!1;d.thumbSrc=null;d.shouldStretch=!1;d.resetUriStack=!0;var a=d.stream.getCursor();if(b("VideoPlayerAbortLoadingExperiment").canAbort){var c;for(c=0;c<d.stream.getLength();c++){var e=d.stream.getImageData(d.stream.getCursorAt(c));e&&e.video&&e.controller&&e.controller.abortLoading()}}b("CSS").removeClass(d.stageWrapper,"showVideo");d._emptyVideoStage();d.PhotoSnowliftVideoNode&&d.PhotoSnowliftVideoNode.destroyVideoNode();d.uncollapseRHC();d.currentImageSize=null;d.currentMinSize=null;d.setStagePagersState("reset");d.recacheData();d.stream.destroy();d.root.setAttribute("aria-busy","true");d._navHistory=[];e=d.closingAction===b("PhotoSessionLog").NAVIGATE;d.closingAction=null;d.openHandlerRegistered||(b("PageTransitions").registerHandler(d.openHandler.bind(babelHelpers.assertThisInitialized(d))),d.openHandlerRegistered=!0);b("Arbiter").inform("layer_hidden",{type:"PhotoSnowlift"});b("Arbiter").inform("PhotoSnowlift.CLOSE",{is_navigating:e,fbid:a})};d.adjustScroller=function(){window.clearTimeout(d.scrollerTimeout);d.initializeScroller();d.scrollableArea.resize();var a=b("Vector").getElementDimensions(d.rhc);a=a.y;a-=b("Vector").getElementDimensions(d.rhcHeader).y;a-=b("Vector").getElementDimensions(d.ufiInputContainer).y;d.seeMore&&(a-=b("Vector").getElementDimensions(d.seeMore).y);if(d.placeInfo){var e=b("Vector").getElementDimensions(d.placeInfo);a-=e.y}a=Math.max(0,a);e=b("Vector").getElementDimensions(d.scrollerBody).y;var f=Math.max(c.MIN_UFI_HEIGHT,a);e>=f?a>f?a-=f:a=0:a-=e;d.scrollableArea.adjustGripper()};d.shouldShowHiRes=function(a){if(!a||!a.smallurl)return!1;var b=d.getStageSize(a.dimensions);b=d._adjustStageSizeForPixelRatio(b);a=d.getImageSizeInStage(a.dimensions,b);return a.x>c.STAGE_NORMAL_MAX.x||a.y>c.STAGE_NORMAL_MAX.y};d.buttonListener=function(a){var c=a.getTarget(),e=Date.now();if(b("Parent").byClass(c,"fbPhotoTagApprovalBox")){b("FunnelLogger").appendAction(p,"approve_photo_tag");return}if(e-d.lastPage<350)return;if(b("Parent").byClass(c,"fbPhotosPhotoLike"))d.likePhoto();else if(b("Parent").byClass(c,"tagApproveIgnore"))d.updateTagBox(a,c),b("FunnelLogger").appendAction(p,"ignore_photo_tag");else if(b("Parent").bySelector(c,"._5ymu")){if(!d._showingMorePhotos){e=d.stream.getCursor();e&&d.showMorePhotos(String(e))}else d.hideMorePhotos();return}d.hideMorePhotos()};d.likePhoto=function(){b("FunnelLogger").appendActionWithTag(p,"like_photo","snowlift-feedback");b("PhotoSessionLog").addButtonLike();var a=b("DOM").scry(d.ufiForm,"._6a-y")[0];if(a){a.click();return}var c=b("$")("fbPhotoSnowliftFeedback");a=b("DOM").scry(c,"button.like_link")[0];a||(a=b("DOM").scry(c,"a.UFILikeLink")[0]);c=a.getAttribute("href");b("FullScreen").isFullScreen()&&(b("UserAgent_DEPRECATED").chrome()&&a.setAttribute("href","javascript:;"));a.click();a.setAttribute("href",c)};d.hilitePager=function(a){var e=b("Vector").getEventPosition(a),f=b("Vector").getElementPosition(d.stage),g=b("Vector").getElementDimensions(d.stage);b("Locale").isRTL()?d.stagePagerPrev=g.x-(e.x-f.x)<c.GOPREV_AREA:d.stagePagerPrev=e.x-f.x<c.GOPREV_AREA;b("CSS").hasClass(d.prevPager,"hilightPager")!==d.stagePagerPrev&&b("CSS").conditionClass(d.prevPager,"hilightPager",d.stagePagerPrev);b("CSS").hasClass(d.nextPager,"hilightPager")===d.stagePagerPrev&&b("CSS").conditionClass(d.nextPager,"hilightPager",!d.stagePagerPrev);var h;g=a.getTarget();!b("Parent").byClass(g,"snowliftOverlay")&&!b("Parent").byClass(g,"bottomBarActions")&&!b("Parent").byClass(g,"snowliftPager")&&(h=c.PAGER_FADE);d.showPagers(h)};d.unhiliteAllTags=function(){window.clearTimeout(d.unhiliteTimer);b("DOM").scry(d.stage,"div.tagsWrapper div.hover").forEach(function(a){b("CSS").removeClass(a,"hover")});b("DOM").scry(d.stage,"div.tagsWrapper div.otherActive").forEach(function(a){b("CSS").removeClass(a,"otherActive")});d.hilitedTag=null;d.showingTypeaheadSuggestions=!1;if(!b("CSS").hasClass(d.root,"taggingMode")){var a=d.getTagger();a&&!a.isSpherical&&(a.hideTagger(),a.setCurrentFacebox(null))}};d.switchHilitedTags=function(a,c){d.switchTimer!==null&&(window.clearTimeout(d.switchTimer),d.switchTimer=null);d.unhiliteAllTags();d.hiliteAllBoxes();var e=b("ge")(a);if(e){d.hilitedTag=a;if(!b("CSS").hasClass(d.root,"taggingMode")&&b("PhotosUtils").isFacebox(d.hilitedTag)){var f=d.getTagger();if(f){b("CSS").addClass(e,"hover");a=f.getFacebox(a);f.setCurrentFacebox(a);a&&f.addTagFromFacebox(a)}}else b("CSS").addClass(e,"hover");b("CSS").hasClass(e,"tagBoxPending")&&!b("CSS").hasClass(e,"showPendingTagName")&&c===!0&&(b("DOM").scry(d.stage,"div.tagsWrapper div.showPendingTagName").forEach(function(a){b("CSS").removeClass(a,"showPendingTagName")}),b("CSS").addClass(e,"showPendingTagName"))}};d.hiliteTagsOnMouseMove=function(a){if(!d.stream.getCurrentExtraData()||d.getVideoOnStage())return;if(d.switchTimer!==null)return;if(d.obscuredByOverlay)return;var c=a.getTarget();if(b("Parent").byClass(c,"snowliftOverlay")||b("Parent").byClass(c,"fbPhotoSnowliftTagApproval")||b("Parent").byClass(c,"tagPointer")||b("Parent").byClass(c,"arrow")||b("Parent").byClass(c,"faceboxSuggestion")||b("Parent").byClass(c,"typeaheadWrapper")||b("Parent").byClass(c,"photoTagTypeahead")||b("Parent").byClass(c,"ufiContainer"))return;c=b("Parent").byClass(c,"tagBoxPending");var e=!1;if(d.hilitedTag){var f=b("ge")(d.hilitedTag);e=f&&b("CSS").hasClass(f,"tagBoxPending")}f=!d.hilitedTag&&c||!e&&c;if(f){d.switchHilitedTags(c.id);return}if(c&&c.id==d.hilitedTag)return;f=250;c=15;a=b("Vector").getEventPosition(a);d.startingMousePos||(d.startingMousePos=a);var g=b("PhotosUtils").absoluteToNormalizedPosition(d._viewable.getElement(),a);if(!d.haveLeftBufferRegion&&d.startingMousePos.distanceTo(a)<c)return;else d.haveLeftBufferRegion=!0;if(d.currentTagHasPrecedence(g))return;a=b("PhotosUtils").getNearestBox(d.stream.getCurrentExtraData().tagRects,g);if(!a){e||(d.unhiliteAllTags(),d.reHilitePendingTag());return}c=null;if(e){var h={};h[d.hilitedTag]=d.stream.getCurrentExtraData().tagRects[d.hilitedTag];c=b("PhotosUtils").getNearestBox(h,g)}if(c!==null&&e)return;d.hilitedTag!=a&&(e?d.switchTimer=window.setTimeout(d.switchHilitedTags.bind(babelHelpers.assertThisInitialized(d),a),f):(d._showHover&&!d._seenTags[a]&&(d._seenTags[a]=!0),d.switchHilitedTags(a)))};d.pageListener=function(a){var c=b("Event").getKeyCode(a),e=a.getTarget();if(!d.shouldPageOnAction(c,e))return;if(d.shouldHandlePendingTag(a))return;a=0;var f=null;if(c==b("Keys").RIGHT||c==r)a=1,b("FunnelLogger").appendActionWithTag(p,"image_prev","key-right"),b("PhotoSessionLog").setPagingAction("key_right"),d._disableMouseOver=!0;else if(c==b("Keys").LEFT||c==q)a=-1,b("FunnelLogger").appendActionWithTag(p,"image_next","key-left"),b("PhotoSessionLog").setPagingAction("key_left"),d._disableMouseOver=!0;else if(b("Parent").byClass(e,"next"))a=1,b("FunnelLogger").appendActionWithTag(p,"image_next","button-next"),b("PhotoSessionLog").setPagingAction("click_next");else if(b("Parent").byClass(e,"prev"))a=-1,b("FunnelLogger").appendActionWithTag(p,"image_prev","button-prev"),b("PhotoSessionLog").setPagingAction("click_prev");else if(f=b("Parent").byClass(e,"seek")){c=b("DataStore").get(f,"seek-fbid");a=d.stream.getRelativeMovement(c);b("PhotoSessionLog").setPagingAction("seek")}else!d.stagePagerPrev?(a=1,b("FunnelLogger").appendAction(p,"image_next","click-stage"),b("PhotoSessionLog").setPagingAction("click_stage")):(a=-1,b("FunnelLogger").appendAction(p,"image_prev","click-stage"),b("PhotoSessionLog").setPagingAction("click_stage_back"));e=b("DOM").scry(d.ufiForm,"input.mentionsHidden");f=!1;for(c=0;c<e.length;c++)if(!b("Input").isEmpty(e[c])){f=!0;break}f||b("CSS").hasClass(d.root,"fbPhotoSnowliftEditMode")?d.warnLeavePage(d.page.bind(babelHelpers.assertThisInitialized(d),a)):d.page(a,b("UserAgent_DEPRECATED").chrome()&&b("FullScreen").isFullScreen())};d.page=function(a,e,f){if(!d.stream.isValidMovement(a)||!d.stream.nonCircularPhotoSetCanPage(a)){d.showPagers(c.PAGER_FADE);return}var g=d.stream.getCursorAt(d.stream.calculatePositionForMovement(a));if(d.snowflake&&(d.stream.getCursor()==d.firstInSet&&a<0||d.firstInSet==g&&a>0)){d.showPagers(c.PAGER_FADE);return}d.lastPage=Date.now();d.unhiliteAllTags();d.startingMousePos=null;d.haveLeftBufferRegion=!1;d._seenTags={};d._navCount+=a;var h=d.stream.allLoaded?Math.abs(d._navCount)-d.stream.getLength():null;if(d._extraSlidePivot&&d._albumFBID){!d._albumBoundaries.end&&h===0?(d._albumBoundaries.end=d.stream.getCursor(),d._albumBoundaries.dir=a):h===-1&&b("PhotosetSearchPivotData").fetch(d._albumFBID,d.stream);if(!d.onExtraSlide)if(d.stream.getCursor()===d._albumBoundaries.end&&g===d._albumBoundaries.start&&a===d._albumBoundaries.dir){d.showPivotSlide(d._albumFBID,e);return}else d.stream.getCursor()===d._albumBoundaries.start&&g===d._albumBoundaries.end&&a===-d._albumBoundaries.dir&&d.showPivotSlide(d._albumFBID,e);else{d.hidePivotSlide();if(a===-d._albumBoundaries.dir)return}}g=d.getVideoOnStage();g&&d.switchVideo(g,!1);if(d.pivots&&d.pivots.page(a))return;b("Arbiter").inform("PhotoSnowlift.PAGE");b("Toggler").hide();d.recacheData();d.stream.moveCursor(a);d._viewable.hide();a!==0&&(d.storyID=null,d._updateContainerOwnerID());if(d.stream.errorInCurrent()){d.setLoadingState(c.STATE_HTML,!0);b("CSS").show(d.errorBox);return}d.movementDelta+=a;g=d.stream.getCurrentImageData();if(g){a=d.getImageURL(g);a?d._switchViewable(a,null,!0):g.video&&d.switchVideo(g.video,!0,f);d._updateObjectionableWarning(g);g.info.disablecontextmenu?d.disableContextMenu():d.enableContextMenu();e||(d.replaceUrl=!0,b("goURI")(g.info.permalink));d.setLoadingState(c.STATE_IMAGE_DATA,!1)}else d.setLoadingState(c.STATE_IMAGE_PIXELS,!0),d.setLoadingState(c.STATE_IMAGE_DATA,!0);d.stream.getCurrentHtml()?d.swapData():d.setLoadingState(c.STATE_HTML,!0);d.setLeftAndRightPagersState();!d._extraSlidePivot&&d._showMorePhotos&&d._albumFBID&&(h===-1?b("PhotosetSearchPivotData").fetch(d._albumFBID,d.stream):h===0?(d.showMorePhotos(d._albumFBID,!0),d.showPagers(),d._navCount=0):(d.hideMorePhotos(),d.hidePagers()));d._initLitestandShareAttachments()};d.transitionHandler=function(a){if(a.getQueryData().closeTheater||a.getQueryData().permPage||d.returningToStart){d.isOpen&&d.close();d.transitionHandlerRegistered=!1;return!1}if(d.replaceUrl){d.replaceUrl=!1;d._uriStack.push(a.getQualifiedURI().toString());b("PageTransitions").transitionComplete(!0);return!0}var c=d._uriStack.length;c>=2&&d._uriStack[c-2]==a.getQualifiedURI().toString()&&d._uriStack.pop();c=d.stream.getCursorForURI(a.getUnqualifiedURI().toString());if(c){a=d.stream.getRelativeMovement(c);d.page(a,!0);b("PageTransitions").transitionComplete(!1);return!0}if(d.isOpen){b("PageTransitions").transitionComplete(!0);d.close();return!0}d.transitionHandlerRegistered=!1;return!1};d.reloadIfTimeout=function(){if(!b("ImageUtils").hasLoaded(d.image)){var a=d.makeNewImage(d.image.src,!0);b("Event").listen(a,"load",d.useImage.bind(babelHelpers.assertThisInitialized(d),a,null,!0));d._log(a.src)}};d.useImage=function(a,c,e,f){f===void 0&&(f=!1);if(e&&b("ImageUtils").hasLoaded(d.image))return;e=function(){b("DOM").replace(d.image,a),d.image=a,d.adjustStageSize(c)};!f||b("ImageUtils").hasLoaded(a)?e():b("Event").listen(a,"load",e)};d.handleAutoplay=function(a){a=a.info.fbid.toString();a===d.stream.getCursor()&&a!==d.stream.fbidList[d.stream.fbidList.length-1]&&(b("SnowliftVideoPivotsCarouselController").adjustCarouselOnAutoPlay(),d.page(1,!1,"autoplay_initiated"));d.removeAutoplayOptionScreen();d.haltAutoplay=!1};d.checkVideoStatus=function(a){d.videoLoadTimer&&window.clearTimeout(d.videoLoadTimer);var b=d.getVideoOnStage();if(!b)return;else{if(b!==a)return;d.adjustStageSizeForVideo(a)}};d.adjustStageSizeForVideo=function(a){var b=d.getVideoElement(a);!b?d.videoLoadTimer=window.setTimeout(d.checkVideoStatus.bind(babelHelpers.assertThisInitialized(d),a),200):d.adjustStageSize(d.getVideoSize(b))};d.onHiliteTag=function(a,c){if(c.version!=b("PhotosConst").VIEWER_SNOWLIFT)return;a=c.tag;a&&d.switchHilitedTags(a,!0)};var e=new Error();b("FBLogger")("Photos","photo_snowlift_render").catching(e).warn("[photos] PhotoSnowlift is still being used");d.switchTimer=null;d.imageRefreshTimer=null;d.imageLoadingTimer=null;d.lastPage=0;d.currentMinSize=null;d._vpcsToDestroyOnDestroy=new Set();d.didReceivePayloadHavingInitProperty=!1;d.payloadsReceivedBeforePayloadHavingInitProperty=[];d.currentImageSize=null;d.resetUriStack=!0;d.thumbSpherical=!1;d.thumbSrc=null;d.shouldStretch=!1;d.sphericalPhotoData=null;d.stageMax=c.STAGE_NORMAL_MAX;d.stageChrome=c.STAGE_CHROME;d.stagePagerPrev=null;d.ua=null;d.PhotoTagger=null;d.obscuredByOverlay=!1;d._inputBarAdjusted=!1;d._seenTags={};d._navCount=0;d._navHistory=[];d._preloadTimeout=0;d.actorID=null;d.clearAlbumBoundaries();return d}var d=c.prototype;d.preload=function(a,c){var d=this;b("Bootloader").loadModules(["PhotoTagger","PhotoTagApproval","PhotoTags","TagTokenizer"],function(a){d.PhotoTagger=a},"PhotoSnowlift")};d._updateContainerOwnerID=function(){this.container&&(this.storyID?this.container.setAttribute("data-ownerid",this.storyID):this.container.removeAttribute("data-ownerid"))};d.getEventPrefix=function(){return"PhotoSnowlift"};d.getRoot=function(){return this.root};d.getSourceString=function(){return"snowlift"};d.getViewerSource=function(){return this.source};d.getViewerSet=function(){return this.stream.getPhotoSet()};d.getVersionConst=function(){return b("PhotosConst").VIEWER_SNOWLIFT};d.getImage=function(){return this._viewable.getElement()};d.getImageId=function(){return this.stream.getCursor()};d.getRHCHeader=function(){return this.rhcHeader};d.getRHCBody=function(){return this.ufiForm};d.getLoadQuery=function(){return this.loadQuery};d.getCurrentPhotoInfo=function(){var a=this.stream.getCurrentImageData();return a?a.info:null};d.getOwnerId=function(){var a=this.stream.getCurrentImageData();return a?a.info.owner:null};d.getThumbAndSize=function(a){this.currentImageSize=null;this.thumbSpherical=!1;this.thumbSrc=null;var d=new(l||(l=b("URI")))(a.getAttribute("ajaxify")).getQueryData();if(!d.size)return;d=b("Vector").deserialize(d.size);if(!d.x||!d.y)return;this.currentImageSize=d;if(a.getAttribute("data-cropped"))return;d=b("DOM").scry(a,"img")[0];var e=b("DOM").scry(a,"i")[0];a=b("Parent").byAttribute(a,"data-size");this.shouldStretch=a&&this.currentImageSize&&d&&a.getAttribute("data-size")==="2"&&this.currentImageSize.x>this.currentImageSize.y&&this.currentImageSize.x<=c.TIMELINE_STRETCH_WIDTH&&d.offsetWidth===c.TIMELINE_STRETCH_WIDTH;if(d)a=d.src,this.thumbSpherical=Boolean(d.getAttribute("data-is-spherical-photo")),this.sphericalPhotoData=b("DataStore").get(d,"sphericalPhotoData");else if(e)a=b("Style").get(e,"backgroundImage").replace(/.*url\(\"?([^\"]*)\"?\).*/,"$1");else return;this.thumbSrc=a};d.loadFrameIfUninitialized=function(){if(this.root)return;var a=String((l||(l=b("URI"))).getMostRecentURI().getQueryData().viewas);b("PhotoSnowliftLoader").loadFrame(a)};d.init=function(a,c){var d=this;this.init=b("emptyFunction");this._logger=null;this._showHover=c.pivot_hover;this._showMorePhotos=c.show_more_photos;this._extraSlidePivot=c.extra_slide_pivot;this._uiRefresh=c.snowlift_ui_refresh;b("PhotoSessionLog").setEndMetrics(c.pivot_end_metric);this.startingMousePos=null;this.haveLeftBufferRegion=!1;this.showingTypeaheadSuggestions=!1;this.isFullScreenSupported=b("FullScreen").isSupportedWithKeyboardInput();this.spotlight=a;this.spotlight.subscribe("blur",function(){d.closingAction=b("PhotoSessionLog").OUTSIDE});this.spotlight.subscribe("hide",this.closeHandler.bind(this));this.spotlight.subscribe("key",this.keyHandler.bind(this));this._actionMenuOpen=!1;this._mouseOnPhotoStage=!1;this.initializeNodes(this.spotlight.getRoot());this.disableContextMenu();this.subscription||(b("LinkController").registerHandler(this.handleNavigateAway.bind(this)),this.subscription=b("Arbiter").subscribe("PhotoSnowlift.GO",function(a,c){d.openExplicitly=!0,d.loading&&b("CSS").removeClass(d.loading,"loading"),d.open(c)}));this.transitionHandlerRegistered=!1;this.returningToStart=!1;b("PageTransitions").registerHandler(this.openHandler.bind(this));this.openHandlerRegistered=!0;b("Arbiter").subscribe("PhotoTagApproval.HILITE_TAG",this.onHiliteTag.bind(this));b("Arbiter").subscribe("PhotoTagApproval.UPDATE_TAG_BOX",this.onUpdateTagBox.bind(this));b("Arbiter").subscribe("ObjectionableContentToggleButton.COVERED",this.handleObjectionableContentToggleButtonClicked.bind(this));this.buttonTruncateGk=c.snowlift_button_truncate;this.allowIrrelevantRequests=!!c.snowlift_allow_irrelevant_requests;this.snowflake&&(b("CSS").addClass(this.root,"snowflake"),this.extraClasses.forEach(function(a){b("CSS").addClass(this.root,a)},this))};d.initializeNodes=function(a){var c;this.root=a;this.container=(c=b("DOM")).find(a,"div.fbPhotoSnowliftContainer");this._updateContainerOwnerID();this.snowliftPopup=c.find(this.container,"div.fbPhotoSnowliftPopup");this.rhc=c.find(this.snowliftPopup,"div.rhc");this.details=c.find(this.rhc,"#fbPhotoSnowliftDetails");this.rhcBody=c.find(this.rhc,"div.rhcBody");this.rhcHeader=c.find(this.rhc,"div.rhcHeader");this.taglist=c.find(this.rhc,"span.fbPhotoTagList");this.ufiForm=c.find(this.rhc,"form.fbPhotosSnowliftFeedbackForm");this.ufiInputContainer=c.find(this.rhc,"div.fbPhotosSnowboxFeedbackInput");this.ufiMainContainer=this.ufiForm.appendChild(document.createElement("div"));this.ufiStageActionsContainer=c.scry(this.root,"._29qf")[0];this.ufiContainers={ufiMainContainer:this.ufiMainContainer,ufiComposerContainer:this.ufiInputContainer,ufiStageActionsContainer:this.ufiStageActionsContainer};this.scroller=c.find(this.rhc,"div.rhcScroller");this.scrollerBody=c.find(this.scroller,"div.uiScrollableAreaBody");this.stageWrapper=c.find(this.snowliftPopup,"div.stageWrapper");this.overlay=c.find(this.snowliftPopup,"div.snowliftOverlay");this.errorBox=c.find(this.stageWrapper,"div.stageError");this._viewable=b("PhotoSnowliftViewableUtils").fromImageElement(c.find(this.stageWrapper,"img.spotlight"));this.stage=c.find(this.stageWrapper,"div.stage");this.videoStage=c.find(this.stageWrapper,"div.videoStage");this.prevPager=c.find(this.snowliftPopup,"a.snowliftPager.prev");this.nextPager=c.find(this.snowliftPopup,"a.snowliftPager.next");this.stageActions=c.find(a,"div.stageActions");this._uiRefresh||(this.buttonActions=b("DOM").find(this.stageActions,"div.fbPhotosPhotoButtons"));this.placeInfo=b("DOM").find(this.rhc,"div.fbPhotosSnowliftPlaceInfo");this.seeMore=b("DOM").find(this.rhc,"._jke");b("CSS").conditionClass(this.root,"fullScreenAvailable",this.isFullScreenSupported)};d.getContextMenuContainer=function(){return this.stageWrapper};d.getObjectionableWarningContainer=function(){return this.stageWrapper};d.getObjectionableWarningHiddenContent=function(){return this.isVideo()?this.videoStage:this.stage};d.isVideo=function(){var a=this.stream.getCurrentImageData();return a&&a.info.video?!0:!1};d.initializeScroller=function(){var a=this,c,d;this.initializeScroller=b("emptyFunction");b("CSS").addClass(this.scroller,"_467y");this.scrollableArea=b("ScrollableArea").fromNative(this.scroller,{fade:!0,persistent:!0});var e=function(c){c=b("Event").$E(c).getTarget();if(b("DOM").contains(a.ufiInputContainer,c)){var d=b("DOMControl").getInstance(c);if(d){a.scrollableArea.scrollToBottom();var e=d.subscribe("resize",function(){var b=a.scrollableArea.isScrolledToBottom();a.adjustScroller();b&&a.scrollableArea.scrollToBottom()}),f=b("Event").listen(c,"blur",function(){d.unsubscribe(e),f.remove()})}}(c.classList.contains("UFIPagerLink")||c.classList.contains("UFICommentLink"))&&(a.autoplayOptionScreenConfig&&a.autoplayOptionScreenConfig.enabled&&(a.haltAutoplay=!0))};(c=b("Arbiter")).subscribe("ufi/inputHeightChanged",function(c,d){b("DOM").contains(a.ufiInputContainer,d.node)&&a.adjustScroller()});c.subscribe("ufi/photoPreviewHightChanged",function(c,d){(!d.node||b("DOM").contains(a.ufiInputContainer,d.node))&&a.adjustScroller()});(d=b("Visibility")).addListener(d.HIDDEN,function(){b("PhotoSessionLog").updateDuration()});d.addListener(d.VISIBLE,function(){b("PhotoSessionLog").updateLastVisibleTime()});c.subscribe("ufi/changed",function(b,c){a.ufiForm===c.form&&a.adjustScrollerIfNecessary()});c.subscribe("ufi/comment",function(b,c){a.ufiForm===c.form&&(a.adjustScrollerIfNecessary(),c.isinverted?a.scrollableArea.scrollToTop():a.scrollableArea.scrollToBottom())});b("Event").listen(this.rhc,"click",function(c){c=c.getTarget();(b("Parent").byTag(c,"a")||b("Parent").byTag(c,"button")||b("DOM").isNodeOfType(c,"input"))&&a.adjustScrollerIfNecessary()});c.subscribe(["reflow","CommentUFI.Pager"],function(){a.isOpen&&a.adjustScrollerIfNecessary()});c.subscribe("ufi/translationRendered",function(){a.adjustScrollerIfNecessary()});b("Event").listen(this.ufiForm,"focusin",e)};d.openHandler=function(a){if(this.isOpen||!b("PhotoPermalinkURI").isValid(a)||this.returningToStart||a.getQueryData().closeTheater||a.getQueryData().permPage){this.openHandlerRegistered=!1;return!1}this.open(a);this._uriStack.push(new(l||(l=b("URI")))(a).getQualifiedURI().toString());b("PageTransitions").transitionComplete(!0);return!0};d.addHaltAutoplaySubscription=function(){var a=this;b("Arbiter").subscribe(["ufi/focus"],function(){a.haltAutoplay=!0});b("Arbiter").subscribe(["ufi/blur"],function(b,c){a.haltAutoplay=c.hasEnteredText})};d.open=function(a){var d=this,e=new(l||(l=b("URI")))(a),f=e.getQueryData(),g=Object.create(null),h=b("PhotoPermalinkURI").parse(e);h!=null&&(f.fbid=h.photo_id,f.set=h.set_token,g.snowlift_content_id=h.photo_id);h=b("VideoPermalinkURI").parse(e);h!=null&&(f.v=h.video_id,f.set=h.set_token,g.snowlift_content_id=h.video_id);this._elem!=null&&(f.external_log_id=this._elem.getAttribute("data-external-log-id"),f.player_origin=this._elem.getAttribute("data-player-origin"));b("ScriptPath").openOverlayView("snowlift",g);if(!f.fbid&&!f.v&&!f.pid){h=x.exec(e.getPath());h&&(f.v=h[1])}f.fbid==null&&f.v==null&&b("FBLogger")("photo_snowlift").blameToPreviousFile().mustfix("Attempted to open Snowlift with an invalid URI. Loading PhotoViewerInitPagelet requires a query string that contains either a non-null `?fbid` or `?v`. Got URI: %s",a.toString());this.resetUriStack&&(this._uriStack=[]);this.initialLoad||(f.firstLoad=!0,this.initialLoad=!0,b("LitestandStoryInsertionStatus").registerBlocker(function(){return d.isOpen}));this.sessionID=Date.now();this.loadQuery=Object.assign(f,{ssid:this.sessionID});this._dataFt&&(this.loadQuery.data_ft=this._dataFt);this.isOpen=!0;this.pagersShown=!1;this.refreshOnClose=!1;this.hilitedTag=null;this.loadingStates={image:!1,html:!1};this.replaceUrl=!1;this.movementDelta=0;this.pivotsCarouselElement=null;this.autoplayOptionScreenConfig=null;this.haltAutoplay=!1;this.shouldRenderVideoPivots=!1;b("CSS").show(this.nextPager);b("CSS").show(this.prevPager);this.source=null;this.saveTagSubscription=b("Arbiter").subscribe("PhotoTagger.SAVE_TAG",this.onTagSaved.bind(this));this.taggedPhotoIds=[];this.didReceivePayloadHavingInitProperty=!1;this.payloadsReceivedBeforePayloadHavingInitProperty.length=0;this.stream=new(b("PhotoStreamCache"))();this.stream.init(b("PhotosConst").VIEWER_SNOWLIFT,"PhotoViewerPagelet","pagelet_photo_viewer",null,f.tagSuggestionMode||"everyone");(l||(l=b("URI"))).getMostRecentURI().getQueryData().viewas&&this.stream.setViewAs((l||(l=b("URI"))).getMostRecentURI().getQueryData().viewas+"");(l||(l=b("URI"))).getMostRecentURI().getQueryData().ifg&&this.stream.setIsFromGroups((l||(l=b("URI"))).getMostRecentURI().getQueryData().ifg);this.fetchInitialData();this.setLoadingState(c.STATE_HTML,!0);this.rhcCollapsed=!1;this._open(a);b("Bootloader").loadModules(["PhotosButtonTooltips"],function(a){a.init()},"PhotoSnowlift");this._navHistory.push(e.getQualifiedURI().toString())};d._open=function(a){var d=this;this.createLoader();this.hideObjectionableWarning();this.spotlight.show();b("Arbiter").inform("layer_shown",{type:"PhotoSnowlift"});b("Arbiter").inform("PhotoSnowlift.OPEN");var e=this.adjustForResize.bind(this);this.stageHandlers&&this.stageHandlers.release();this.stageHandlers=new(b("SubscriptionsHandler"))();this.stageHandlers.addSubscriptions(b("Event").listen(window,"resize",function(){if(b("FullScreen").isFullScreen())return;e()}),b("FullScreen").subscribe("changed",function(){b("setImmediate")(e)}),b("Event").listen(this.stageWrapper,"click",function(a){a=b("DataAttributeUtils").getClickTrackingParent(a.getTarget());if(!a)return;try{a=JSON.parse(b("DataAttributeUtils").getDataFt(a));if(!a.tn)return;var c=b("TrackingNodes").parseTrackingNodeString(a.tn);a=Object.keys(b("TrackingNodeTypes")).filter(function(a){return b("TrackingNodeTypes")[a]===c});a.length&&b("FunnelLogger").appendAction(p,"click_"+a.join("_"))}catch(a){}}),b("Event").listen(this.stageWrapper,"click",this.buttonListener.bind(this)),b("Event").listen(this.stageWrapper,"mouseleave",function(a){a=a.getTarget();if(b("Parent").bySelector(a,"._khz")||b("Parent").bySelector(a,"._6a-y"))return;b("Parent").byClass(a,"snowliftOverlay")||b("Parent").byClass(a,"fbPhotoSnowliftTagApproval")||b("Parent").byClass(a,"tagPointer")||b("Parent").byClass(a,"arrow")||b("Parent").byClass(a,"faceboxSuggestion")||b("Parent").byClass(a,"typeaheadWrapper")||b("Parent").byClass(a,"photoTagTypeahead")||b("Parent").byClass(a,"fbPhotoTagger")||d.unhiliteAllTags();d._mouseOnPhotoStage=!1;d.hidePagers()}),b("Event").listen(this.stageWrapper,"mousemove",this.hilitePager.bind(this)),b("Event").listen(this.stageWrapper,"mousemove",this.hiliteTagsOnMouseMove.bind(this)),b("Event").listen(this.stageWrapper,"mouseenter",function(){d._mouseOnPhotoStage=!0,b("Arbiter").inform("lwf/entryModal/logImpression")}),b("Event").listen(this.overlay,"mouseenter",this.unhiliteAllTags.bind(this)),b("Event").listen(this.container,"mousemove",this._enableMouseOver.bind(this)),b("Event").listen(this.container,"mouseover",this._interceptMouseOver.bind(this)),b("Event").listen(this.stageWrapper,"focusin",this.hilitePager.bind(this)),b("Event").listen(this.rhc,"focusin",this.hidePagers.bind(this)),b("Event").listen(this.root,"click",function(a){a=a.getTarget();if(b("Parent").bySelector(a,"._418x")){if(b("FullScreen").isFullScreen()){b("FunnelLogger").appendActionWithTagIfNew(p,"fullscreen_exit","fbPhotoSnowlift/close");b("FullScreen").toggleFullScreen();return}d.closingAction=b("PhotoSessionLog").X;d.spotlight.hide()}else d._isLiveBroadcast&&b("Parent").bySelector(a,"._3ixn")&&d.spotlight.hide()}),b("Event").listen(this.container,"click",function(a){var c=a.getTarget();if(b("Parent").byClass(c,"rotateRight"))b("FunnelLogger").appendActionWithTag(p,"rotate_image","right"),d.rotate("right");else if(b("Parent").byClass(c,"rotateLeft"))b("FunnelLogger").appendActionWithTag(p,"rotate_image","left"),d.rotate("left");else if(b("Parent").bySelector(c,"._32_l")){b("FunnelLogger").appendAction(p,"click-pivot-item");var e=b("Parent").bySelector(c,"._32_l");e=e.getAttribute("data-fbid");var f=d.stream.getCursor();f=d.stream.calculateDistance(f,e);e=d.stream.fbidList.indexOf(e);b("SnowliftVideoPivotsCarouselController").adjustCarousel(e);d.page(f,!1);d.haltAutoplay=!1;d.removeAutoplayOptionScreen()}else b("Parent").byClass(c,"fbPhotoSnowliftZoom")?d.openZoom(a):d.isFullScreenSupported&&(b("Parent").byClass(c,"fbPhotoSnowliftFullScreen")?(b("FunnelLogger").appendActionWithTagIfNew(p,b("FullScreen").isFullScreen()?"fullscreen_exit":"fullscreen_enter","fbPhotoSnowliftFullScreen"),d.toggleFullScreen()):b("Parent").byClass(c,"fbPhotoSnowliftCollapse")?(d.toggleCollapse(),b("FunnelLogger").appendAction(p,"toggle_collapse-rhc")):b("FullScreen").isFullScreen()&&(b("Parent").bySelector(c,".overlayBarButtons .comment_link")||b("Parent").bySelector(c,".overlayBarButtons ._666h"))&&(d.toggleCollapse(),b("FunnelLogger").appendAction(p,"toggle_collapse-rhc")));e=b("Parent").byAttribute(c,"data-action-type");if(e){f=e.getAttribute("data-action-type");a=e.getAttribute("data-action-tag");b("FunnelLogger").appendActionWithTag(p,f,a)}else if(b("Parent").byClass(c,"addLocation")){e=b("Parent").byClass(c,"addLocation");b("FunnelLogger").appendActionWithTag(p,"add_location",b("CSS").hasClass(e,"photosTruncatingUIButton")?null:"from-action-bar")}else if(b("Parent").byClass(c,"fbPhotosPhotoActionsTag")){f=b("Parent").byClass(c,"fbPhotosPhotoActionsTag");b("CSS").hasClass(f,"tagButton")?b("FunnelLogger").appendActionWithTag(p,"tag_photo","start-tagging"):b("CSS").hasClass(f,"doneTaggingLink")?b("FunnelLogger").appendActionWithTag(p,"tag_photo","end-tagging"):b("CSS").hasClass(f,"taggingOff")?b("FunnelLogger").appendActionWithTag(p,"tag_photo","tagging-off"):b("CSS").hasClass(f,"taggingOn")&&b("FunnelLogger").appendActionWithTag(p,"tag_photo","tagging-on")}else b("Parent").byClass(c,"UFILikeLink")&&b("FunnelLogger").appendAction(p,"like-photo")}));a=b("ge")("fbPhotoSnowliftFeedback");a&&this.stageHandlers.addSubscriptions(b("Event").listen(a,"click",function(a){var c=a.getTarget();(b("Parent").byClass(c,"like_link")||b("Parent").byClass(c,"UFILikeLink")&&b("Parent").byClass(c,"UIActionLinks"))&&d.toggleLikeButton();c=b("Parent").byClass(a.getTarget(),"uiUfiCollapsedComment");c&&(b("FunnelLogger").appendActionWithTag(p,"like-photo","snowlift-feedback"),b("CSS").addClass(c,"uiUfiCollapsedCommentToggle"))}));a=b("ge")("fbPhotoSnowliftOnProfile");a&&this.stageHandlers.addSubscriptions(b("Event").listen(a,"click",function(a){b("Parent").byClass(a.getTarget(),"fbPhotoRemoveFromProfileLink")&&(d.refreshOnClose=!0)}));this.resetUriStack&&(this.startingURI=(l||(l=b("URI"))).getMostRecentURI().addQueryData({closeTheater:1}).getUnqualifiedURI());this.setLoadingState(c.STATE_IMAGE_DATA,!0);this.transitionHandlerRegistered||(b("PageTransitions").registerHandler(this.transitionHandler.bind(this)),this.transitionHandlerRegistered=!0);b("PhotoSessionLog").initLogging(b("PhotoSessionLog").SNOWLIFT);this._dataFt&&(b("PhotoSessionLog").setTopLevelPostId(this._dataFt.top_level_post_id),b("gkx")("831476")&&(this._dataFt.story_location&&b("PhotoSessionLog").setStoryLocation(this._dataFt.story_location),this._dataFt.story_attachment_style&&b("PhotoSessionLog").setStoryAttachmentStyle(this._dataFt.story_attachment_style),this._dataFt.attached_story_attachment_style&&b("PhotoSessionLog").setAttachedStoryAttachmentStyle(this._dataFt.attached_story_attachment_style),this._dataFt.qid&&b("PhotoSessionLog").setQid(this._dataFt.qid),this._dataFt.mf_story_key&&b("PhotoSessionLog").setMfStoryKey(this._dataFt.mf_story_key),this._dataFt.page_insights&&!b("killswitch")("PAGE_INSIGHTS_STOP_SENDING_PI_TRACKING_DATA_FROM_SNOWLIFT")&&b("PhotoSessionLog").setPageInsightsData(this._dataFt.page_insights)));this.pivots&&b("PhotoSessionLog").setRelevantCount(this.pivots.relevantCount)};d.toggleFullScreen=function(){var a=b("FullScreen").toggleFullScreen(document.documentElement);a?(this._viewable.onToggleIntoFullScreen(),b("PhotoSessionLog").logEnterFullScreen(this.stream.getCursor())):this._viewable.onToggleOutOfFullScreen()};d._getIsZoomAllowed=function(a){return!!(a&&!a.video&&!a.spherical&&a.dimensions&&(a.dimensions.x>window.innerWidth||a.dimensions.y>window.innerHeight))};d.showZoom=function(a){b("CSS").conditionClass(this.root,"zoomAvailable",this._getIsZoomAllowed(a))};d.openZoom=function(a){var c=this.stream.getCurrentImageData();this._viewable.onToggleIntoFullScreen();var d=b("DOM").find(this.stageWrapper,"._2-sx"),e=d.getBoundingClientRect();d.style.width="auto";d.style.height="auto";d.classList.add("zoom");var f,g;if(c){c=c.dimensions;f=Math.max(0,c.x-window.innerWidth);g=Math.max(0,c.y-window.innerHeight)}else{c=d.getBoundingClientRect();f=Math.max(0,c.width-window.innerWidth);g=Math.max(0,c.height-window.innerHeight)}c=!1;f&&(c=!0,f+=v*2,d.classList.add("overflowX"));g&&(c=!0,g+=v*2,d.classList.add("overflowY"));var h;if(c){c=-a.clientX/window.innerWidth*f+"px";a=-a.clientY/window.innerHeight*g+"px";d.style.transform="translate3d("+c+","+a+",0)";h=b("Event").listen(d,"mousemove",function(a){var b=-a.clientX/window.innerWidth*f+"px";a=-a.clientY/window.innerHeight*g+"px";d.style.transform="translate3d("+b+","+a+",0)"})}var i=null,j=null;c=function(){d.style.width=e.width+"px";d.style.height=e.height+"px";d.style.transform="";d.classList.remove("zoom","overflowX","overflowY");h&&h.remove();i.remove();k.unsubscribe(j);k.destroy();return!1};var k=new(b("Layer"))({},document.createElement("div"));j=k.subscribe("key",c);k.show();i=b("Event").listen(d,"click",c);this._viewable.onEnterFullScreen()};d.getStream=function(){return this.stream};d.fetchInitialData=function(){this.stream.waitForInitData();var a=this.loadQuery.within_business?this.loadQuery.business_thread_id:this.loadQuery.fbid;a=b("PhotoSnowliftUFIFeedbackTargets").getFeedbackTargetIfExists(a)||{};a={actorID:a.actorforpost||null,usePipe:!0,jsNonblock:!0,crossPage:!0,allowIrrelevantRequests:this.allowIrrelevantRequests};this.loadQuery.__tn__&&this.loadQuery.__xts__&&(a.query=(m||(m=b("PHPQuerySerializer"))).serialize({__tn__:this.loadQuery.__tn__,__xts__:this.loadQuery.__xts__}));b("UIPagelet").loadFromEndpoint("PhotoViewerInitPagelet",b("ge")("pagelet_photo_viewer_init",this.root),this.loadQuery,a);this.adjustScroller()};d.toggleCollapse=function(){this.rhcCollapsed?this.uncollapseRHC():this.collapseRHC()};d.collapseRHC=function(){this.rhcCollapsed=!0,b("CSS").addClass(this.root,"collapseRHC"),this.adjustForResize()};d.uncollapseRHC=function(){this.rhcCollapsed=!1,b("CSS").removeClass(this.root,"collapseRHC"),this.adjustForResize()};d.closeHandler=function(){if(!this.isOpen)return;this.closingAction=this.closingAction||b("PhotoSessionLog").ESC;if((l||(l=b("URI"))).getMostRecentURI().addQueryData({closeTheater:1}).getUnqualifiedURI().toString()==this.startingURI.toString()){this.close();return}this.returnToStartingURI(this.refreshOnClose);this.close()};d.returnToStartingURI=function(a,c){var d=this;a||(c?this.squashNextTransition(b("goURI").bind(null,c)):this.squashNextTransition());this.returningToStart=!0;var e=b("Arbiter").subscribe("page_transition",function(){d.returningToStart=!1,e.unsubscribe()});c=a||isNaN(b("UserAgent_DEPRECATED").opera());a=this._uriStack.length;if(c&&a<window.history.length)a!==0&&window.history.go(-a);else{c=this.startingURI;a=new(l||(l=b("URI")))(c).removeQueryData("closeTheater");c.getQueryData().sk=="approve"&&c.getPath()=="/profile.php"&&(a.removeQueryData("highlight"),a.removeQueryData("notif_t"));b("goURI")(a)}};d.squashNextTransition=function(a){var c=this;this.squashNext=!0;b("PageTransitions").registerHandler(function(){if(c.squashNext){c.squashNext=!1;a&&window.setTimeout(a,0);b("PageTransitions").transitionComplete(!0);return!0}return!1},7)};d.postProcessTaggedPhotos=function(){if(this.taggedPhotoIds&&this.taggedPhotoIds.length>0){var a=null;this.source===c.COLLECTIONS_UNTAGGED_PHOTOS?a="/ajax/photos/photo/edit/skiptag/":(this.source===c.PHOTOS_OF_YOU_SUGGESTIONS||this.source===c.FRIENDS_IN_PHOTOS_SUGGESTIONS)&&(a="/ajax/photos/photo/add_to_star_grid/");a&&new(b("AsyncRequest"))().setURI(a).setAllowCrossPageTransition(!0).setData({media_id:this.taggedPhotoIds,source:this.source}).send()}};d.onTagSaved=function(a,b){if(this.taggedPhotoIds){if(this.source===c.PHOTOS_OF_YOU_SUGGESTIONS&&!b.self_tag)return;this.taggedPhotoIds.push(b.photo_fbid)}};d.clearAlbumBoundaries=function(){this._albumBoundaries={start:0,end:0,dir:0}};d.close=function(){if(!this.isOpen)return;b("FunnelLogger").appendActionWithTag(p,"close_snowlift",b("PhotoSessionLog").closingTypeToString(this.closingAction));b("FunnelLogger").endFunnel(p);this._albumFBID=null;this.hideMorePhotos();this.hidePivotSlide();this._pauseVideoIfNeeded();this._destroyVideoIfNeeded(this._videoPlayerStateManager);this._bodyMutationObserver&&(this._bodyMutationObserver.disconnect(),this._bodyMutationObserver=null);this.isOpen=!1;this._navCount=0;this.clearAlbumBoundaries();this.isFullScreenSupported&&b("FullScreen").disableFullScreen();b("CSS").removeClass(document.body,"fbPhotoSnowliftFullScreenMode");this.spotlight.hide();this.openExplicitly=!1;this.postProcessTaggedPhotos();b("Arbiter").inform("lwf/unmount");b("Arbiter").unsubscribe(this.saveTagSubscription);this.taggedPhotoIds=[];this.closeDirty=!0;b("setTimeoutAcrossTransitions")(this.closeCleanup.bind(this),0);this.snowflake&&(b("CSS").removeClass(this.root,"snowflake"),this.extraClasses.forEach(function(a){b("CSS").removeClass(this.root,a)},this));this.extraClasses=[];this.snowflake=!1;this.firstInSet=null;this.movementDelta=0};d.createLoader=function(a){var d=this;if(this.currentImageSize===null)this.adjustStageSize(c.STAGE_MIN);else{var e=this.getStageSize(this.currentImageSize);e=new(b("Vector"))(Math.max(e.x,this.getMinimumStageWidth()),Math.max(e.y,c.STAGE_MIN.y));e=this.getImageSizeInStage(this.currentImageSize,e);this._elem&&this._elem.getAttribute("data-ploi")&&(this.thumbSrc=b("PhotoSnowliftLoader").getImageURL(this._elem));if(this.thumbSrc===null)this.adjustStageSize(e);else{var f=b("TimeSlice").getGuardedContinuation("Snowlift thumb image load");f=b("DOM").create("img",{className:"spotlight",alt:"",src:this.thumbSrc,style:{width:e.x+"px",height:e.y+"px"},onload:f.bind(void 0,b("emptyFunction"))});var g;this.thumbSpherical&&this.sphericalPhotoData?g=b("PhotoSnowliftViewableUtils").fromSphericalPhotoData(this.sphericalPhotoData,this):g=b("PhotoSnowliftViewableUtils").fromImageElement(f,this.thumbSpherical);this._useViewable(g,e,!1)}}this.setLoadingState(this.STATE_IMAGE_PIXELS,!0);a&&window.setTimeout(function(){var e=function(b){b===void 0&&(b=null);if(!d.isOpen)return;(!d.stream||!d.stream.errorInCurrent())&&(d._switchViewable(b?b:a,d.currentImageSize),d.setLoadingState(c.STATE_IMAGE_DATA,!1))},f=b("TimeSlice").getGuardedContinuation("PhotoSnowlift image load");e=f.bind(null,e);if(b("EncryptedImg").isEncrypted(a))b("EncryptedImg").load(a,e);else{f=new Image();var g=b("Event").listen(f,"load",e);e=function(){g&&(g.remove(),g=null)};b("Arbiter").subscribeOnce("PhotoSnowlift.SWITCH_IMAGE",e);b("Arbiter").subscribeOnce("PhotoSnowlift.CLOSE",e);f.src=a}d._log(a)},0);b("CSS").hide(this.stageActions);this.setStagePagersState("disabled")};d.initialDataFetched=function(a){b("PhotoSessionLog").setPhotoSet(this.stream.getPhotoSet());b("PhotoSessionLog").setLogFbids(a.logids);a.eid&&b("PhotoSessionLog").setEid(a.eid);this._albumBoundaries.start=this.stream.getCursor();a=this.stream.getCurrentImageData();if(a){var c=this.getImageURL(a);c=!b("PhotoSnowliftLoggingConfig").checkForImage||c;c&&(b("PhotoSessionLog").addPhotoView(a.info,this.shouldShowHiRes(a),this.isFullScreenSupported&&b("FullScreen").isFullScreen()),b("PhotoSnowliftLoggingConfig").logOnlyOnInit&&b("PhotoSessionLog").logInitialLoad())}c=this.stream.getCurrentExtraData();c&&c.source!==void 0&&(this.source=parseInt(c.source,10),b("PhotoSessionLog").setSource(this.source));this.pageHandlers&&this.pageHandlers.release();this.pageHandlers=new(b("SubscriptionsHandler"))();this.pageHandlers.addSubscriptions(b("Event").listen(this.root,"click",this.pageListener.bind(this)),b("Event").listen(this.root,"mouseleave",this.mouseLeaveListener.bind(this)));this.showZoom(a);b("CSS").show(this.stageActions);this.root.setAttribute("aria-busy","false");this._updateObjectionableWarning(a);a.info.disablecontextmenu?this.disableContextMenu():this.enableContextMenu()};d.adjustScrollerIfNecessary=function(){window.clearTimeout(this.scrollerTimeout),this.scrollerTimeout=window.setTimeout(this.adjustScroller.bind(this),0)};d.adjustForResize=function(){this.currentMinSize=null,this.adjustStageSize(),this.adjustForNewData()};d._adjustStageSizeForPixelRatio=function(a){window.devicePixelRatio&&window.devicePixelRatio>1&&(a=new(b("Vector"))(a.x*window.devicePixelRatio,a.y*window.devicePixelRatio));return a};d.getImageURL=function(a){if(a.video)return null;else if(a.smallurl&&!this.shouldShowHiRes(a))return a.smallurl;return a.url};d.getImageOrVideoDimensions=function(a){if(a.video){a=this.getVideoElement(a.video);if(a)return this.getVideoSize(a)}return this._viewable.getNaturalDimensions()};d.getStageSize=function(a,d){var e=b("Vector").getViewportDimensions();this._isLiveBroadcast&&(e.y-=200);var f=new(b("Vector"))(a.x,a.y);d&&(f=new(b("Vector"))(Math.max(a.x,d.x),Math.max(a.y,d.y)));if(this.isFullScreenSupported&&b("FullScreen").isFullScreen()){a=screen.height-c.FULL_SCREEN_PADDING*2;return new(b("Vector"))(this.rhcCollapsed?screen.width:screen.width-c.SIDEBAR_SIZE_MAX,a)}else{d=Math.min(f.x,e.x-c.SIDEBAR_SIZE_MAX-c.STAGE_CHROME.x);e=e.y-c.STAGE_CHROME.y;a=Math.min(f.y,e)}if(d===0&&a===0)return new(b("Vector"))(0,0);e=d/a;f=f.x/f.y;return e<f?new(b("Vector"))(d,Math.round(d/f)):new(b("Vector"))(Math.round(a*f),a)};d.getExtraVerticalSpace=function(){return this.getVideoOnStage()?c.VIDEO_BOTTOM_BAR_SPACE*2:0};d.getComponentsHeight=function(){var a=this.getVideoOnStage();if(a){a=b("ge")(a);if(a)return this.getVideoComponentsHeight(a)}return 0};d.getMinimumStageWidth=function(){var a=c.STAGE_MIN.x;if(this.getVideoOnStage())return a;b("PhotoSnowliftActionsGating").ALLOW_MAKE_PROFILE_PICTURE_BUTTON&&(a+=c.PROFILE_PICTURE_BUTTON_WIDTH);return a};d.getImageSizeInStage=function(a,c){var d=a.x;a=a.y;var e=this.getComponentsHeight(),f=this.getExtraVerticalSpace();a-=e;c=new(b("Vector"))(c.x,c.y-e-f);if(d>=c.x||a>=c.y){f=c.x/c.y;var g=d/a;f<g?(d=c.x,a=Math.round(d/g)):f>g?(a=c.y,d=Math.round(a*g)):(d=c.x,a=c.y)}return new(b("Vector"))(d,a+e)};d.adjustStageSize=function(a){var d=this.currentImageSize;if(a)d=a;else{a=this.stream&&this.stream.getCurrentImageData();a&&(d=this.getImageOrVideoDimensions(a))}if(!d)return;this.currentImageSize=d;a=this.getExtraVerticalSpace();this.shouldStretch&&!this.getVideoOnStage()&&d.x>d.y&&d.x<=c.TIMELINE_STRETCH_WIDTH&&d.x>=c.TIMELINE_STRETCH_MIN&&(d.y=Math.round(d.y*c.TIMELINE_STRETCH_WIDTH/d.x),d.x=c.TIMELINE_STRETCH_WIDTH);var e=this.getStageSize(d,this.currentMinSize);this.currentMinSize||(this.currentMinSize=new(b("Vector"))(0,0));this.currentMinSize=new(b("Vector"))(Math.max(e.x,this.getMinimumStageWidth(),this.currentMinSize.x),Math.max(e.y,c.STAGE_MIN.y,this.currentMinSize.y));e=this.getImageSizeInStage(d,this.currentMinSize);d=this.currentMinSize.x-e.x;var f=this.currentMinSize.y-e.y;d>0&&d<c.PADDING_MIN?this.currentMinSize.x-=d:f>0&&f<c.PADDING_MIN&&(this.currentMinSize.y-=f);f=this.currentMinSize.x+c.SIDEBAR_SIZE_MAX;this.rhcCollapsed&&(f=this.currentMinSize.x);var g=this.getVideoOnStage()&&this.pivotsCarouselElement,h=0,i=this.currentMinSize.y;if(g){var j=this.pivotsCarouselElement.clientHeight;h=Math.ceil(j/100)*100;i+=h}this.snowliftPopup.style.cssText="width:"+f+"px;height:"+i+"px;";j=this.currentMinSize.y-a;f=j+h;if(b("UserAgent_DEPRECATED").firefox()){var k=b("Style").get(this.stageWrapper,"font-size");j=j/parseFloat(k)+"em";f=f/parseFloat(k)+"em"}else j+="px",f+="px";this.stageWrapper.style.cssText="width:"+this.currentMinSize.x+"px;line-height:"+j+";";if(this.getVideoOnStage()){this.videoStage.style.cssText="width:"+this.currentMinSize.x+"px;height:"+f+";";if(!this._inputBarAdjusted&&this._isLiveBroadcast){i=parseInt(b("Style").get(this._liveInputBar,"right"),10);b("Style").set(this._liveInputBar,"right",i+d/2+"px");this._inputBarAdjusted=!0}}e.y-=this.getComponentsHeight();this.setMediaElementSize(e);g&&this.setPivotCarouselElementWidth(k);a=this.getTagger();a&&a.repositionTagger();this.adjustScrollerIfNecessary()};d.setMediaElementSize=function(a){var c=this.image;if(this.getVideoOnStage())if(this._videoPlayerStateManager&&this._videoPlayerStateManager.setDimensions){this._videoPlayerStateManager.setDimensions(a.x,a.y);return}else c=b("DOM").scry(this.videoStage,"._53j5")[0]||c;else{this._viewable.setDimensions(a);return}if(!c)return;c.style.cssText="width:"+a.x+"px;height:"+a.y+"px;"};d.setPivotCarouselElementWidth=function(a){var c=this.videoStage.clientWidth;b("UserAgent_DEPRECATED").firefox()?c=c/parseFloat(a)+"em":c+="px";this.pivotsCarouselElement.style.width=c};d.adjustForNewData=function(){var a=this._viewable.getDimensions(),c=b("DOM").scry(this.stage,"div.tagsWrapper")[0];c&&(b("Style").set(c,"width",a.x+"px"),b("Style").set(c,"height",a.y+"px"))};d.setLoadingState=function(a,d){switch(a){case c.STATE_IMAGE_PIXELS:b("CSS").conditionClass(this.root,"imagePixelsLoading",d);break;case c.STATE_IMAGE_DATA:this.loadingStates[a]=d;b("CSS").conditionClass(this.root,"imageLoading",d);break;case c.STATE_HTML:this.loadingStates[a]=d;b("CSS").conditionClass(this.root,"dataLoading",d);this.rhc.setAttribute("aria-busy",d?"true":"false");break}};d.destroy=function(){var a=this;this.stageHandlers&&this.stageHandlers.release();this.stageHandlers=null;this.pageHandlers&&this.pageHandlers.release();this.pageHandlers=null;this._actionsMenuSubscriptionsHandler&&(this._actionsMenuSubscriptionsHandler.release(),this._actionsMenuSubscriptionsHandler=null);this._vpcsToDestroyOnDestroy.forEach(function(b){a._destroyVideoIfNeeded(b)});this._vpcsToDestroyOnDestroy.clear();this._videoPlayerStateManager=null};d.checkState=function(a,d){var e=this;d===void 0&&(d=!1);if(a!=c.STATE_ERROR&&!this.loadingStates[a])return;switch(a){case c.STATE_IMAGE_DATA:var f=this.stream.getCurrentImageData();if(f){var g=this.getImageURL(f);g?this._switchViewable(g,null,!0,d):f.video&&(f.shouldDelayStartupVideo?b("setImmediate")(function(){return e.switchVideo(f.video,!0)}):this.switchVideo(f.video,!0));this.setLoadingState(a,!1)}break;case c.STATE_HTML:this.stream.getCurrentHtml()&&(this.swapData(),this.setLoadingState(a,!1));break;default:this.stream.errorInCurrent()&&(this._viewable.hide(),b("CSS").show(this.errorBox));break}};d.toggleLikeButton=function(){var a=b("DOM").scry(this.buttonActions,"a.fbPhotosPhotoLike")[0];if(a){var c=b("DOM").find(this.root,".likeCount"),d=b("DOM").find(c,".likeCountNum"),e=b("CSS").hasClass(a,"viewerLikesThis");b("FunnelLogger").appendActionWithTag(p,e?"unlike_photo":"like_photo","snowlift-feedback");c&&(e?b("DOM").setContent(d,parseInt(d.textContent,10)-1):b("DOM").setContent(d,parseInt(d.textContent,10)+1));b("CSS").toggleClass(a,"viewerLikesThis");b("CSS").removeClass(a,"viewerAlreadyLikedThis")}};d.likePhotoWithKey=function(){return b("LikeConfirmer").like(this.likePhoto.bind(this),b("getActiveElement")())};d.updateTagBox=function(a,c){this.unhiliteAllTags();a=b("ge")(a);if(!a)return;b("CSS").addClass(a,"tagBox");b("CSS").addClass(a,"tagBoxPendingResponse");b("CSS").removeClass(a,"tagBoxPending");b("CSS").hide(b("DOM").find(a,"span.tagForm"));c?b("CSS").show(b("DOM").find(a,"span.tagApproved")):b("CSS").show(b("DOM").find(a,"span.tagIgnored"))};d.rotate=function(a){var d=this,e=this.stream.getCursor();if(this.getVideoOnStage()){var f=a=="left"?270:90;!this.videoRotateURI&&j(0,197);b("Bootloader").loadModules(["VideoRotate"],function(a){new a(e,d.videoRotateURI).motionRotate(f)},"PhotoSnowlift");return}var g=babelHelpers["extends"]({fbid:e,opaquecursor:this.stream.getOpaqueCursor(e),cs_ver:b("PhotosConst").VIEWER_SNOWLIFT},this.stream.getPhotoSetQuery());g[a]=1;this.setLoadingState(c.STATE_IMAGE_DATA,!0);this.setLoadingState(this.STATE_IMAGE_PIXELS,!0);this._viewable.hide();new(b("AsyncRequest"))("/ajax/photos/photo/rotate/").setAllowCrossPageTransition(!0).setData(g).setErrorHandler(this.rotationError.bind(this,e)).setFinallyHandler(this.rotationComplete.bind(this,e)).setMethod("POST").setReadOnly(!1).send()};d.rotationComplete=function(a,b){a==this.stream.getCursor()&&(this.setLoadingState(c.STATE_IMAGE_DATA,!1),this._switchViewable(this.getImageURL(this.stream.getCurrentImageData())),this.swapData())};d.rotationError=function(a,d){a==this.stream.getCursor()&&(this.setLoadingState(c.STATE_IMAGE_DATA,!1),this._switchViewable(this.getImageURL(this.stream.getCurrentImageData())),b("Bootloader").loadModules(["AsyncResponse"],function(a){a.defaultErrorHandler(d)},"PhotoSnowlift"))};d.saveTagsFromPayload=function(a){this.storeFromData(a),"data"in a&&this.stream.getCursor()in a.data&&this.swapData()};d.saveEdit=function(){var a=this;if(!b("CSS").hasClass(this.root,"fbPhotoSnowliftEditMode"))return;b("Bootloader").loadModules(["PhotoInlineEditor","FormSubmit"],function(b,c){b=b.getInstance(a.getViewerConst());b&&c.send(b.getForm().controller)},"PhotoSnowlift")};d.mouseLeaveListener=function(a){this.unhiliteAllTags(),this.reHilitePendingTag()};d.showPagers=function(a){window.clearTimeout(this.fadePagerTimer),this.setStagePagersActivated(!0),a!==void 0&&(this.fadePagerTimer=window.setTimeout(this.hidePagers.bind(this),a))};d.hidePagers=function(){if(this._mouseOnPhotoStage||this._actionMenuOpen)return;window.clearTimeout(this.fadePagerTimer);this.setStagePagersActivated(!1)};d.getTagger=function(){return this.PhotoTagger&&this.PhotoTagger.getInstance(b("PhotosConst").VIEWER_SNOWLIFT)};d.reHilitePendingTag=function(){var a=b("ge")(this.hilitedTag);if(a&&b("CSS").hasClass(a,"showPendingTagName"))return;a=b("DOM").scry(this.stage,"div.tagsWrapper div.showPendingTagName")[0];a&&this.switchHilitedTags(a.id)};d.currentTagHasPrecedence=function(a){if(!this.hilitedTag)return!1;if(this.stream.getCurrentExtraData().tagRects[this.hilitedTag]===void 0){this.hilitedTag=null;return!1}var c=this.stream.getCurrentExtraData().tagRects[this.hilitedTag];c=new(b("Rect"))(c.t+c.h()/2,c.r,c.b+(b("PhotosUtils").isFacebox(this.hilitedTag)?10:0),c.l,c.domain);return c.contains(a)};d.getVideoOnStage=function(){var a=this.stream&&this.stream.getCurrentImageData();return a&&a.video};d.shouldPageOnAction=function(a,c){var d=this;if(!this.isOpen||b("LikeConfirmer").isShowingConfirmation())return!1;var e=b("isNode")(c)&&(b("Parent").byClass(c,"snowliftPager")||b("Parent").byClass(c,"stagePagers")||b("Parent").byClass(c,"pivotPageColumn")),f=b("isNode")(c)&&b("Parent").byClass(c,"stage"),g=b("CSS").hasClass(c,"faceBox");g=!b("CSS").hasClass(this.root,"taggingMode")&&g&&!e;if(g){this.showingTypeaheadSuggestions||(this.getTagger().updateWithSuggestions(),window.setTimeout(function(){b("DOM").find(d.getTagger().tagger,"input.textInput").focus()},0));this.showingTypeaheadSuggestions=!this.showingTypeaheadSuggestions;return!1}var h=f&&b("DOM").scry(this.stage,".fbPhotosPhotoTagboxBase.tagBox.hover a");if(h&&h.length>0){h[0].click();return!1}h=f&&b("CSS").hasClass(this.root,"taggingMode")||b("Parent").byClass(c,"tagBoxPending")||b("Parent").byClass(c,"tagBoxPendingResponse")||b("Parent").byClass(c,"fbPhotoTagApprovalBox")||b("Parent").byClass(c,"tag")||b("Parent").byClass(c,"sphericalHeadingIndicator")||b("Parent").byClass(c,"sphericalVolumeControl")||b("Parent").byClass(c,"sphericalPhotoWrapper");return h?!1:a==b("Keys").LEFT||a==b("Keys").RIGHT||a==q||a==r||e||g||f};d.keyHandler=function(a,d){if(d.getModifiers().any||b("Layer").getTopmostLayer()!==this.spotlight)return!0;switch(b("Event").getKeyCode(d)){case b("Keys").LEFT:case b("Keys").RIGHT:case q:case r:this.pageListener(d);return!1;case s:b("FunnelLogger").appendActionWithTagIfNew(p,b("FullScreen").isFullScreen()?"fullscreen_exit":"fullscreen_enter","key-f");return this.toggleFullScreen();case t:return this.likePhotoWithKey();case b("Keys").SPACE:this.showPagers(c.PAGER_FADE);return!1}return null};d.shouldHandlePendingTag=function(a){var c=this.getTagger();if(!c||!c.tags.length)return!1;a=b("PhotosUtils").absoluteToNormalizedPosition(this.getImage(),b("Vector").getEventPosition(a));c=c.findNearestTag(a);if(!c||!b("CSS").hasClass(c.node,"tagBoxPending"))return!1;b("Arbiter").inform("PhotoTagApproval.PENDING_TAG_PHOTO_CLICK",{id:c.id,version:this.getVersionConst()});return!0};d.warnLeavePage=function(a){new(b("Dialog"))().setTitle(i._("Are you sure that you want to leave this page?")).setBody(i._("You have unsaved changes that will be lost if you leave the page.")).setButtons([{name:"leave_page",label:i._("Leave this Page"),handler:a},{name:"continue_editing",label:i._("Stay on This Page"),className:"inputaux"}]).setModal(!0).show()};d.getUsesOpaqueCursor=function(){return this.stream.getUsesOpaqueCursor()};d.getOpaqueCursor=function(a){return this.stream.getOpaqueCursor(a)};d.setReachedLeftEnd=function(){this.stream.setReachedLeftEnd()};d.setReachedRightEnd=function(){this.stream.setReachedRightEnd()};d._initLitestandShareAttachments=function(){var a=b("DOMQuery").scry(this.root,"."+b("LitestandShareAttachment").getSimpleCropClass());a.forEach(function(a){return b("LitestandShareAttachment").init(a)})};d.showMorePhotos=function(a,c){if(this._showingMorePhotos)return;this._showingMorePhotos=!0;this.searchPivot||(this.searchPivot=this.overlay.appendChild(document.createElement("div")));b("CSS").addClass(this.stageWrapper,"_5ymv");this.searchPivotComponent=new(b("ReactComponentRenderer_DEPRECATED"))(b("PhotosetSearchPivot.react"),this.searchPivot);this.searchPivotComponent.setProps({className:"_27g",fbid:a,onclose:this.hideMorePhotos.bind(this),endofalbum:c||!1,withBackground:!0})};d.hideMorePhotos=function(){this.searchPivotComponent&&this._showingMorePhotos&&(this._showingMorePhotos=!1,b("CSS").removeClass(this.stageWrapper,"_5ymv"),this.searchPivotComponent.setProps({fbid:null}))};d.showPivotSlide=function(a,c){if(this.onExtraSlide)return;this.onExtraSlide=!0;b("CSS").addClass(this.stageWrapper,"_3tvf");this.pivotSlide||(this.pivotSlide=b("DOM").create("div"),b("DOM").insertBefore(this.stageActions,this.pivotSlide));this.pivotSlideComponent=new(b("ReactComponentRenderer_DEPRECATED"))(b("PhotosetPivotSlide.react"),this.pivotSlide);this.pivotSlideComponent.setProps({fbid:a,isAlbum:this._isAlbum,albumOwnerName:this._albumOwnerName,visible:!0,onReturn:this.page.bind(this,this._albumBoundaries.dir,c)})};d.hidePivotSlide=function(){this.pivotSlideComponent&&this.onExtraSlide&&(this.pivotSlideComponent.setProps({visible:!1}),b("CSS").removeClass(this.stageWrapper,"_3tvf")),this.onExtraSlide=!1};d.logImpressionDetailsForPhoto=function(){var a=[].concat(b("DOM").scry(b("$")("fbPhotoSnowliftTagList"),"input.photoImpressionDetails"),b("DOM").scry(b("$")("fbPhotoSnowliftFeedback"),"input.photoImpressionDetails"));if(a.length===0)return;var c={};for(var d=0;d<a.length;d++)c[a[d].name]=a[d].value;if(this.getVideoOnStage())c.width=0,c.height=0;else{a=this._viewable.getNaturalDimensions();c.width=a.x;c.height=a.y}b("PhotoSessionLog").addDetailData(this.stream.getCursor(),c)};d.recacheData=function(){if(!this.loadingStates.html){var a=this.stream.getCurrentHtml();for(var c in a){var d=b("ge")(c);d&&(a[c]=Array.from(d.childNodes),b("DOM").empty(d))}this.stream.containsUFIConfig()&&this._clearUFIContainers()}};d._useViewable=function(a,c,d,e){var f=this;e===void 0;if(d&&this._viewable.isReady())return;e=function(){var d=f._viewable;f._viewable=a;b("DOM").replace(d.getElement(),a.getElement());f.setLoadingState(f.STATE_IMAGE_PIXELS,!1);f.adjustStageSize(c);window.setTimeout(function(){f.isOpen&&(f.adjustStageSize(),f.adjustForNewData())},0);d.suspend()};a.whenReady(e)};d.makeNewImage=function(a,d){var e=this;this.imageLoadingTimer?(window.clearTimeout(this.imageLoadingTimer),this.imageLoadingTimer=null):d||(this.imageRefreshTimer=window.setTimeout(this.reloadIfTimeout.bind(this),c.LOADING_TIMEOUT));d=b("DOM").create("img",{className:"spotlight",alt:""});d.setAttribute("aria-describedby","fbPhotosSnowliftCaption");d.setAttribute("aria-busy","true");var f=function(){window.clearTimeout(e.imageRefreshTimer),e.image.setAttribute("aria-busy","false"),e.setLoadingState(e.STATE_IMAGE_PIXELS,!1),window.setTimeout(function(){e.isOpen&&(e.adjustStageSize(),e.adjustForNewData())},0)};b("Event").listen(d,"load",f);this._log(a);b("EncryptedImg").isEncrypted(a)?b("EncryptedImg").insertIntoDOM(a,d):d.src=a;return d};d._updateObjectionableWarning=function(a){a.info.ocmarkup?(this.showObjectionableWarning(a.info.ocmarkup),this.obscuredByOverlay=!0):(this.hideObjectionableWarning(),this.obscuredByOverlay=!1)};d.handleObjectionableContentToggleButtonClicked=function(a,b){this.obscuredByOverlay=b,b&&this.getTagger().deactivateTagging()};d._switchViewable=function(a,c,d,e){e===void 0&&(e=!1);b("CSS").hide(this.errorBox);e||this._viewable.hide();this.setLoadingState(this.STATE_IMAGE_PIXELS,!0);var f=this.stream&&this.stream.getCurrentImageData();f&&(e||b("PhotoSessionLog").addPhotoView(f.info,this.shouldShowHiRes(f),this.isFullScreenSupported&&b("FullScreen").isFullScreen()),this._updateObjectionableWarning(f));var g=this._viewable.getElement().children[0],h;this.isSpherical()?h=!!this.sphericalPhotoData&&f.info.fbid.toString()===this.sphericalPhotoData.fbid:h=g.src===a;if(!h){h=b("PhotoSnowliftViewableUtils").fromStreamData(f,this);this.sphericalPhotoData=null;this.isFullScreenSupported&&b("FullScreen").isFullScreen()&&(h.onToggleIntoFullScreen(),h.onEnterFullScreen());this._log(a);this._useViewable(h,c,!1,e)}else g.setAttribute("alt",f.info.caption),g.setAttribute("aria-busy","true"),this.adjustStageSize(c),this._viewable.show(),this._log(a);d&&this.stream.preloadImages(this.shouldShowHiRes.bind(this));b("Arbiter").inform("PhotoSnowlift.SWITCH_IMAGE")};d._preloadNextVideo=function(){var a=this.stream.calculatePositionForMovement(1);a=this.stream.getCursorAt(a);a=this.stream.getImageData(a);a&&a.video&&a.controller&&a.controller.preload()};d._emptyVideoStage=function(){b("DOM").empty(this.videoStage)};d.switchVideo=function(a,c,d){var e=this;this._pauseVideoIfNeeded();var f="swf_"+a;window.videoStage=this.videoStage;this._emptyVideoStage();if(c){this._preloadNextVideo();b("CSS").addClass(this.stageWrapper,"showVideo");var g=this.stream.getCurrentImageData();this.shouldRenderVideoPivots&&(b("CSS").hide(this.nextPager),b("CSS").hide(this.prevPager));var h,i;this._abortVideoWhenSwitch=!0;if(g.useReactPlayer){h=b("DOM").create("div");c=new(b("VideoData"))(g.videoData);var j=g.PhotoSnowliftVideoNode;j&&!this.PhotoSnowliftVideoNode&&(this.PhotoSnowliftVideoNode=j);var k=j.getVideoNode(c.getVideoID());if(k)h=k.getVideoContainer(),this._videoPlayerStateManager=k.getVideoPlayerController(),k.updateDimension(g.width,g.height),g.keepReactVideoNodeLoaded&&(this._abortVideoWhenSwitch=!1);else{k=g.PhotoSnowliftVideo;b("ReactDOM").render(o.jsx(k,{width:g.width,height:g.height,videoData:c,ref:function(a){return i=a}}),h);this._videoPlayerStateManager=i.getVpc();j.destroyVideoNode()}}else h=g.video_element,b("DOM").scry(h,"._ox1")[0].style.cssText="",this._videoPlayerStateManager=g.controller;this._vpcsToDestroyOnDestroy.add(this._videoPlayerStateManager_);k=null;this.pivotsCarouselElement&&(k=b("DOMQuery").scry(this.pivotsCarouselElement,"._32_l"));k&&k.forEach(function(a){var c=a.getAttribute("data-fbid"),d=e.stream.getCursor();a=b("DOM").find(a,"._1pqn");c===d?b("CSS").show(a):b("CSS").hide(a)});b("CSS").addClass(h,"videoStageContainer");b("DOM").appendContent(this.videoStage,h);b("DOM").appendContent(this.videoStage,this.pivotsCarouselElement);this.videoContainer=h;window[f]&&!b("ge")(f)&&window[f].write(a);c="video_warning_"+a;j=b("ge")(a);this.videoWarnings||(this.videoWarnings=[]);j&&this.videoWarnings[c]&&b("DOM").setContent(j,this.videoWarnings[c]);g.abortedLoadingOtherVideos&&(this._preloadTimeout&&window.clearTimeout(this._preloadTimeout),this._preloadTimeout=window.setTimeout(function(){var a=[e.stream.getPreviousImageData(),e.stream.getNextImageData()],b=a[0];a=a[1];a&&a.controller&&a.controller.preload();b&&b.controller&&b.controller.preload()},w));g.useReactPlayer||this._videoPlayerStateManager.reset();this._videoPlayerStateManager.collectFeedTrackingData();this._videoPlayerStateManager.hasOption("PhotoSnowlift","isInSnowlift")||this._videoPlayerStateManager.registerOption("PhotoSnowlift","isInSnowlift",function(){return!0});this._videoPlayerStateManager.emit("PhotoSnowlift/enterSnowlift");k=b("gkx")("1573969");k&&this.adjustStageSizeForVideo(a);if(this._autoplayVideos){j=d||"user_initiated";this._videoPlayerStateManager.play(j)}this._autoplayNextVideo&&this._videoPlayerStateManager.addListener("finishPlayback",function(){var a=g.info.fbid.toString();if(e.haltAutoplay&&a!==e.stream.fbidList[e.stream.fbidList.length-1]){if(e.autoplayOptionScreenConfig){a=e.autoplayOptionScreenConfig.controller;a.registerCallbacks(h,e.chooseToReplayVideo.bind(e,e._videoPlayerStateManager),e.handleAutoplay.bind(e,g))}}else e.handleAutoplay(g)});k||window.setTimeout(this.adjustStageSizeForVideo.bind(this,a),0)}else window[f]&&window[f].addVariable("video_autoplay",0),this.videoLoadTimer&&window.clearTimeout(this.videoLoadTimer),b("CSS").removeClass(this.stageWrapper,"showVideo")};d.removeAutoplayOptionScreen=function(){this.autoplayOptionScreenConfig&&this.autoplayOptionScreenConfig.controller.removeSelf()};d.chooseToReplayVideo=function(a){a.play("user_initiated"),this.removeAutoplayOptionScreen(),this.haltAutoplay=!1};d.getVideoSize=function(a){a=new(b("Vector"))(a.getAttribute("data-video-width"),+a.getAttribute("data-video-height")+this.getVideoComponentsHeight(a));if(this._videoPlayerStateManager&&this._videoPlayerStateManager.isSpherical&&this._videoPlayerStateManager.isSpherical()){var c=b("Vector").getViewportDimensions(),d=c.x;c=c.x/2;return new(b("Vector"))(d,c)}else return a};d.getVideoElement=function(a){return b("DOM").scry(this.videoStage,"._ox1")[0]};d.getVideoComponentsHeight=function(a){var c=0;a=b("Parent").bySelector(a,"._1c_u");if(!a)return 0;a=b("DOM").scry(a,"._2i84");if(a.length){a=a[0].getBoundingClientRect();c=a.bottom-a.top}return c};d.handleServerError=function(a,c){b("DOM").setContent(this.errorBox,a),this.storeFromData(c)};d.fixButtonText=function(a){if(!this.buttonTruncateGk)return;var c=b("DOM").scry(a,".photosTruncatingUIButton");a=parseInt(b("Style").get(a,"width"),10);if(a>u){a={tagPhoto:i._("Tag photo"),doneTagPhoto:i._("Finished tagging"),addLocation:i._("Add location"),editPhoto:i._("Edit")};for(var d=0;d<c.length;d++){var e=c[d];b("CSS").addClass(e,"_2n0k");b("Tooltip").set(e,a[e.getAttribute("data-buttonname")],"below","center")}}};d._clearUFIContainers=function(){Object.entries(this.ufiContainers).forEach(function(a){a[0];a=a[1];return a&&b("DOM").empty(a)})};d._swapUFI=function(){var a=this;this.stream.getCurrentUFIRoots(function(c,d){var e=c.ufiMainRoot,f=c.ufiComposerRoot;c=c.ufiStageActionsRoot;var g=a.ufiContainers,h=g.ufiMainContainer,i=g.ufiComposerContainer;g=g.ufiStageActionsContainer;h&&b("DOM").setContent(h,e);i&&b("DOM").setContent(i,f);g&&b("DOM").setContent(g,c);d&&d.emit("inserted")})};d.swapData=function(){var a=this,d=this.stream.getCurrentHtml();this._bodyMutationObserver&&this._bodyMutationObserver.disconnect();if(d){this.setLoadingState(c.STATE_HTML,!1);this._swapUFI();this._bodyMutationObserver==null&&(this._bodyMutationObserver=new(b("MutationObserver"))(function(b){a.adjustScrollerIfNecessary()}));this.rhcBody instanceof Node&&this._bodyMutationObserver.observe(this.rhcBody,{attributes:!1,characterData:!1,childList:!0,subtree:!0});for(var e in d){var f=b("ge")(e);f&&b("DOM").setContent(f,d[e])}f=b("ge")("photosTruncatingUIButtonGroup");f&&this.fixButtonText(f);d=this.stream.getCurrentImageData();e=d!=null?d.info:{};b("Arbiter").inform("PhotoSnowlift.DATA_CHANGE",Object.assign(e!=null?e:{},{movement:this.movementDelta,isSpherical:this.isSpherical()}),"state");this.movementDelta=0;this.stream.getCurrentExtraData()&&b("Arbiter").inform("PhotoSnowlift.EXTRA_DATA_CHANGE",this.stream.getCurrentExtraData(),"state")}this.adjustScroller();this.scrollableArea.showScrollbar({hideAfterDelay:!0});this.adjustForNewData();b("CSS").conditionClass(this.details,"_6iil",!0);b("CSS").conditionClass(this.rhcBody,"_72zy",!0);b("CSS").conditionClass(this.rhcHeader,"_72zz",!0);b("CSS").conditionClass(this.scroller,"_72z-",!0)};d.updateTotalCount=function(a,c,d){var e=this.stream.getCurrentHtml();if(e){var f=b("$")("fbPhotoSnowliftPositionAndCount");b("DOM").replace(f,d);f=d;b("CSS").show(f);d="fbPhotoSnowliftPositionAndCount";e[d]=Array.from(f.childNodes)}this.stream.setTotalCount(a);this.stream.setFirstCursorIndex(c)};d.addPhotoFbids=function(a,b,c,d){if(d&&this.sessionID&&d!=this.sessionID)return;d=this.stream.getCursor()===null;this.shouldRenderVideoPivots&&!this._videoSameAsSource&&(this.stream.fbidList=[]);this.stream.attachToFbidsList(a,b,c);c&&d&&this.page(0,!0);this.pivots&&c&&this.pivots.setCycleCount(this.stream.calculateDistance(this.stream.getCursor(),this.stream.firstCursor));!this.pagersShown&&this.stream.canPage()&&this.setStagePagersState("ready");this.setLeftAndRightPagersState();if(this.shouldRenderVideoPivots&&!this._videoSameAsSource){a=this.stream.getCursor();b=this.stream.calculateDistance(a,this._mediaFBID);this.stream.moveCursor(b)}};d.attachTagger=function(a,c,d){b("DOM").appendContent(this.stageActions,a),c&&c.setTokenarea(this.taglist),d&&b("DOM").appendContent(b("DOM").find(a,"div.faceBox"),d)};d.setAuthorName=function(a,c){var d=b("Parent").bySelector(c,".rhc");if(d){this.previousAuthorName=this.currentAuthorName;this.currentAuthorName=a;if(this._navHistory.length>1&&this.previousAuthorName){d=this._navHistory[this._navHistory.length-2];this.backButton=b("ReactDOM").render(o.jsx(b("PhotoSnowliftBackLink.react"),{href:d,name:this.previousAuthorName,visible:!0}),c,"PhotoSnowlift.js")}else this.backButton=b("ReactDOM").render(o.jsx(b("PhotoSnowliftBackLink.react"),{visible:!1}),c,"PhotoSnowlift.js")}};d.storeFromData=function(a){var d=this;if(!this.isOpen)return;a.pivots&&(this.pivotsCarouselElement=a.pivots);a.autoplay_option_screen_config&&(this.autoplayOptionScreenConfig=a.autoplay_option_screen_config,this.autoplayOptionScreenConfig&&this.autoplayOptionScreenConfig.enabled&&this.addHaltAutoplaySubscription());this.shouldRenderVideoPivots=a.should_render_pivots;if(a.ssid&&this.sessionID&&this.sessionID!=a.ssid)return;if("error"in a){this.stream.storeToCache(a);this.checkState(c.STATE_ERROR);return}if(this.didReceivePayloadHavingInitProperty===!1&&Object.prototype.hasOwnProperty.call(a,"init")===!1){this.payloadsReceivedBeforePayloadHavingInitProperty.push(a);return}var e=this.stream.storeToCache(a);if("init"in a){var f;this.shouldRenderVideoPivots&&(this._videoSameAsSource=a.init.videoSameAsSource);this._mediaFBID=a.init.fbid;this._albumFBID=a.init.album_fbid;this._isAlbum=a.init.is_album;this._albumOwnerName=a.init.album_owner_name;this._autoplayVideos=a.init.autoplay_videos;this._autoplayNextVideo=a.init.autoplay_next_video;this._referrerProfileID=a.init.referrer_profile_id;this._ownerID=a==null?void 0:(f=a.image[this._mediaFBID])==null?void 0:(f=f.info)==null?void 0:f.owner}else this._preloadNextVideo();f="init"in e;f&&(this.initialDataFetched(e.init),this.openExplicitly&&(this.replaceUrl=!0,b("goURI")(this.stream.getCurrentImageData().info.permalink)),this.stream.canPage()&&this.setStagePagersState("ready"),this.setLeftAndRightPagersState());"image"in e&&this.checkState(c.STATE_IMAGE_DATA,f);"data"in e&&this.checkState(c.STATE_HTML);if(Object.prototype.hasOwnProperty.call(a,"init")){this.didReceivePayloadHavingInitProperty=!0;if(this.payloadsReceivedBeforePayloadHavingInitProperty.length){f=[].concat(this.payloadsReceivedBeforePayloadHavingInitProperty);this.payloadsReceivedBeforePayloadHavingInitProperty.length=0;f.forEach(function(a){(n||(n=b("ErrorUtils"))).applyWithGuard(function(){d.storeFromData(a)},null,null,null,"PhotoSnowlift::storeFromData() payload queue flusher")})}}e=this.stream.getCursor();a=a==null?void 0:(f=a.data)==null?void 0:(a=f[e])==null?void 0:(f=a.ufi_config)==null?void 0:(e=f.props)==null?void 0:e.defaultActorID;a!=null&&(this.actorID=a)};d.setLeftAndRightPagersState=function(){this.stream.isNonCircularPhotoSet()&&(b("CSS").conditionClass(this.root,"disableLeft",!this.stream.nonCircularPhotoSetCanPage(-1)),b("CSS").conditionClass(this.root,"disableRight",!this.stream.nonCircularPhotoSetCanPage(1)));if(this.snowflake){b("CSS").conditionClass(this.root,"disableLeft",this.stream.getCursor()==this.firstInSet);var a=this.stream.getCursorAt(this.stream.calculatePositionForMovement(1));b("CSS").conditionClass(this.root,"disableRight",a==this.firstInSet)}};d.setStagePagersActivated=function(a){b("CSS").hasClass(this.root,"pagingActivated")!==a&&b("CSS").conditionClass(this.root,"pagingActivated",a)};d.setStagePagersState=function(a){switch(a){case"ready":b("CSS").addClass(this.root,"pagingReady");this.pagersShown=!0;return;case"disabled":case"reset":b("CSS").removeClass(this.root,"pagingReady");return}};d.deletePhoto=function(a){this.closeRefresh()};d.closeRefresh=function(){this.refreshOnClose=!0,this.spotlight.hide()};d.onUpdateTagBox=function(a,c){c.version==b("PhotosConst").VIEWER_SNOWLIFT&&this.updateTagBox(c.id,c.approve)};d.isSpherical=function(){var a=this.stream.getCurrentImageData();return Boolean(a&&a.spherical)||this.thumbSpherical};d._log=function(a){return!1};d._enableMouseOver=function(){this._disableMouseOver=!1};d._interceptMouseOver=function(a){this._disableMouseOver&&a.kill()};d.isReturningToStart=function(){return!!this.returningToStart};d._pauseVideoIfNeeded=function(){if(this._videoPlayerStateManager){var a="video_data_switch";this._videoPlayerStateManager.pause(a);b("VideoPlayerAbortLoadingExperiment").canAbort&&this._abortVideoWhenSwitch&&this._videoPlayerStateManager.abortLoading();this._videoPlayerStateManager.hasOption("PhotoSnowlift","isInSnowlift")&&this._videoPlayerStateManager.unregisterOption("PhotoSnowlift","isInSnowlift");this._videoPlayerStateManager.emit("PhotoSnowlift/exitSnowlift")}};d._destroyVideoIfNeeded=function(a){a&&b("SnowliftDestroyVideoPlayerExperiment").destroyVideoOnExit&&(a.destroy(),this._vpcsToDestroyOnDestroy["delete"](a))};d.setIsLiveBroadcast=function(){this._isLiveBroadcast=!0};d.registerLiveInputBar=function(a){this._liveInputBar=a};d.setActionsMenuState=function(a){this._actionMenuOpen=a,a||this.hidePagers()};d.registerActionsMenu=function(a){var c=this;this._actionsMenuSubscriptionsHandler=new(b("SubscriptionsHandler"))();this._actionsMenuSubscriptionsHandler.addSubscriptions(a.getPopover().subscribe("show",function(){return c.setActionsMenuState(!0)}),a.getPopover().subscribe("hide",function(){return c.setActionsMenuState(!1)}))};c.getInstance=function(){c._instance||(c._instance=new c());return c._instance};c.initWithSpotlight=function(a,b){c.getInstance().init(a,b)};c.addPhotoFbids=function(a,b,d,e){c.getInstance().addPhotoFbids(a,b,d,e)};c.registerActionsMenu=function(a){var b=c.getInstance();b||j(0,198);b.registerActionsMenu(a)};c.registerLiveInputBar=function(a){c.getInstance().registerLiveInputBar(a)};c.setIsLiveBroadcast=function(){c.getInstance().setIsLiveBroadcast()};c.setReachedLeftEnd=function(){c.getInstance().setReachedLeftEnd()};c.setReachedRightEnd=function(){c.getInstance().setReachedRightEnd()};c.attachFollowFlyout=function(a){b("DOM").insertAfter(b("$")("fbPhotoSnowliftSubscribe"),a)};c.attachSubscribeFlyout=function(a){b("DOM").insertAfter(b("$")("fbPhotoSnowliftSubscribe"),a)};c.attachTagger=function(a,b,d){c.getInstance().attachTagger(a,b,d)};c.bootstrap=function(a,d){var e=String((l||(l=b("URI"))).getMostRecentURI().getQueryData().viewas),f=new l(a).getQueryData();if(!b("PhotoSnowliftLoader").shouldUseSnowlift(f,a,d,e))return;b("FunnelLogger").startFunnel(p);d!=null&&b("Parent").bySelector(d,"._18ia")!=null&&b("FunnelLogger").addFunnelTag(p,"via_search_media_module");c.getInstance().bootstrap(a,d)};c.closeRefresh=function(){c.getInstance().closeRefresh()};c.deletePhoto=function(a){c.getInstance().deletePhoto(a)};c.getImage=function(){return c.getInstance().getImage()};c.getImageId=function(){return c.getInstance().getImageId()};c.getLoadQuery=function(){return c.getInstance().getLoadQuery()};c.getRHCBody=function(){return c.getInstance().getRHCBody()};c.getRHCHeader=function(){return c.getInstance().getRHCHeader()};c.getRoot=function(){return c.getInstance().getRoot()};c.saveTagsFromPayload=function(a){c.getInstance().saveTagsFromPayload(a)};c.saveTagsFromPayloadDelayed=function(a){window.setTimeout(c.saveTagsFromPayload.bind(null,a),2e3)};c.handleServerError=function(a,b){c.getInstance().handleServerError(a,b)};c.setAuthorName=function(a,b){c.getInstance().setAuthorName(a,b)};c.storeFromData=function(a){c.getInstance().storeFromData(a)};c.swapData=function(){c.getInstance().swapData()};c.updateTotalCount=function(a,b,d){c.getInstance().updateTotalCount(a,b,d)};c.setVideoRotateURI=function(a){c.getInstance().videoRotateURI=a};return c}(b("classWithMixins")(b("PhotoViewer"),b("mixin")(b("ObjectionableContentFilterMixin"),b("DisableContextMenuMixin"))));Object.assign(a,{STATE_ERROR:"error",STATE_HTML:"html",STATE_IMAGE_PIXELS:"image_pixels",STATE_IMAGE_DATA:"image",LOADING_TIMEOUT:2e3,PAGER_FADE:3e3,FULL_SCREEN_PADDING:10,STAGE_NORMAL_MAX:b("PhotoSnowliftLoader").STAGE_NORMAL_MAX,STAGE_MIN:{x:520,y:520},PROFILE_PICTURE_BUTTON_WIDTH:140,SIDEBAR_SIZE_MAX:b("PhotoSnowliftLoader").SIDEBAR_SIZE_MAX,STAGE_CHROME:b("PhotoSnowliftLoader").STAGE_CHROME,VIDEO_BOTTOM_BAR_SPACE:50,GOPREV_AREA:120,TIMELINE_STRETCH_WIDTH:843,TIMELINE_STRETCH_MIN:480,MIN_TAG_DISTANCE:83,PADDING_MIN:40,MIN_UFI_HEIGHT:250,COLLECTIONS_UNTAGGED_PHOTOS:3,PHOTOS_OF_YOU_SUGGESTIONS:28,FRIENDS_IN_PHOTOS_SUGGESTIONS:31,PINNED_UFI_ADJUSTMENT:11,ADD_COMMENT_HEIGHT:54,_instance:null,touch:b("emptyFunction"),touchMarkup:b("emptyFunction")});e.exports=a}),null);
__d("FacebarStructuredFragment",[],(function(a,b,c,d,e,f){"use strict";function g(a,b){if(a&&b)return a.toLowerCase()==b.toLowerCase();else return!a&&!b}var h=new RegExp("[\\u0590-\\u07bf\\u08a0-\\u08ff\\ufb1d-\\ufb4f\\ufb50-\\ufefc\\u200e-\\u200f\\u202a-\\u202e]");a=function(){function a(a){this._text=String(a.text),this._uid=a.uid?String(a.uid):null,this._type=a.type?String(a.type):null,this._typeParts=null,this._isLocal=Boolean(a.isLocal),this._categoryName=a.categoryName?a.categoryName:null}var b=a.prototype;b.getText=function(){return this._text};b.getUID=function(){return this._uid};b.getType=function(){return this._type};b.getTypePart=function(a){return this._getTypeParts()[a]};b.getLength=function(){return this._text.length};b.isType=function(a){for(var b=0;b<arguments.length;b++)if(!g(arguments[b],this.getTypePart(b)))return!1;return!0};b.isLocal=function(){return this._isLocal};b.getCategoryName=function(){return this._categoryName};b.isWhitespace=function(){return/^\s*$/.test(this._text)};b.hasRTL=function(){return h.test(this._text)};b.toStruct=function(){return{text:this._text,type:this._type,uid:this._uid,isLocal:this._isLocal,categoryName:this._categoryName}};b.getHash=function(a){a=a!=null?this._getTypeParts().slice(0,a).join(":"):this._type;return String(a)+"::"+this._text};b._getTypeParts=function(){var a=this._typeParts;a==null&&(a=this._type!=null?this._type.split(":"):[],this._typeParts=a);return a};return a}();f["default"]=a}),66);
__d("FacebarStructuredText",["FacebarStructuredFragment","createArrayFromMixed"],(function(a,b,c,d,e,f){"use strict";var g=/\s+$/;function h(a){if(!a)return[];else if(a instanceof k)return a.toArray();else return b("createArrayFromMixed")(a).map(function(a){return new(b("FacebarStructuredFragment"))(a)})}function i(a){return new(b("FacebarStructuredFragment"))({text:a,type:"text"})}function j(a,c,d){var e=a.getText();c=e.replace(c,d);if(e!=c)return new(b("FacebarStructuredFragment"))({text:c,type:a.getType(),uid:a.getUID()});else return a}var k=function(){function a(a){this._fragments=a||[],this._hash=null}var b=a.prototype;b.matches=function(a,b){if(a){var c=this._fragments,d=a._fragments;return c.length==d.length&&!c.some(function(a,c){var e;!b&&a.getUID()?e=a.getUID()!=d[c].getUID():e=a.getText()!=d[c].getText()||a.getType()!=d[c].getType();return e||a.isLocal()!=d[c].isLocal()})}return!1};b.trim=function(){var b=null,c=null;this.forEach(function(a,d){a.isWhitespace()||(b===null&&(b=d),c=d)});if(c!==null){var d=this._fragments.slice(b,c+1);d.push(j(d.pop(),g,""));return new a(d)}else return new a([])};b.pad=function(){var b=this.getFragment(-1);if(b&&!g.test(b.getText())&&b.getText()!=="")return new a(this._fragments.concat(i(" ")));else return this};b.forEach=function(a){this._fragments.forEach(a);return this};b.matchType=function(a){var b=null;for(var c=0;c<this._fragments.length;c++){var d=this._fragments[c],e=d.isType.apply(d,arguments);if(e&&!b)b=d;else if(e||!d.isWhitespace())return null}return b};b.hasType=function(a){var b=arguments;return this._fragments.some(function(a){return!a.isWhitespace()&&a.isType.apply(a,b)})};b.isLocal=function(){return this._fragments.some(function(a){return a.isLocal()})};b.getCategoryName=function(){var a=this._fragments.filter(function(a){return a.getCategoryName()});return a.length>0?a[0].getCategoryName():null};b.endsOnType=function(a){var b=arguments,c=this._fragments[this._fragments.length-1];return!!c&&!c.isWhitespace()&&c.isType.apply(c,b)};b.isEmptyOrWhitespace=function(){return!this._fragments.some(function(a){return!a.isWhitespace()})};b.hasRTL=function(){return this._fragments.some(function(a){return a.hasRTL()})};b.isEmpty=function(){return this.getLength()===0};b.getFragment=function(a){return this._fragments[a>=0?a:this._fragments.length+a]};b.getCount=function(){return this._fragments.length};b.getLength=function(){return this._fragments.reduce(function(a,b){return a+b.getLength()},0)};b.toStruct=function(){return this._fragments.map(function(a){return a.toStruct()})};b.toArray=function(){return this._fragments.slice()};b.toString=function(){return this._fragments.map(function(a){return a.getText()}).join("")};b.getHash=function(){this._hash===null&&(this._hash=this._fragments.map(function(a){if(a.getUID())return"[["+a.getHash(1)+"]]";else return a.getText()}).join(""));return this._hash};a.fromStruct=function(b){return new a(h(b))};a.fromString=function(b){return new a([i(b.toString())])};return a}();e.exports=k}),null);
__d("FacebarSemanticQuery",["CurrentUser","URI"],(function(a,b,c,d,e,f){"use strict";var g,h="str",i=/\*[\w\-]+\(/g;function j(a){var c={me:b("CurrentUser").getID()};return Object.assign(c,Array.isArray(a.semantic_map)?{}:a.semantic_map)}function k(a,b){a=j(a);return typeof a[b]!=="undefined"?String(a[b]):b}function l(a){return new(g||(g=b("URI")))("/profile.php").addQueryData({id:a})}function m(a,c){c=[c];var d=[],e=a.browse_functions;a=a.search_path;while(c.length>0){var f=c.pop();if(!p(f)){d.push(f);continue}var i=f.substring(0,f.indexOf("(")),j=i;f=q(f);if(!e[i]){d=[];break}var k=e[i].minNumParams,l=e[i].maxNumParams;c.length>0&&(e[i].numParamsUnbounded?d.length>0&&(i+="-"+f.length):(f.length!=1&&f.length>k||f.length===0&&k!=l)&&(i+="-"+f.length));c.push(i);for(k=0;k<f.length;k++){if(f[k].length===0)continue;e[j].allowsFreeText?c.push(h+"/"+encodeURIComponent(encodeURIComponent(f[k]))):c.push(f[k])}}return new(g||(g=b("URI")))(a+d.join("/"))}function n(a){return a.replace(/[\'\"\[\]]/g,"")}function o(a,c){c=JSON.parse(c);var d=[];c.length>0&&(d=[c[0]]);c=[];var e=a.browse_functions;a=a.search_path;while(d.length>0){var f=d.pop();if(typeof f!=="object"){c.push(n(f));continue}var i=Object.keys(f)[0],j=i;f=f[i];if(!e[i]){c=[];break}var k=e[i].minNumParams,l=e[i].maxNumParams;d.length>0&&(e[i].numParamsUnbounded?c.length>0&&(i+="-"+f.length):(f.length!=1&&f.length>k||f.length===0&&k!=l)&&(i+="-"+f.length));d.push(i);for(k=0;k<f.length;k++){if(f[k].length===0)continue;e[j].allowsFreeText?d.push(h+"/"+encodeURIComponent(f[k])):d.push(f[k])}}return new(g||(g=b("URI")))(a+c.join("/"))}function p(a){return/^[a-z\-]+\(.*\)$/.test(a)}function q(a){if(!p(a)&&a.indexOf("param_")!==0)return[a];a=a.substring(a.indexOf("(")+1,a.length-1);return a.length===0?[]:r(a)}function r(a){var b=[],c=0,d=0;for(var e=0;e<a.length;++e)a[e]==","&&d===0?(b.push(a.substring(c,e)),c=e+1):a[e]=="("?d++:a[e]==")"&&d--;b.push(a.substring(c,a.length));return b}a=function(){function a(a,b,c){this.facebarConfig=a,this.unmapped=(b||"").trim(),this.mapped=k(a,this.unmapped),this.position=null,this.$1=c!==void 0?c:!1}var c=a.prototype;c.isEntity=function(){return/^\d+$/.test(this.mapped)};c.isShortcut=function(){return this.mapped.indexOf("shortcut(")===0};c.isImplemented=function(){return this.mapped&&!this.mapped.match(i)};c.isSemanticForest=function(){return this.$1};c.getUnimplemented=function(){return(this.mapped.match(i)||[]).map(function(a){return a.substr(1,a.length-2)})};c.getURI=function(){if(this.isEntity())return l(this.mapped);else if(this.isShortcut())return new(g||(g=b("URI")))(this.mapped.substr(9,this.mapped.length-10));else if(this.isSemanticForest())return o(this.facebarConfig,this.unmapped);else return m(this.facebarConfig,this.unmapped)};return a}();e.exports=a}),null);
__d("FacebarURI",["FacebarJSConstants","FacebarSemanticQuery","KeywordsSearchResultConfig","URI","WWWBase","XFacebookWorkChatInboxController"],(function(a,b,c,d,e,f){"use strict";var g,h={event:{ref:b("FacebarJSConstants").eventLinkRef},user:{fref:"ts"},page:{fref:"ts"},group:{fref:"ts"}},i={getSearchRawPrefix:function(){return"search"},getSearchPath:function(){return"/"+this.getSearchRawPrefix()+"/"},getChatURI:function(a){return b("XFacebookWorkChatInboxController").getURIBuilder().setString("thread_key","user:"+a.semantic).getURI()},getURI:function(a,c){var d=null,e=!c.song&&!c.isExtendedResult&&c.path;if(e)d=new(g||(g=b("URI")))(e),c.type in h&&d.addQueryData(h[c.type]);else if(b("KeywordsSearchResultConfig").use_seo_urls&&c.type===b("KeywordsSearchResultConfig").result_type&&c.semantic.startsWith("str/"))c.keywordType===b("FacebarJSConstants").keywordTypes.local_category?d=new(g||(g=b("URI")))("/search/places").addQueryData("q",c.keyword?c.keyword:c.text):d=new(g||(g=b("URI")))(b("KeywordsSearchResultConfig").seo_top_url).addQueryData("q",c.keyword?c.keyword:c.text);else{e=new(b("FacebarSemanticQuery"))(a,c.semantic);e&&e.isImplemented()&&(d=e.getURI());c.keywordType===b("FacebarJSConstants").keywordTypes.local&&(c.isSingleState?d.addQueryData("surface","sist"):c.isRecent?d.addQueryData("surface","rese"):d.addQueryData("surface","tyah"))}return d&&i.getQualifiedURI(d)},getQualifiedURI:function(a){a=new(g||(g=b("URI")))(a);if(!a.getDomain()){var c=new(g||(g=b("URI")))(b("WWWBase").uri);a.setProtocol(c.getProtocol()).setDomain(c.getDomain()).setPort(c.getPort())}return a}};e.exports=i}),null);
__d("FacebarKeywordSearchUtils",["Arbiter","Base64","FBLogger","FacebarJSConstants","FacebarStructuredText","FacebarURI","KeywordsSearchResultConfig","URI","XBrowseQueryController"],(function(a,b,c,d,e,f,g){"use strict";var h=function(a){var b=0;while(b<a.length)a[b].exactMatchKeyword?a.splice(b,1):++b},i=null;function a(a,b,c){if(!b.length)return;var e,f;for(var g=0,i=b.length;g<i;g++){f=b[g];if(f.type==="grammar")continue;e=!0;break}if(!e)return;g=j(a);if(!g)return;i=Math.min(b.length,c);a=i;for(var k=0;k<i;k++){f=b[k];if(f.exactMatchKeyword)return;f.cost>d("KeywordsSearchResultConfig").default_cost&&--a;if(f.type!==d("KeywordsSearchResultConfig").result_type)continue;g.backendCost=f.cost+d("KeywordsSearchResultConfig").exact_match_cost_delta_from_best;g.cost=f.backendCost;h(b);b.splice(k,0,g);return}h(b);b.splice(Math.min(Math.min(i,c-1),a),0,g)}function j(a){if(!a||a.is_empty||!a.raw_text)return null;var b=a.raw_text.toLowerCase().replace(/\s{2,}/g," ").trim(),c=d("KeywordsSearchResultConfig").query_prefix_blocklist;for(var e=0;e<c.length;e++)if(b.startsWith(c[e]))return null;e=k(b);return l(e,a.cache_id.length)}function b(a){var b=a.getFragment(0).getUID();a=a.getFragment(0).getText();b=b+"/local_search";var e=d("FacebarURI").getQualifiedURI(new(c("URI"))("/search/"+b).addQueryData("surface","sist"));return{semantic:b,text:a,type:d("KeywordsSearchResultConfig").result_type,resultsSetType:d("KeywordsSearchResultConfig").result_set_type,uid:d("KeywordsSearchResultConfig").uid_prefix+a,iconClass:d("KeywordsSearchResultConfig").icon_class,keywordType:d("FacebarJSConstants").keywordTypes.local,uri:e,structure:c("FacebarStructuredText").fromString(a)}}function k(a){var b=null,e=null,f=null,g=null;d("KeywordsSearchResultConfig").gsv2_results_page?(i!=null&&i.tab!=null?(f=i.browseEdge,g=i.tab):(f=d("KeywordsSearchResultConfig").gsv2_browse_edge,g="top"),e="str/"+encodeURIComponent(a).replace(/%20/g,"+")+"/"+f,b=c("XBrowseQueryController").getURIBuilder().setEnum("searchtype",g).setString("q",a).getURI()):(b=d("FacebarURI").getQualifiedURI(new(c("URI"))(d("KeywordsSearchResultConfig").results_page_url).addQueryData("q",a)),e=d("KeywordsSearchResultConfig").shortcut+"("+b.toString()+")");i==null&&d("KeywordsSearchResultConfig").use_seo_urls&&(b=d("FacebarURI").getQualifiedURI(new(c("URI"))(d("KeywordsSearchResultConfig").seo_top_url).addQueryData("q",a)));return{semantic:e,text:a,type:d("KeywordsSearchResultConfig").result_type,resultsSetType:d("KeywordsSearchResultConfig").result_set_type,uid:d("KeywordsSearchResultConfig").uid_prefix+a,iconClass:d("KeywordsSearchResultConfig").icon_class,uri:b,structure:c("FacebarStructuredText").fromString(a)}}function e(){i=null}function l(a,b){b={semantic:a.semantic,structure:[{type:"grammar",text:a.text,uid:a.semantic}],type:a.type,resultsSetType:a.resultsSetType,cost:d("KeywordsSearchResultConfig").default_cost,cache_id_length:b,parse:{display:[{type:"grammar",uid:d("KeywordsSearchResultConfig").uid_prefix+a.text}],remTokens:[],suffix:""},iconClass:a.iconClass,exactMatchKeyword:!0};b.tuid=JSON.stringify({semantic:b.semantic,structure:b.structure});return b}function f(a){return c("Base64").encode(JSON.stringify(a)).replace(/\=+$/,"")}function m(a){a=a.getQueryData().ref;if(a==null)return null;var b;try{b=JSON.parse(c("Base64").decode(a))}catch(a){c("FBLogger")("search").warn("Could not parse TBrowseURIRequestParams")}return b}c("Arbiter").subscribe("FacebarTypeahead.persistentTabs",function(a,b){i=b});g.addExactMatch=a;g.getExactMatchKeywordResult=j;g.makeFacebarEntryForLocalPage=b;g.makeFacebarEntry=k;g.clearSelectedTabInfo=e;g._makeFacebarResult=l;g.encodeFacebarURIParams=f;g.decodeFacebarURIParams=m}),98);
__d("PlacesSearchClickTypeEnums.react",[],(function(a,b,c,d,e,f){"use strict";a="place_saved";b="place_save";c="place_filters";d="place_friend_context";e="like";var g="message",h="place_category",i="place_name",j="place_rating_count",k="place_more_photos",l="place_photos",m="place_map_search_button",n="place_map",o="place_order",p="spotlight_snippet",q="page_cta",r="get_directions",s="see_menu";f.SAVED=a;f.SAVE=b;f.FILTERS=c;f.FRIEND_CONTEXT=d;f.LIKE=e;f.MESSAGE=g;f.CATEGORY=h;f.NAME=i;f.RATING_COUNT=j;f.MORE_PHOTOS=k;f.PHOTOS=l;f.MAP_SEARCH_BUTTON=m;f.MAP=n;f.ORDER=o;f.SPOTLIGHT_SNIPPET=p;f.PAGE_CTA=q;f.DIRECTIONS=r;f.MENU=s}),66);
__d("PlacesSearchNetworkErrorEntityCard.react",["cx","fbt","Image.react","ImageBlock.react","InlineBlock.react","XUICard.react","XUIText.react","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return j.jsx("div",{children:j.jsx(c("XUICard.react"),{className:"_52ju _2pia _2pi3 _3-95",children:j.jsxs(c("ImageBlock.react"),{spacing:"medium",children:[j.jsx(c("Image.react"),{width:100,height:100,className:"_43zr",src:"/images/browse/no-results-general.png"}),j.jsxs(c("InlineBlock.react"),{alignv:"middle",height:100,className:"_52ju _58lj _2pi8",children:[j.jsx(c("XUIText.react"),{size:"header4",weight:"normal",display:"block",children:i._("There was an error and we couldn't find any results")}),j.jsx(c("XUIText.react"),{size:"meta1",weight:"normal",display:"block",className:"_43zq",children:i._("Discover other places by using the filters")})]})]})})})};return b}(j.Component);g["default"]=a}),98);
__d("PlacesSearchNoResultsEntityCard.react",["cx","fbt","Image.react","ImageBlock.react","InlineBlock.react","XUICard.react","XUIText.react","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return j.jsx("div",{children:j.jsx(c("XUICard.react"),{className:"_24on _52ju _2pia _2pi3",children:j.jsxs(c("ImageBlock.react"),{spacing:"medium",children:[j.jsx(c("Image.react"),{width:100,height:100,className:"_43zr",src:"/images/browse/no-results-general.png"}),j.jsxs(c("InlineBlock.react"),{alignv:"middle",height:100,className:"_52ju _58lj _2pi8",children:[j.jsx(c("XUIText.react"),{size:"header4",weight:"normal",display:"block",children:i._("We couldn't find anything for {query_text}",[i._param("query_text",j.jsx(c("XUIText.react"),{size:"header4",weight:"bold",children:this.props.searchText}))])}),j.jsx(c("XUIText.react"),{size:"meta1",weight:"normal",display:"block",className:"_43zq",children:i._("Looking for people or posts? Try entering a name, location or different words.")})]})]})})})};return b}(j.Component);g["default"]=a}),98);
__d("PlacesSearchResultDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){return a.call(this,b)||this}return b}(c("ExplicitRegistrationReactDispatcher"));b=new a({strict:!0});g["default"]=b}),98);
__d("PlacesSearchResultActionTypes",["keyMirror"],(function(a,b,c,d,e,f,g){"use strict";a=c("keyMirror")({UPDATE_FILTERS:null,UPDATE_MAP:null,UPDATE_MAP_PIN:null,RESET_MAP_PIN:null});b=a;g["default"]=b}),98);
__d("PlacesSearchResultMapStore",["FluxReduceStore","PlacesSearchResultActionTypes","PlacesSearchResultDispatcher","immutable"],(function(a,b,c,d,e,f,g){"use strict";a={places_result:null,pin_number:-1};var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(c("immutable").Record(a));b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=a.call.apply(a,[this].concat(f))||this,d.reduce=function(a,b){switch(b.type){case c("PlacesSearchResultActionTypes").UPDATE_MAP:return a.set("places_result",b.payload);case c("PlacesSearchResultActionTypes").UPDATE_MAP_PIN:return a.set("pin_number",b.payload);case c("PlacesSearchResultActionTypes").RESET_MAP_PIN:return a.set("pin_number",-1);default:return a}},b)||babelHelpers.assertThisInitialized(d)}var d=b.prototype;d.getInitialState=function(){return new h()};d.getPlacesResult=function(){return this.getState().get("places_result")};d.getPinNumber=function(){return Number(this.getState().get("pin_number"))};return b}(c("FluxReduceStore"));b.__moduleID=f.id;d=new b(c("PlacesSearchResultDispatcher"));g["default"]=d}),98);
__d("PlacesSearchResultUpdateMapAction",["PlacesSearchResultActionTypes","PlacesSearchResultDispatcher"],(function(a,b,c,d,e,f,g){"use strict";function a(a){c("PlacesSearchResultDispatcher").dispatch({type:c("PlacesSearchResultActionTypes").UPDATE_MAP,payload:a})}function b(a){c("PlacesSearchResultDispatcher").dispatch({type:c("PlacesSearchResultActionTypes").UPDATE_MAP_PIN,payload:a})}function d(){c("PlacesSearchResultDispatcher").dispatch({type:c("PlacesSearchResultActionTypes").RESET_MAP_PIN,payload:null})}g.updateMap=a;g.updatePinNumber=b;g.resetPinNumber=d}),98);
__d("PlacesSearchSessionLogger",["BanzaiLogger","collectDataAttributes","pageID"],(function(a,b,c,d,e,f,g){"use strict";var h="PlacesSearchSessionLoggerConfig";function i(a){a=c("collectDataAttributes")(a,["et"]);return!a.et||!a.et.click_point?!1:a.et}function j(a,b){a={event:"click",session_id:c("pageID"),target:a,target_data:b};c("BanzaiLogger").log(h,a)}function a(a,b){a={event:a,session_id:c("pageID"),target_data:b};c("BanzaiLogger").log(h,a)}function b(a){a=a.target||a.srcElement;a=i(a);a!==!1&&j(a.click_point,a.data)}g.logTarget=j;g.logEvent=a;g.handleEvent=b}),98);
__d("XAsyncPlacesSearchResultsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/browse/async/places/",{query:{type:"String"},original_query:{type:"String"},cursor:{type:"String"},filters:{type:"StringVector"},page:{type:"Int"},bounds:{type:"String"},applied_rp_filters:{type:"String"},applied_instant_filters:{type:"String"}})}),null);
__d("XTopChartsRootPageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/places/",{city_query:{type:"String"}})}),null);
__d("PlacesSearchResultList.react",["cx","fbt","AsyncRequest","BrowsePlacesPerfTypedLogger","DOMContainer.react","FBMorePager.react","Link.react","List.react","PageTransitions","PlacesSearchEntityCard.react","PlacesSearchNoResultsEntityCard.react","PlacesSearchResultDispatcher","PlacesSearchResultMapStore","PlacesSearchResultUpdateMapAction","PlacesSearchSessionLogger","URI","XAsyncPlacesSearchResultsController","XTopChartsRootPageController","XUICard.react","XUISpinner.react","XUIText.react","getViewportDimensions","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=Math.ceil(c("getViewportDimensions")().height/2);a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,b)||this;c.state={pagingOptions:b.pagingOptions,isLoading:!1,contextLoadingStatusMap:c.$5(b.results),hasNextPage:!0,results:b.results};c.$2=0;c.$3=Date.now()/1e3;c.$4=c.$5(b.results);return c}var e=b.prototype;e.UNSAFE_componentWillMount=function(){c("PlacesSearchResultDispatcher").explicitlyRegisterStores([c("PlacesSearchResultMapStore")])};e.UNSAFE_componentWillReceiveProps=function(a){this.$1&&this.$1.abandon(),this.setState({pagingOptions:a.pagingOptions,isLoading:!1,hasNextPage:a.hasNextPage,results:a.results})};e.render=function(){if(this.props.overrideResultsWithLoader){this.$2=0;return j.jsx("div",{className:"_2to_",children:j.jsx(c("XUISpinner.react"),{size:"large"})})}else if(Object.keys(this.state.results).length===0){var a=null;this.props.dymLink!=null&&(a=j.jsx(c("DOMContainer.react"),{children:this.props.dymLink}));return j.jsxs("div",{children:[a,j.jsx(c("PlacesSearchNoResultsEntityCard.react"),{typeaheadSid:this.props.extra.typeaheadSid,searchText:this.props.extra.queryTitle})]})}a=null;this.state.hasNextPage?!this.state.isLoading?a=j.jsx("li",{children:this.$6()}):this.state.isLoading&&(a=j.jsx("div",{className:"_33_n",children:j.jsx(c("XUISpinner.react"),{size:"large"})})):a=j.jsxs("div",{className:"_4s4i",children:[j.jsx("hr",{className:"_kt"}),j.jsx("div",{className:"_24j",children:j.jsx("div",{className:"_64f _1zun",children:i._("End of results")})})]});var b=JSON.stringify({section:"main_column"}),d=null;this.props.extra.queryTitle&&(!this.props.useNewDesign||!this.props.loggedIn)&&(d=this.getHeader());var e=null;this.props.dymLink!=null&&(e=j.jsx(c("DOMContainer.react"),{children:this.props.dymLink}));return j.jsxs("div",{children:[e,this.$7(),d,j.jsxs(c("List.react"),{border:"none","data-bt":b,"data-testid":void 0,children:[this.$8(),a]})]})};e.getHeader=function(){var a=c("XTopChartsRootPageController").getURIBuilder().getURI(),b=null,d=[];this.props.cityInfo&&(d=[j.jsx(c("Link.react"),{href:a,rel:"noopener noreferrer",target:"_blank",children:i._("Places")},"placesLink"),j.jsx("span",{children:"\xa0\u203a\xa0"},"separator1"),j.jsx(c("Link.react"),{href:this.props.cityInfo.basicInfo.url,rel:"noopener noreferrer",target:"_blank",children:i._("{cityName}",[i._param("cityName",this.props.cityInfo.basicInfo.name)])},"cityLink")]);a=this.props.extra.parentCategoryInfo;a&&(d.push(j.jsx("span",{children:"\xa0\u203a\xa0"},"separator2")),d.push(j.jsx(c("Link.react"),{href:a.url,rel:"noopener noreferrer",target:"_blank",children:i._("{categoryName}",[i._param("categoryName",a.name)])},"parentCategoryLink")));a=this.props.extra.categoryInfo;a&&(d.push(j.jsx("span",{children:"\xa0\u203a\xa0"},"separator3")),this.props.extra.backUrl?d.push(j.jsx(c("Link.react"),{href:this.props.extra.backUrl,rel:"noopener noreferrer",target:"_blank",children:a.name},"categoryLink")):d.push(j.jsx("span",{children:a.name},"categoryName")));this.props.extra.demographicBreadcrumb&&(d.push(j.jsx("span",{children:"\xa0\u203a\xa0"},"separator4")),d.push(j.jsx("span",{children:this.props.extra.demographicBreadcrumb},"demographicName")));d&&(b=j.jsx("div",{className:"_51w8",children:d}));return j.jsx(c("XUICard.react"),{className:"_3qmp",children:j.jsxs("div",{className:"_51w9",children:[j.jsx("h1",{children:j.jsx(c("XUIText.react"),{size:"xlarge_DEPRECATED",weight:"bold",children:this.props.extra.queryTitle})}),b]})})};e.$9=function(){var a=this,b=this.state.pagingOptions.page||1,d=Math.max(1,b-1),e=new(c("URI"))(this.props.uriPath).setQueryData({page:d}),f=i._("Prev");f=j.jsxs("span",{children:["< ",f]});d=d===b;d||(f=j.jsx(c("Link.react"),{className:"_32-o",href:e,onClick:function(b){return a.$10(b,e)},children:f},"prevpagebutton"));b="_32-p _32-q"+(d?" _32-r":"");return j.jsx("div",{className:b,children:f})};e.$11=function(){var a=this,b=this.state.pagingOptions.page||1,d=this.state.pagingOptions.maxpage,e=Math.min(b+1,d),f=new(c("URI"))(this.props.uriPath).setQueryData({page:e});e=i._("Next");e=j.jsxs("span",{children:[e," >"]});d=d===b;d||(e=j.jsx(c("Link.react"),{className:"_32-o",href:f,onClick:function(b){return a.$10(b,f)},children:e},"nextpagebutton"));b="_32-s _32-q"+(d?" _32-r":"");return j.jsx("div",{className:b,children:e})};e.$6=function(){var a=this;if(this.state.pagingOptions.page&&this.state.pagingOptions.type==="paginate"){var b=this.state.pagingOptions.page,d=this.state.pagingOptions.maxpage;if(b===1&&d===1)return j.jsx("div",{});var e=[],f=function(d){d=d;var f=new(c("URI"))(a.props.uriPath).setQueryData({page:d}),g=j.jsx("span",{children:d}),h=d===b;h||(g=j.jsx(c("Link.react"),{className:"_32-o",href:f,onClick:function(b){return a.$10(b,f)},children:g},"pagebuttonlink"+d));h="_32-q"+(h?" _32-y":"");e.push(j.jsx("div",{className:h,children:g},"pagebutton"+d))};for(var g=1;g<=d;g++)f(g);return j.jsx("div",{className:"_32-z",children:j.jsxs(c("XUICard.react"),{className:"_32--",children:[this.$9(),e,this.$11()]})})}else if(this.state.hasNextPage)return j.jsx(c("FBMorePager.react"),{buffer:k,onMore:function(){return a.$12()},children:j.jsx("div",{})});else return j.jsx("div",{})};e.$10=function(a,b){a.preventDefault(),c("PageTransitions").go(b)};e.$12=function(){var a=this;!this.state.isLoading&&this.state.hasNextPage&&this.setState({isLoading:!0},function(){var b=c("XAsyncPlacesSearchResultsController").getURIBuilder().getURI();a.$1=new(c("AsyncRequest"))(b).setData({query:a.props.query,original_query:a.props.originalQuery,applied_rp_filters:a.props.extra.appliedRPFilters,applied_instant_filters:a.props.extra.appliedInstantFilters,cursor:a.state.pagingOptions.cursor}).setAbortHandler(function(){a.setState({isLoading:!1})}).setHandler(function(b){b=b.getPayload();a.$1=null;var c=b.hasNextPage;b.results&&b.results.length===0?(a.$2++,a.$2>2&&(c=!1),b.results={}):a.$2=0;a.setState({pagingOptions:b.pagingOptions,isLoading:!1,contextLoadingStatusMap:Object.assign(a.state.contextLoadingStatusMap,a.$5(b.results)),results:Object.assign(a.state.results,b.results),hasNextPage:c});a.props.useNewDesign&&d("PlacesSearchResultUpdateMapAction").updateMap(a.state.results)});d("PlacesSearchSessionLogger").logEvent("loadmore_request",JSON.stringify({city_id:a.props.cityID,query:a.props.query}));a.$1.send()})};e.$7=function(){return!this.props.isConvertedSetSearch||!this.props.useNewDesign?null:j.jsxs(c("XUICard.react"),{className:"_2ys6",children:[i._("Showing results for"),"\xa0",j.jsx("span",{className:"_2ys7",children:this.props.extra.queryTitle})]})};e.$13=function(a){this.props.useNewDesign&&d("PlacesSearchResultUpdateMapAction").updatePinNumber(a)};e.$8=function(){var a=this,b=Object.keys(this.state.results).length===1;return Object.keys(this.state.results).map(function(d,e){var f=a.$14(d,e);return j.jsx("li",{id:d+"anchor"+e,"data-bt":f,onMouseOver:function(){return a.$13(e)},children:j.jsx(c("PlacesSearchEntityCard.react"),{placeInfo:a.state.results[d],placeID:d,isLoggedIn:a.props.loggedIn,isContextLoading:a.state.contextLoadingStatusMap[d],loadedCallback:function(b,c){return a.$15(b,c)},isOnlySearchResult:b,pinIndex:e,useNewDesign:a.props.useNewDesign,savedListsGk:a.props.savedListsGk,query:a.props.query})},e)})};e.$14=function(a,b){return JSON.stringify({id:Number(a),rank:b})};e.$5=function(a){var b={};a=Object.keys(a);for(var c=0;c<a.length;c++){var d=a[c];b[d]=!0}return b};e.$15=function(a,b){this.$4[a]=!1;for(a in this.$4)if(this.$4[a])return;a=Date.now()/1e3;new(c("BrowsePlacesPerfTypedLogger"))().setMethodName(b).setExecutionTimeSecs(a-this.$3).log()};return b}(j.Component);a.defaultProps={overrideResultsWithLoader:!1,page:1};g["default"]=a}),98);
__d("PlacesSearchResultFiltersAction",["PlacesSearchResultActionTypes","PlacesSearchResultDispatcher"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){c("PlacesSearchResultDispatcher").dispatch({type:c("PlacesSearchResultActionTypes").UPDATE_FILTERS,payload:{filters:a,appliedFilterValues:b}})}g.updateFilters=a}),98);
__d("PlacesSearchResultFiltersStore",["FluxReduceStore","PlacesSearchResultActionTypes","PlacesSearchResultDispatcher","immutable"],(function(a,b,c,d,e,f,g){"use strict";a={filters:{},appliedFilterValues:[]};var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(c("immutable").Record(a));b=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=a.call.apply(a,[this].concat(f))||this,d.reduce=function(a,b){switch(b.type){case c("PlacesSearchResultActionTypes").UPDATE_FILTERS:return a.set("filters",b.payload.filters).set("appliedFilterValues",b.payload.appliedFilterValues);default:return a}},b)||babelHelpers.assertThisInitialized(d)}var d=b.prototype;d.getInitialState=function(){return new h()};d.getFilters=function(){return this.getState().get("filters")};d.getAppliedFilterValues=function(){return this.getState().get("appliedFilterValues")};return b}(c("FluxReduceStore"));b.__moduleID=f.id;d=new b(c("PlacesSearchResultDispatcher"));g["default"]=d}),98);
__d("XAsyncSearchResultsRegisterUserToTessaController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/browse/async/register_user_to_tessa/",{})}),null);
__d("PlacesSearchResults.react",["Arbiter","AsyncRequest","BrowseClientEventLogger","BrowsePlacesPerfTypedLogger","ClickableArea.react","FacebarKeywordSearchUtils","PageTransitions","PlacesSearchNetworkErrorEntityCard.react","PlacesSearchResultDispatcher","PlacesSearchResultFiltersAction","PlacesSearchResultFiltersStore","PlacesSearchResultList.react","PlacesSearchResultMapStore","PlacesSearchResultUpdateMapAction","PlacesSearchSessionLogger","SearchEntityModuleServerConstants","SubscriptionsHandler","URI","ViewableImpressionTracking","XAsyncPlacesSearchResultsController","XAsyncSearchResultsRegisterUserToTessaController","XBrowseQueryController","immutable","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=1e4,j=1,k=1e3,l=3e4,m="/search/",n=c("immutable").Map({PLACES_IN_SEARCH_KEYWORD:"/places-in",PLACES_VISITED_KEYWORD:"/places-visited",PLACES_SEARCH_KEYWORD:"/keywords_places",PLACES_CATEGORY_SEARCH:"/places"});a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,e){var f;f=a.call(this,b,e)||this;f.state={resultData:f.props.data,overrideResultsWithLoader:!1,showError:!1,dymLink:f.props.dymLink,cityInfo:f.props.cityInfo};f.$15=function(a){a.stopPropagation(),d("PlacesSearchSessionLogger").handleEvent(a)};b=Date.now()/1e3;new(c("BrowsePlacesPerfTypedLogger"))().setMethodName("placessearchresultlist.clientReceivedResponse").setExecutionTimeSecs(b-f.props.data.serverResponseReturnTime).log();f.$1=null;f.$4=0;f.$5=0;f.$6=!1;f.$2=function(a){if(f.$8(a)){c("PageTransitions").transitionComplete();return!0}return!1};f.$3=f.state.cityInfo?f.state.cityInfo.basicInfo.id:"";window.onpopstate=function(a){a=new(c("URI"))(a.state);f.$8(a)};return f}var e=b.prototype;e.$8=function(a){if(this.$9(a))return!1;var b=null;this.state.resultData.pagingOptions.type==="paginate"&&(b=1);isNaN(a.getQueryData().page)||(b=Number(a.getQueryData().page));var c=a.getPath(),d=n.count(function(a,b){return c.indexOf(a)===-1});if(n.count()===d)return!1;else if(c.indexOf(m)===-1)return!1;d=function(a){return a.slice(-1)==="/"?a.slice(0,-1):a};var e=d(c);d=d(this.state.resultData.uriPath);var f=this.state.resultData.pagingOptions.page;if(e!==d||b!==f){d=a.getQueryData();d.q&&(e+="?q="+d.q);this.$10(e.replace(m,""),e.replace(m,""),null,!1,!1,b,null)}return!0};e.$9=function(a){a=d("FacebarKeywordSearchUtils").decodeFacebarURIParams(a);return a!=null&&a.sid!=null?!0:!1};e.componentDidMount=function(){d("ViewableImpressionTracking").init();var a=Object.keys(this.props.data.results).length,e=a===0?"empty_load":"load";this.props.data.useNewDesign&&(d("PlacesSearchResultUpdateMapAction").resetPinNumber(),d("PlacesSearchResultUpdateMapAction").updateMap(a!==0?this.props.data.results:null));b.clientViewConfig=this.props.data.clientViewConfig;b.sessionID=this.props.data.sessionID;b.query=this.props.data.query;b.resultUnitIDs=this.props.data.resultUnitIDs!=null?this.props.data.resultUnitIDs:{};this.logImpression();a!==0&&this.props.data.loggedIn&&this.$11();d("PlacesSearchSessionLogger").logEvent(e,this.$12(this.props.data));c("PageTransitions").registerHandler(this.$2)};e.UNSAFE_componentWillMount=function(){var a=this;c("PlacesSearchResultDispatcher").explicitlyRegisterStores([c("PlacesSearchResultFiltersStore"),c("PlacesSearchResultMapStore")]);this.$7=new(c("SubscriptionsHandler"))();this.$7.addSubscriptions(c("Arbiter").subscribe("PlacesSearchResultMapCard/SearchThisArea",function(b,c){return a.$13(c)}),c("Arbiter").subscribe("PlacesSearchFilters/SelectedFilters",function(b,c){return a.$14(c)}))};e.componentWillUnmount=function(){c("PageTransitions").removeHandler(this.$2),this.$2=null,this.$7.release()};e.render=function(){var a=h.jsx(c("ClickableArea.react"),{onClick:this.$15,children:h.jsx("div",{children:h.jsx(c("PlacesSearchResultList.react"),babelHelpers["extends"]({cityInfo:this.state.cityInfo,overrideResultsWithLoader:this.state.overrideResultsWithLoader,useNewDesign:this.props.data.useNewDesign,cityID:this.$3,dymLink:this.state.dymLink,isConvertedSetSearch:this.props.data.isConvertedSetSearch,clientViewConfig:this.props.data.clientViewConfig,loggedIn:this.props.data.loggedIn},this.state.resultData))})});this.state.showError&&(a=h.jsx(c("PlacesSearchNetworkErrorEntityCard.react"),{}));return a};e.$11=function(){var a=this,b=c("XAsyncSearchResultsRegisterUserToTessaController").getURIBuilder().getURI(),e=JSON.stringify({city_id:this.$3,query:this.props.data.query});this.$1=new(c("AsyncRequest"))(b).setTimeoutHandler(i+this.$5*k,function(){a.$5===j?(d("PlacesSearchSessionLogger").logEvent("fail_to_register",e),a.$5=0):(a.$5++,d("PlacesSearchSessionLogger").logEvent("retry_to_register",e),a.$11())}).setErrorHandler(function(a){d("PlacesSearchSessionLogger").logEvent("fail_to_register",e)}).setHandler(function(b){a.$4=0;b=b.getPayload();d("PlacesSearchSessionLogger").logEvent(b.outcome,e);a.$1=null});this.$1.send()};e.$14=function(a){this.$10(this.state.resultData.query,this.state.resultData.originalQuery,a,!1,!1,null,null)};e.$13=function(a){this.$10(this.state.resultData.query,this.state.resultData.originalQuery,null,!1,!0,null,c("immutable").Map({w:a.getWest(),s:a.getSouth(),e:a.getEast(),n:a.getNorth()}))};e.$10=function(a,e,f,g,h,m,n){var o=this;n!==null&&(this.$6=!0);(f!==null||this.$16)&&this.setState({dymLink:null});var p={overrideResultsWithLoader:!0,showError:!1},q={overrideResultsWithLoader:!1,showError:!0};this.setState(p,function(){var p=JSON.stringify({city_id:o.$3,query:a}),r=c("XAsyncPlacesSearchResultsController").getURIBuilder().getURI(),s=f?f.map(function(a){return JSON.stringify(a)}):[];o.$1&&(d("PlacesSearchSessionLogger").logEvent("abandon",JSON.stringify({city_id:o.$3,query:o.$1.getData().query})),o.$1.abandon(),h||(o.$4=0));o.state.resultData.pagingOptions.type==="paginate"&&m===null&&(m=1);o.$1=new(c("AsyncRequest"))(r).setData({filters:s,query:a,original_query:e,page:m,bounds:JSON.stringify(n)}).setTimeoutHandler(o.props.isSandbox?l:i+o.$4*k,function(){o.$4===j?(d("PlacesSearchSessionLogger").logEvent("fail",p),o.$4=0,o.setState(q)):(o.$4++,d("PlacesSearchSessionLogger").logEvent("request",p),o.$10(a,e,f,g,!0,m,null))}).setErrorHandler(function(a){d("PlacesSearchResultUpdateMapAction").updateMap(null),d("PlacesSearchSessionLogger").logEvent("fail",p),o.setState(q)}).setHandler(function(a){var e=Date.now()/1e3;new(c("BrowsePlacesPerfTypedLogger"))().setMethodName("placessearchresultlist.clientReceivedResponse").setExecutionTimeSecs(e-o.props.data.serverResponseReturnTime).log();o.$4=0;e=a.getPayload();o.$1=null;a={query:e.query,originalQuery:e.originalQuery,pagingOptions:e.pagingOptions,hasNextPage:e.hasNextPage,results:e.results,extra:e.extra,uriPath:e.uriPath,useNewDesign:o.props.data.useNewDesign,sessionID:e.sessionID,loggedIn:e.loggedIn,isConvertedSetSearch:e.isConvertedSetSearch,serverResponseReturnTime:e.serverResponseReturnTime,isNearbySearch:e.isNearbySearch,isCategorySearch:e.isCategorySearch,savedListsGk:e.savedListsGk,clientViewConfig:e.clientViewConfig};o.setState({resultData:a,overrideResultsWithLoader:!1,cityInfo:e.cityInfo});b.clientViewConfig=e.clientViewConfig;b.sessionID=e.sessionID;b.resultUnitIDs=babelHelpers["extends"]({},b.resultUnitIDs,e.resultUnitIDs);f===null&&o.setState({dymLink:null});var h=Object.keys(a.results).length,i=h===0?"empty_reload":"reload";o.props.data.useNewDesign&&(d("PlacesSearchResultUpdateMapAction").resetPinNumber(),d("PlacesSearchResultUpdateMapAction").updateMap(h!==0?a.results:null));d("PlacesSearchResultFiltersAction").updateFilters(e.extra.filters,e.extra.appliedFilters);d("PlacesSearchSessionLogger").logEvent(i,o.$12(a));h=c("XBrowseQueryController").getURIBuilder().setEnum("searchtype","places").setString("q",e.extra.queryTitle).setString("bqf",e.query).setString("f",e.encrypted_query).getURI();(g||n)&&c("PageTransitions").go(h)});d("PlacesSearchSessionLogger").logEvent("request",p);o.$1.send()})};e.$12=function(a){var b=a.extra.appliedFilters,c=b.indexOf(this.$3);c>-1&&b.splice(c,1);return JSON.stringify({city_id:this.$3,filters:JSON.stringify(b),query:a.query,results:JSON.stringify(Object.keys(a.results))})};b.getLoggingData=function(a){if(!b.clientViewConfig||!b.sessionID)return null;var d=c("SearchEntityModuleServerConstants").WWW_GRAPH_SEARCH_RESULTS_TRACKABLE_CODE;d=d+JSON.stringify({id:a.resultID,item_type:"result",module_result_type:c("SearchEntityModuleServerConstants").TYPE_TO_BROWSE_TYPE.place,raw_id:parseInt(a.resultID,10),session_id:b.sessionID,vertical:"content",subrequests:JSON.stringify([b.query]),unit_id:b.resultUnitIDs[a.resultID],unit_id_click_type:"graph_search_results_item_in_module_tapped",unit_id_result_id:a.resultID});return{"data-xt":d,"data-gt":JSON.stringify({type:"xtracking",xt:d}),"data-xt-vimp":JSON.stringify(b.clientViewConfig),"data-vistracking":"1","data-insertion-position":0,"data-bt":JSON.stringify({ct:a.clickType})}};e.logImpression=function(){var a=b.getLoggingData({resultID:"",clickType:""});a&&d("BrowseClientEventLogger").logImpression({xt:a["data-xt"]})};return b}(h.Component);g["default"]=a}),98);
__d("PlacesSearchOptionalFriendContextRowOrDescription.react",["cx","fbt","AsyncDialog","AsyncRequest","HovercardLink","Link.react","PlacesSearchClickTypeEnums.react","PlacesSearchResults.react","ProfileBrowserLink","ProfileBrowserTypes","SeeMore.react","TextWithEntities.react","TooltipLink.react","XUIText.react","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.render=function(){var a=this,b=null;if(this.props.contextInfo){var d=this.props.contextInfo;b=j.jsx(c("TextWithEntities.react"),{highlightEntities:!0,aggregatedRanges:d.aggregatedranges,text:d.text+".",ranges:d.ranges,interpolator:function(b,c){return a.$1(b,c)}})}d=this.$2();if(this.props.showContextAndDescription===!0)return j.jsxs("div",{className:"_17mw",children:[b," ",b!==null?" ":null,d]});else if(b)return j.jsx("div",{className:"_17mx",children:b});else if(d)return j.jsx("div",{className:"_17my",children:d});else return j.jsx("div",{})};e.$1=function(a,b){var e=this;if(b.count){var f=this.$3(b.entities,b.count,10);return j.jsx(c("TooltipLink.react"),{className:"_17mz",tooltip:f,onClick:function(){return e.$4()},children:a})}f=b.entity;return j.jsx(c("Link.react"),babelHelpers["extends"]({className:"_17mz",href:f.url,target:"_blank","data-hovercard":d("HovercardLink").constructEndpoint({id:f.id,uri:f.url}),"data-et":JSON.stringify({click_point:"friend_context",data:JSON.stringify({entity_id:this.props.placeID})})},c("PlacesSearchResults.react").getLoggingData({resultID:this.props.placeID,clickType:d("PlacesSearchClickTypeEnums.react").FRIEND_CONTEXT}),{children:a}))};e.$3=function(a,b,c){var d=c;b>c&&d--;a=a.slice(0,Math.min(a.length,d)).map(function(a){return a.name}).join("\n");b>c&&(a=i._("{newLinedFriendNames} and {totalFriends} others",[i._param("newLinedFriendNames",a+"\n"),i._param("totalFriends",b-d)]));return a};e.$4=function(){var a=d("ProfileBrowserLink").constructDialogURI(this.props.contextInfo.type==="like"?c("ProfileBrowserTypes").FRIENDED_FANS_OF:c("ProfileBrowserTypes").FRIEND_CHECKINS,{page_id:this.props.placeID,order_by:"coefficient"}).toString();d("AsyncDialog").send(new(c("AsyncRequest"))(a))};e.$2=function(){if(!this.props.descriptionInfo)return null;if(this.props.descriptionInfo.wikiDescription){var a=this.props.descriptionInfo.wikiDescription.text;return a.length>=150?j.jsxs(c("SeeMore.react"),{children:[a.substring(0,150),a.substring(150)]}):j.jsx(c("XUIText.react"),{children:a})}else if(this.props.descriptionInfo.snippetDescription){a=null;var b=this.props.descriptionInfo.snippetDescription.snippets;b.length===1?a=i._("People talk about {snippet1}.",[i._param("snippet1",b[0])]):b.length===2?a=i._("People talk about {snippet1} and {snippet2}.",[i._param("snippet1",b[0]),i._param("snippet2",b[1])]):b.length>2&&(a=i._("People talk about {snippet1}, {snippet2} and {snippet3}.",[i._param("snippet1",b[0]),i._param("snippet2",b[1]),i._param("snippet3",b[2])]));return a}return null};return b}(j.Component);g["default"]=a}),98);
__d("PlacesSearchEntityCard.react",["cx","FBTilesMap__DEPRECATED.react","GeoCoordinates","LeafletMarker.react","LeafletView","PhotoSnowlift","PlacesSearchEntityCardDetails.react","PlacesSearchEntityCardPhotos.react","XUICard.react","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react","leaflet","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=14,k={dragging:!0,zoomControl:!0,touchZoom:!1,doubleClickZoom:!0,scrollWheelZoom:!0,boxZoom:!1,keyboard:!1,tab:!1},l=c("leaflet").icon({iconUrl:"/images/maps/pins/pin-default.png",iconSize:[24,32],iconAnchor:[12,32],popupAnchor:[0,-32]});a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this,b,d)||this;e.$3=function(a,b){if(b===null||!e.props.isLoggedIn)return;a=new(c("PhotoSnowlift"))();a.bootstrap(b)};e.state={mapView:null};return e}var d=b.prototype;d.render=function(){var a=this;return i.jsxs(c("XUICard.react"),{className:"_580c",children:[this.$1(),i.jsx(c("PlacesSearchEntityCardPhotos.react"),{entityID:this.props.placeID,photoInfo:this.props.placeInfo.photoInfo,mapInfo:this.props.placeInfo.entityInfo.mapInfo,aboutInfo:this.props.placeInfo.entityInfo.aboutInfo,onMapClick:function(){return a.$2()},isLoggedIn:this.props.isLoggedIn,loadedCallback:function(b,c){return a.props.loadedCallback(b,c)},query:this.props.query,hcmPhotoDesign:!1,onPhotoClick:this.$3}),i.jsx(c("PlacesSearchEntityCardDetails.react"),{entityID:this.props.placeID,entityInfo:this.props.placeInfo.entityInfo,isLoading:this.props.isContextLoading,isOnlySearchResult:this.props.isOnlySearchResult||!1,loadedCallback:function(b,c){return a.props.loadedCallback(b,c)},pinIndex:this.props.pinIndex,useNewDesign:this.props.useNewDesign,savedListsGk:this.props.savedListsGk,query:this.props.query})]})};d.$1=function(){var a=this,b=this.props.placeInfo.entityInfo.mapInfo;if(!b||!this.state.mapView)return null;var d=this.state.mapView;return i.jsxs(c("XUIDialog.react"),{causalElementRef:function(){return a.refs.button},shown:!!this.state.mapView,onToggle:function(b){b||a.setState({mapView:null})},hideOnEscape:!0,width:700,children:[i.jsx(c("XUIDialogTitle.react"),{children:i.jsx("span",{children:this.props.placeInfo.entityInfo.aboutInfo.name})}),i.jsx(c("XUIDialogBody.react"),{className:"_2-rk",children:i.jsx(c("FBTilesMap__DEPRECATED.react"),{className:"_2-rl",defaultOptions:k,onViewChange:function(b){return a.$4(b)},view:d,showZoomControls:!0,surface:"local_search",children:i.jsx(c("LeafletMarker.react"),{coordinates:new(c("GeoCoordinates"))(b.lat,b["long"]),options:{icon:l}})})})]})};d.$4=function(a){this.setState({mapView:a})};d.$2=function(){var a=this.props.placeInfo.entityInfo.mapInfo;if(!a)return;this.setState({mapView:new(c("LeafletView"))({center:new(c("GeoCoordinates"))(a.lat,a["long"]),zoom:j})})};return b}(i.Component);a.defaultProps={loadedCallback:function(a,b){},isOnlySearchResult:!1};g["default"]=a}),98);
__d("ReviewConsumptionTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:ReviewConsumptionLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:ReviewConsumptionLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:ReviewConsumptionLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setElement=function(a){this.$1.element=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setReviewID=function(a){this.$1.review_id=a;return this};c.setSurface=function(a){this.$1.surface=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={element:!0,event:!0,page_id:!0,review_id:!0,surface:!0};f["default"]=a}),66);
__d("PlacesSearchEntityCardAbout.react",["cx","Grid.react","Image.react","LeftRight.react","Link.react","Number.react","PageCTAViewerUnitContainer.react","PageCallToActionRef","PageRatingConfig","PagesHeaderLikeButtonContainer.react","PlacesSearchClickTypeEnums.react","PlacesSearchResults.react","ReviewConsumptionTypedLogger","StarRating.react","XUIGrayText.react","XUIText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=24,k="42B72A",l="4b4f56";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.componentDidMount=function(){this.props.aboutInfo.rating&&this.$1()};e.render=function(){var a="_1vx5";this.props.useNewDesign&&(a="_2oqp");return i.jsx("div",{className:a,children:this.$2()})};e.$1=function(){new(c("ReviewConsumptionTypedLogger"))().setPageID(this.props.entityID).setEvent("rating_impression").setSurface("set_search_places").setElement("total_rating_with_stars_and_volume").log()};e.$3=function(){if(this.props.aboutInfo.primaryButtons){var a=this.props.aboutInfo.primaryButtons[0];if(a&&a.__typename==="PageCTAAction"){var b=a.call_to_action,e=a.cta_config;return i.jsx("span",babelHelpers["extends"]({className:"_322r","data-et":JSON.stringify({click_point:"start_order",data:JSON.stringify({entity_id:this.props.entityID})})},c("PlacesSearchResults.react").getLoggingData({resultID:this.props.entityID,clickType:d("PlacesSearchClickTypeEnums.react").ORDER}),{children:i.jsx(c("PageCTAViewerUnitContainer.react"),babelHelpers["extends"]({},a,{cta:{id:b?b.id:null,label:e&&e.label||b&&b.label||null,type:e&&e.cta_type||b&&b.cta_type||null},page:{id:this.props.entityID},surface:c("PageCallToActionRef").SEARCH_ENTITY_CARD}))}))}}a=null;this.props.aboutInfo.pageCTA!==null&&(a=i.jsx("span",babelHelpers["extends"]({className:"_322r","data-et":JSON.stringify({click_point:"page_cta",data:JSON.stringify({entity_id:this.props.entityID})})},c("PlacesSearchResults.react").getLoggingData({resultID:this.props.entityID,clickType:d("PlacesSearchClickTypeEnums.react").PAGE_CTA}),{children:i.jsx(c("PageCTAViewerUnitContainer.react"),babelHelpers["extends"]({},this.props.aboutInfo.pageCTA))})));e=i.jsx("span",babelHelpers["extends"]({"data-et":JSON.stringify({click_point:"like",data:JSON.stringify({entity_id:this.props.entityID})})},c("PlacesSearchResults.react").getLoggingData({resultID:this.props.entityID,clickType:d("PlacesSearchClickTypeEnums.react").LIKE}),{children:i.jsx(c("PagesHeaderLikeButtonContainer.react"),babelHelpers["extends"]({},this.props.aboutInfo.likeData))}));return a===null?i.jsx("div",{children:e}):i.jsxs(c("LeftRight.react"),{children:[a,e]})};e.$2=function(){var a=this,b=this.props.aboutInfo;if(!this.props.useNewDesign){var e=[b.category,this.$4(),this.$5()].filter(function(a){return a!==null&&a!==""}),f=[b.address,b.neighborhood,b.phone,b.status].filter(function(a){return a!==null&&a!==""});e=e.map(function(e,f){e=e;f!==0?e=i.jsxs("span",{children:["\xa0\xa0\xb7\xa0\xa0",e]}):b.categoryLink&&(e=i.jsx(c("Link.react"),babelHelpers["extends"]({className:"_1akz","data-et":JSON.stringify({click_point:"category",data:JSON.stringify({entity_id:a.props.entityID})})},c("PlacesSearchResults.react").getLoggingData({resultID:a.props.entityID,clickType:d("PlacesSearchClickTypeEnums.react").CATEGORY}),{href:b.categoryLink,children:e})));return i.jsx("span",{children:e},f)});f=f.map(function(a,b){a=a;b!==0&&(a=i.jsxs("span",{children:["\xa0\xa0\xb7\xa0\xa0",a]}));return i.jsx("span",{children:a},b)});var g=b.url?i.jsx(c("Link.react"),{href:b.url,target:"_blank",children:b.name}):i.jsx(c("XUIText.react"),{children:b.name});return i.jsxs(c("Grid.react"),{className:"_1uhv",cols:1,children:[i.jsx(c("Grid.react").GridItem,{children:i.jsxs(c("LeftRight.react"),{direction:"right",className:"_2oqr",children:[i.jsx("span",babelHelpers["extends"]({className:"_1uhw","data-et":JSON.stringify({click_point:"name",data:JSON.stringify({entity_id:this.props.entityID})})},c("PlacesSearchResults.react").getLoggingData({resultID:this.props.entityID,clickType:d("PlacesSearchClickTypeEnums.react").NAME}),{children:g})),this.$3()]})}),i.jsx(c("Grid.react").GridItem,{children:e}),i.jsx(c("Grid.react").GridItem,{children:f})]})}else{g=[[this.$6(),this.$7(),this.$5()].filter(function(a){return a!==null&&a!==""}),[this.$8(),this.$9(),this.$10()].filter(function(a){return a!==null&&a!==""})];var h=0;e=g.map(function(a,b){a=a.map(function(a,b){a=a;b!==0&&(a=i.jsxs("span",{className:"_1n0",children:["\xa0\xb7\xa0",a]}));return i.jsx("span",{children:a},h++)});return i.jsx("div",{className:"_1o90",children:a},b)});f=b.url?i.jsx(c("Link.react"),{href:b.url,children:b.name}):i.jsx(c("XUIText.react"),{children:b.name});g="/images/pages/city_pages/blank_pin.png";var k=j,l=this.props.pinIndex+1<1e3?"_6u6p":"_6u6q",m=c("PageRatingConfig").show_rating_circle;return i.jsxs(c("Grid.react"),{className:"_1wu-",cols:1,children:[i.jsx(c("Grid.react").GridItem,{children:i.jsxs(c("LeftRight.react"),{direction:"right",className:"_2oqs"+(c("PageRatingConfig").show_rating_circle?" _6j2e":""),children:[i.jsxs("div",{className:"_6v55"+(m?" _71mx":""),children:[m&&!this.props.isOnlySearchResult?i.jsxs("div",{children:[i.jsx(c("Image.react"),{className:"_1uhu",src:g,width:k}),i.jsx("div",{className:l,children:this.props.pinIndex+1})]}):null,i.jsx("span",babelHelpers["extends"]({className:"_1wu_","data-et":JSON.stringify({click_point:"name",data:JSON.stringify({entity_id:this.props.entityID})})},c("PlacesSearchResults.react").getLoggingData({resultID:this.props.entityID,clickType:d("PlacesSearchClickTypeEnums.react").NAME}),{children:f}))]}),this.$3()]})}),i.jsx(c("Grid.react").GridItem,{children:e}),i.jsx(c("Grid.react").GridItem,{children:this.$11()})]})}};e.$8=function(){var a=this.props.aboutInfo;return i.jsx("span",{className:"_1n0",children:a.address})};e.$7=function(){var a=this.props.aboutInfo;return!a.categoryLink?i.jsx(c("XUIGrayText.react"),{shade:"medium",children:a.category}):i.jsx(c("Link.react"),babelHelpers["extends"]({shade:"light",className:"_1wuz","data-et":JSON.stringify({click_point:"category",data:JSON.stringify({entity_id:this.props.entityID})})},c("PlacesSearchResults.react").getLoggingData({resultID:this.props.entityID,clickType:d("PlacesSearchClickTypeEnums.react").CATEGORY}),{href:a.categoryLink,children:i.jsx(c("XUIGrayText.react"),{shade:"medium",children:a.category})}))};e.$11=function(){var a=this.props.aboutInfo.eta;if(a==null)return null;return a.length===2?i.jsxs(c("XUIGrayText.react"),{shade:"light",children:[a[0],"\xa0\xa0\xb7\xa0\xa0",a[1]]}):i.jsx(c("XUIGrayText.react"),{shade:"light",children:a})};e.$4=function(){return!this.props.aboutInfo.rating||c("PageRatingConfig").show_rating_circle?null:i.jsxs(c("XUIText.react"),{children:[i.jsx(c("Number.react"),{value:Number(this.props.aboutInfo.rating),decimals:1}),"\xa0",i.jsx(c("Image.react"),{src:"/images/search/places/darkStar.png",height:9,width:9})]})};e.$6=function(){if(!this.props.aboutInfo.rating||c("PageRatingConfig").show_rating_circle)return null;var a=i.jsx("span",{className:"_1n1",children:i.jsx(c("StarRating.react"),{rating:this.props.aboutInfo.rating,size:"12",fillColor:"fig-blue"})});return!this.props.aboutInfo.rating_count?a:i.jsx(c("Link.react"),babelHelpers["extends"]({"data-et":JSON.stringify({click_point:"rating_count",data:JSON.stringify({entity_id:this.props.entityID})})},c("PlacesSearchResults.react").getLoggingData({resultID:this.props.entityID,clickType:d("PlacesSearchClickTypeEnums.react").RATING_COUNT}),{href:this.props.aboutInfo.rating_url,children:i.jsxs("span",{children:[a,i.jsxs("span",{className:"_1n3",children:["(",this.props.aboutInfo.rating_count,")"]})]})}))};e.$9=function(){return!this.props.aboutInfo.phone?null:i.jsx(c("XUIGrayText.react"),{shade:"medium",children:this.props.aboutInfo.phone})};e.$10=function(){if(!this.props.aboutInfo.status)return null;var a=this.props.aboutInfo,b=a.statusColor;a=a.status;return i.jsx(c("XUIText.react"),{className:(b===k?"_1wv4":"")+(b===l?" _1wva":""),children:a})};e.$5=function(){var a=this.props.aboutInfo.price;return!a?null:i.jsx("span",{children:i.jsx(c("XUIText.react"),{children:a})})};return b}(i.Component);g["default"]=a}),98);
__d("PlacesSearchEntityCardReview.react",["cx","Image.react","ImageBlock.react","LtgSeeTranslationLink.react","Number.react","SeeMore.react","XUIGrayText.react","react","timeString"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=24;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){if(!this.props.useNewDesign)return i.jsxs("div",{className:"_2tjf",children:[this.$1(),this.$2(),this.$3()]});else return i.jsxs(c("ImageBlock.react"),{spacing:"medium",className:"_35n5",children:[this.$4(),i.jsxs("div",{className:"_d6-",children:[this.$1(),this.$2(),this.$3()]})]})};d.$4=function(){var a=this.props.reviewInfo.author.profilePicURI;return!a?null:i.jsx(c("Image.react"),{className:"_3-8w",src:a,width:j,height:j})};d.$1=function(){var a=this.props.reviewInfo.text;return i.jsxs("div",{className:"_x92",children:[i.jsx("span",{className:"_44pl",style:{position:"absolute",left:"-6px"},children:"\u201c"}),a.length>=150?i.jsxs(c("SeeMore.react"),{exposeTextInHtml:!0,clickCallback:function(a){a.preventDefault()},children:[a.substring(0,150),a.substring(150)]}):a,"\xa0",i.jsx("span",{className:"_44pl",children:"\u201d"})]})};d.$2=function(){return this.props.reviewInfo.is_translatable&&this.props.reviewInfo.contentid?i.jsx(c("LtgSeeTranslationLink.react"),{size:"small",contentid:this.props.reviewInfo.contentid}):null};d.$3=function(){var a=this.props.reviewInfo;a=[this.$5(),this.$6(),c("timeString")(Number(a.creationTime)*1e3)];a=a.filter(function(a){return a});a=a.map(function(a,b){a=a;b!==0&&(a=i.jsxs("span",{children:["\xa0\xa0\xb7\xa0\xa0",a]}));return i.jsx("span",{children:i.jsx(c("XUIGrayText.react"),{shade:"light",children:a})},b)});return i.jsx("div",{className:"_x93",children:a})};d.$5=function(){var a=this.props.reviewInfo.author;return i.jsx("span",{children:a.name})};d.$6=function(){return!this.props.reviewInfo.rating?null:i.jsxs(c("XUIGrayText.react"),{shade:"light",size:"inherit",children:[i.jsx(c("Number.react"),{decimals:1,value:Number(this.props.reviewInfo.rating)}),"\xa0",i.jsx(c("Image.react"),{src:"/images/search/places/lightStar.png",height:8,width:8})]})};return b}(i.Component);g["default"]=a}),98);
__d("XSavedForLaterPlaceListController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/saved_place_list/",{list_id:{type:"FBID",required:!0}})}),null);
__d("PlacesSearchEntityFriendSavedList.react",["cx","fbt","ix","Image.react","ImageBlock.react","Link.react","XSavedForLaterPlaceListController","react"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a=c("XSavedForLaterPlaceListController").getURIBuilder().setFBID("list_id",String(this.props.friendSavedListInfo.savedListID)).getURI();return k.jsxs(c("ImageBlock.react"),{spacing:"medium",className:"_37fm",children:[k.jsx(c("Image.react"),{className:"_3-9a",src:j("116046")}),k.jsxs("div",{className:"_d6-",children:[i._("See more places on {friend_name}'s list:",[i._param("friend_name",this.props.friendSavedListInfo.friendName)]),"\xa0",k.jsx(c("Link.react"),{href:a,children:i._("{saved_list_name}",[i._param("saved_list_name",this.props.friendSavedListInfo.savedListName)])})]})]})};return b}(k.Component);g["default"]=a}),98);
__d("PlacesSearchEntityCardDetails.react",["cx","AsyncRequest","Image.react","ImageBlock.react","LeftRight.react","List.react","PageRatingConfig","PageRecommendationsCircleScore.react","PageRecommendationsCircleScoreType","PlacesSearchEntityCardAbout.react","PlacesSearchEntityCardReview.react","PlacesSearchEntityCardSpotlightReview.react","PlacesSearchEntityFriendSavedList.react","PlacesSearchOptionalFriendContextRowOrDescription.react","ProfileTile.react","ThisControllerNoLongerExists","XUISpinner.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=24,k=64;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,b,c)||this;c.$1=null;var d=c.props.entityInfo,e=!d.contextInfo&&!d.reviewInfo&&!d.descriptionInfo;c.state={contextInfo:d.contextInfo,descriptionInfo:d.descriptionInfo,reviewInfo:d.reviewInfo,searchSpotlightSnippetInfo:null,friendSavedListInfo:null,isFriendSavesListLoading:b.savedListsGk,isLoading:e};return c}var e=b.prototype;e.componentDidMount=function(){this.props.loadedCallback(this.props.entityID,"placessearchresultlist.entityInfoLoaded"),this.state.isLoading&&this.$2()};e.componentWillUnmount=function(){this.$1&&this.$1.abandon()};e.UNSAFE_componentWillReceiveProps=function(a){this.state.isLoading&&!a.isLoading&&this.setState({contextInfo:a.entityInfo.contextInfo,descriptionInfo:a.entityInfo.descriptionInfo,reviewInfo:a.entityInfo.reviewInfo,searchSpotlightSnippetInfo:a.entityInfo.searchSpotlightSnippetInfo,isLoading:!1})};e.render=function(){if(!this.props.useNewDesign)return i.jsxs("div",{className:"_4a3q",children:[i.jsx(c("LeftRight.react"),{children:i.jsx(c("PlacesSearchEntityCardAbout.react"),{aboutInfo:this.props.entityInfo.aboutInfo,actionInfo:this.props.entityInfo.actionInfo,entityID:this.props.entityID,useNewDesign:this.props.useNewDesign,savedListsGk:this.props.savedListsGk,pinIndex:this.props.pinIndex,isOnlySearchResult:this.props.isOnlySearchResult})}),this.$3()]});else{var a="/images/pages/city_pages/blank_pin.png",b=j,d=this.props.pinIndex+1<1e3?"_o20":"_a0p";return i.jsxs("div",{className:"_o1z",children:[i.jsxs(c("ImageBlock.react"),{spacing:"medium",children:[c("PageRatingConfig").show_rating_circle?i.jsxs("div",{children:[i.jsx(c("ProfileTile.react"),{id:this.props.entityID,imageProps:{className:"_6hre"},shouldShowProfileCardOnHover:!1,size:k}),i.jsx(c("PageRecommendationsCircleScore.react"),{pageIDString:this.props.entityID,scoreType:c("PageRecommendationsCircleScoreType").SEARCH_PLACE_TAB})]}):i.jsxs("div",{children:[i.jsx(c("Image.react"),{className:"_o1-",src:a,width:b}),i.jsx("div",{className:d,children:this.props.pinIndex+1})]}),i.jsx(c("PlacesSearchEntityCardAbout.react"),{aboutInfo:this.props.entityInfo.aboutInfo,actionInfo:this.props.entityInfo.actionInfo,entityID:this.props.entityID,isOnlySearchResult:this.props.isOnlySearchResult,useNewDesign:this.props.useNewDesign,savedListsGk:this.props.savedListsGk,pinIndex:this.props.pinIndex})]}),this.$4(),this.$5(),this.$6(),this.$7()]})}};e.$3=function(){var a=[];if(this.state.isLoading)a.push(i.jsx("div",{className:"_30m1",children:i.jsx(c("XUISpinner.react"),{size:"small"})}));else{this.state.contextInfo&&a.push(i.jsx(c("PlacesSearchOptionalFriendContextRowOrDescription.react"),{contextInfo:this.state.contextInfo,placeID:this.props.entityID,descriptionInfo:null,showContextAndDescription:null,enableSetSearchLogging:!0}));this.state.descriptionInfo&&a.push(i.jsx(c("PlacesSearchOptionalFriendContextRowOrDescription.react"),{contextInfo:null,placeID:"",descriptionInfo:this.state.descriptionInfo,showContextAndDescription:null,sessionID:"",enableSetSearchLogging:!0}));if(this.state.reviewInfo){var b=this.state.reviewInfo.map(function(a){return i.jsx(c("PlacesSearchEntityCardReview.react"),{reviewInfo:a,useNewDesign:!1})});a=a.concat(b)}}a=a.map(function(a,b){return i.jsx("li",{children:a},b)});return i.jsx(c("List.react"),{spacing:"none",border:"none",className:"_2js",children:a})};e.$6=function(){var a=[];this.state.searchSpotlightSnippetInfo&&a.push(i.jsx(c("PlacesSearchEntityCardSpotlightReview.react"),{placeID:this.props.entityID,spotlightReviewInfo:this.state.searchSpotlightSnippetInfo}));a=a.map(function(a,b){return i.jsx("li",{children:a},b)});return i.jsx(c("List.react"),{spacing:"none",border:"none",children:a})};e.$4=function(){var a=[];this.state.isLoading?a.push(i.jsx("div",{className:"_30m1",children:i.jsx(c("XUISpinner.react"),{size:"small"})})):a.push(i.jsx(c("PlacesSearchOptionalFriendContextRowOrDescription.react"),{contextInfo:this.state.contextInfo,placeID:this.props.entityID,descriptionInfo:this.state.descriptionInfo,showContextAndDescription:!0,enableSetSearchLogging:!0}));a=a.map(function(a,b){return i.jsx("li",{children:a},b)});return i.jsx(c("List.react"),{spacing:"none",border:"none",className:"_o27",children:a})};e.$5=function(){var a=this;if(this.state.searchSpotlightSnippetInfo)return i.jsx("div",{});var b=[];if(this.state.isLoading)b.push(i.jsx("div",{className:"_35mb",children:i.jsx(c("XUISpinner.react"),{size:"small"})}));else if(this.state.reviewInfo){var d=this.state.reviewInfo.map(function(b){return i.jsx(c("PlacesSearchEntityCardReview.react"),{reviewInfo:b,useNewDesign:a.props.useNewDesign})});b=b.concat(d)}b=b.map(function(a,b){return i.jsx("li",{children:a},b)});return i.jsx(c("List.react"),{spacing:"none",border:"none",children:b})};e.$7=function(){var a=[];this.state.isFriendSavesListLoading?a.push(i.jsx("div",{className:"_35mb",children:i.jsx(c("XUISpinner.react"),{size:"small"})})):this.state.friendSavedListInfo&&a.push(i.jsx(c("PlacesSearchEntityFriendSavedList.react"),{friendSavedListInfo:this.state.friendSavedListInfo}));a=a.map(function(a,b){return i.jsx("li",{children:a},b)});return i.jsx(c("List.react"),{spacing:"none",border:"none",children:a})};e.$8=function(){var a=this;this.$1&&this.$1.abandon();var b=d("ThisControllerNoLongerExists").__DEADURI__("dlis43i7");this.$1=new(c("AsyncRequest"))(b).setAllowCrossPageTransition(!0).setData({place_id:this.props.entityID}).setErrorHandler(function(b){a.setState({isFriendSavesListLoading:!1})}).setHandler(function(b){var c=a.props.entityID;b=b.payload;a.props.loadedCallback(c,"placessearchresultlist.detailsLoaded");a.setState({friendSavedListInfo:a.state.friendSavedListInfo||b[c],isFriendSavesListLoading:!1})});this.$1.send()};e.$2=function(){var a=this;this.$1&&this.$1.abandon();var b=d("ThisControllerNoLongerExists").__DEADURI__("qkcxfr5yvo");this.$1=new(c("AsyncRequest"))(b).setAllowCrossPageTransition(!0).setData({place_ids:[this.props.entityID],query:this.props.query}).setErrorHandler(function(b){a.setState({isLoading:!1})}).setHandler(function(b){var c=a.props.entityID;b=b.getPayload();a.props.loadedCallback(c,"placessearchresultlist.detailsLoaded");a.setState({contextInfo:a.state.contextInfo||b[c].contextInfo,descriptionInfo:a.state.descriptionInfo||b[c].descriptionInfo,reviewInfo:a.state.reviewInfo||b[c].reviewInfo,searchSpotlightSnippetInfo:a.state.searchSpotlightSnippetInfo||b[c].searchSpotlightSnippetInfo,isLoading:!1});a.$8()});this.$1.send()};return b}(i.Component);g["default"]=a}),98);
__d("PlacesSearchEntityCardPhotos.react",["cx","fbt","invariant","ix","BackgroundImage.react","BrowseClickLogger","Image.react","Keys","Link.react","PlacesSearchClickTypeEnums.react","PlacesSearchResults.react","react"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=d("react"),m=100,n=154;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){b=a.call(this,b,c)||this;b.state={fetchedPhotoInfo:null};return b}var e=b.prototype;e.componentDidMount=function(){if(this.props.photoInfo!==null)return;this.$1()};e.componentWillUnmount=function(){};e.render=function(){if(this.props.photoInfo===null&&this.state.fetchedPhotoInfo===null)return l.jsx("div",{className:"_3j7j",children:l.jsx("span",{children:l.jsx("div",{className:(this.props.hcmPhotoDesign?"":"_ebi")+(this.props.hcmPhotoDesign?" _6f5a":"")})})});var a=this.props.photoInfo!==null?this.props.photoInfo:this.state.fetchedPhotoInfo;!a&&j(0,2546);if(a.length===0)return null;return this.props.hcmPhotoDesign?l.jsx("div",{className:"_6f5b",children:a.length>0?this.$2(a):null}):l.jsx("div",{className:"_3j7j",children:a.length>0?this.$3(a):null})};e.$2=function(a){var b=this,e=this.props.entityID,f=Math.min(3,a.length);a=a.slice(0,f).map(function(a,g){var h=m,j=n;h=l.jsx(c("BackgroundImage.react"),{className:"_3g8y"+(g===f-1?" _6f4y":""),backgroundSize:"cover",height:h,loadingIndicatorStyle:"small",src:a.src,width:j});if(f<3){j="_3g8y _6f4z";h=l.jsx("div",{className:"_1dg_"+(g<f-1?" _6f4-":""),children:l.jsx(c("Image.react"),{className:j,src:a.src})})}j=null;b.props.isLoggedIn&&g===f-1&&(j=l.jsx("div",babelHelpers["extends"]({className:"_3g8z _3g8-"+(f<3?" _6f4_":""),"data-et":JSON.stringify({click_point:"more_photos",data:JSON.stringify({entity_id:e})})},c("PlacesSearchResults.react").getLoggingData({resultID:e,clickType:d("PlacesSearchClickTypeEnums.react").MORE_PHOTOS}),{children:l.jsxs("span",{className:"_3g8_ _25uq",children:[l.jsx(c("Image.react"),{className:"_3g90",src:k("504183")}),i._("See photos")]})})));var p=a.url!==null?{click_point:"photos",data:JSON.stringify({entity_id:e,photo_id:a.id})}:null,q=a.url!==null&&b.props.isLoggedIn;return l.jsx(o,{photoLoggingData:b.props.photoLoggingData,onClick:b.props.onPhotoClick,imgLinkCSS:q,trackingData:p,entityID:e,placeName:(q=b.props.aboutInfo)==null?void 0:q.name,clickType:d("PlacesSearchClickTypeEnums.react").PHOTOS,tabIndex:"0",photoElement:h,seeMoreText:j,dataUrl:a.url,isHCM:!0},g)});return l.jsx("span",{className:f<3?"_6f50":"",children:a})};e.$3=function(a){var b=this,e=this.props.entityID,f=3;f=a.slice(0,f).map(function(f,g){var h=g===2&&a.length>3,j="_6f4z";j=l.jsx(c("Link.react"),{className:"_5t31",href:f.url,rel:"theater","data-uibase-classes":":ui:link",children:l.jsx("div",{className:"placesSearchEntityCardPhotos/image",children:l.jsx(c("Image.react"),{className:j,src:f.src})})});var k=null;h&&b.props.isLoggedIn&&(k=l.jsx("div",babelHelpers["extends"]({className:"_5e72","data-et":JSON.stringify({click_point:"more_photos",data:JSON.stringify({entity_id:e})})},c("PlacesSearchResults.react").getLoggingData({resultID:e,clickType:d("PlacesSearchClickTypeEnums.react").MORE_PHOTOS}),{style:{width:"100%"},children:l.jsx("span",{className:"_5e73 _25uq",children:i._("See more photos")})})));h=f.url!==null?{click_point:"photos",data:JSON.stringify({entity_id:e,photo_id:f.id})}:null;var m=f.url!==null&&b.props.isLoggedIn;return l.jsx(o,{onClick:b.props.onPhotoClick,imgLinkCSS:m,trackingData:h,entityID:e,placeName:(m=b.props.aboutInfo)==null?void 0:m.name,clickType:d("PlacesSearchClickTypeEnums.react").PHOTOS,tabIndex:"0",photoElement:j,seeMoreText:k,dataUrl:f.url,isHCM:!1},g)});return l.jsx("span",{className:"_6f50",children:f})};e.$1=function(){};return b}(l.Component);var o=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(a=e=b.call.apply(b,[this].concat(g))||this,e.$1=function(a){e.props.onClick(a,e.props.dataUrl),d("BrowseClickLogger").logClick(a,"click")},e.$2=function(a){a.keyCode===c("Keys").RETURN&&e.props.onClick(a,e.props.dataUrl)},a)||babelHelpers.assertThisInitialized(e)}var e=a.prototype;e.render=function(){return l.jsxs("div",babelHelpers["extends"]({},this.props.photoLoggingData,{onClick:this.$1,onKeyDown:this.$2,className:(this.props.isHCM?"_6f51":"")+(this.props.imgLinkCSS?" _3el4":"")+(this.props.isHCM?" _6f5c":"")+(this.props.isHCM?"":" _nvh"),"data-et":JSON.stringify(this.props.trackingData),role:"button","aria-label":this.$3(),tabIndex:this.props.tabIndex,children:[this.props.photoElement,this.props.seeMoreText]}))};e.$3=function(){return this.props.placeName?i._("Photo of {placeName}",[i._param("placeName",this.props.placeName)]):i._("Photo")};return a}(l.Component);g["default"]=a}),98);
__d("PlacesSearchEntityCardSpotlightReview.react",["cx","BrowseFacebarHighlighter","Image.react","ImageBlock.react","Link.react","PlacesSearchClickTypeEnums.react","PlacesSearchResults.react","XUIGrayText.react","react","timeString"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=24;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var e=b.prototype;e.render=function(){return i.jsxs(c("ImageBlock.react"),{spacing:"medium",className:"_35n5",children:[this.$1(),i.jsxs("div",{className:"_d6-",children:[i.jsx(c("Link.react"),babelHelpers["extends"]({},c("PlacesSearchResults.react").getLoggingData({resultID:this.props.placeID,clickType:d("PlacesSearchClickTypeEnums.react").SPOTLIGHT_SNIPPET}),{className:"_1cj6",href:this.props.spotlightReviewInfo.author.url,children:this.$2()})),this.$3()]})]})};e.$1=function(){var a=this.props.spotlightReviewInfo.author.profilePicURI;return!a?null:i.jsx(c("Image.react"),{className:"_3-8w",src:a,width:j,height:j})};e.$2=function(){var a=this.props.spotlightReviewInfo.text,b=[this.props.spotlightReviewInfo.snippet];b=c("BrowseFacebarHighlighter").createRegex(b);a=a.split(b);return a.map(function(a,b){if((b+1)%3===0)return i.jsx("span",{className:"_1cj7",children:a},b);else if(a)return a;return""})};e.$3=function(){var a=this.props.spotlightReviewInfo;a=[this.$4(),c("timeString")(Number(a.creationTime)*1e3)];a=a.filter(function(a){return a});a=a.map(function(a,b){a=a;b!==0&&(a=i.jsxs("span",{children:["\xa0\xa0\xb7\xa0\xa0",a]}));return i.jsx("span",{children:i.jsx(c("XUIGrayText.react"),{shade:"light",children:a})},b)});return i.jsx("div",{className:"_x93",children:a})};e.$4=function(){var a=this.props.spotlightReviewInfo.author;return i.jsx("span",{children:a.name})};return b}(i.Component);g["default"]=a}),98);
__d("PlacesSearchDemographicItem.react",["cx","Link.react","XUIText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return i.jsx("div",{children:i.jsx(c("Link.react"),{href:this.props.demographicItemInfo.url,children:i.jsx(c("XUIText.react"),{size:"meta1",className:"_g3s",children:this.props.demographicItemInfo.name})})})};return b}(i.Component);g["default"]=a}),98);
__d("PlacesSearchDemographicListsCard.react",["cx","List.react","PlacesSearchDemographicItem.react","XUICard.react","XUIText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return i.jsx("div",{children:i.jsx(c("XUICard.react"),{className:"_30s8",children:i.jsxs(c("XUICard.react"),{className:"_30s9",children:[this.$1(),this.$2()]})})})};d.$1=function(){return i.jsx("div",{children:i.jsx(c("XUIText.react"),{size:"header3",weight:"bold",children:this.props.title})})};d.$2=function(){var a=this.props.demographicListInfo.map(function(a,b){return i.jsx("li",{children:i.jsx(c("PlacesSearchDemographicItem.react"),{demographicItemInfo:a})},b)});return i.jsx("div",{className:"_30sa",children:i.jsx(c("List.react"),{border:"none",children:a})})};return b}(i.Component);g["default"]=a}),98);
__d("PlacesSearchService.react",["cx","Link.react","XUIText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return i.jsx("div",{children:i.jsx(c("Link.react"),{href:this.props.serviceData.url,target:"_blank",children:i.jsx(c("XUIText.react"),{size:"meta1",className:"_2zq-",children:this.props.serviceData.name})})})};return b}(i.Component);g["default"]=a}),98);
__d("PlacesSearchMoreServicesCard.react",["cx","Grid.react","PlacesSearchService.react","XUICard.react","XUIText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return i.jsx("div",{children:i.jsx(c("XUICard.react"),{className:"_22o_",children:i.jsxs(c("XUICard.react"),{className:"_22p0",children:[this.$1(),this.$2()]})})})};d.$1=function(){return i.jsx("div",{children:i.jsx(c("XUIText.react"),{size:"header3",weight:"bold",children:this.props.moreServicesTitle})})};d.$2=function(){var a=this.props.moreServicesInfo.map(function(a,b){return i.jsx(c("Grid.react").GridItem,{children:i.jsx(c("PlacesSearchService.react"),{serviceData:a})},b)});return i.jsx("div",{className:"_22p1",children:i.jsx(c("Grid.react"),{className:"_22p2",cols:2,spacing:"ptm",children:a})})};return b}(i.Component);g["default"]=a}),98);
__d("PlacesSearchNearbyCity.react",["cx","Link.react","XUIText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return i.jsx("div",{children:i.jsx(c("Link.react"),{href:this.props.cityData.url,target:"_blank",children:i.jsx(c("XUIText.react"),{size:"meta1",className:"_2zq-",children:this.props.cityData.name})})})};return b}(i.Component);g["default"]=a}),98);
__d("PlacesSearchNearbyCitiesCard.react",["cx","fbt","Grid.react","PlacesSearchNearbyCity.react","XUICard.react","XUIText.react","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return j.jsx("div",{children:j.jsx(c("XUICard.react"),{className:"_2usr",children:j.jsxs(c("XUICard.react"),{className:"_2uss",children:[this.$1(),this.$2()]})})})};d.$1=function(){var a=i._("Related results in nearby cities");this.props.nearbyCitiesTitle&&(a=this.props.nearbyCitiesTitle);return j.jsx("div",{children:j.jsx(c("XUIText.react"),{size:"header3",weight:"bold",children:a})})};d.$2=function(){var a=this.props.nearbyCitiesInfo.map(function(a,b){return j.jsx(c("Grid.react").GridItem,{children:j.jsx(c("PlacesSearchNearbyCity.react"),{cityData:a})},b)});return j.jsx("div",{className:"_2us_",children:j.jsx(c("Grid.react"),{className:"_2ha9",cols:2,spacing:"ptm",children:a})})};return b}(j.Component);g["default"]=a}),98);
__d("PlacesSearchOtherCategoriesCard.react",["cx","fbt","Grid.react","Link.react","XUICard.react","XUIText.react","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return j.jsx("div",{children:j.jsx(c("XUICard.react"),{className:"_4i-e",children:j.jsxs(c("XUICard.react"),{className:"_4i-g",children:[this.$1(),this.$2()]})})})};d.$1=function(){var a=i._("More categories nearby");this.props.cityName&&(a=i._("More categories in {cityName}",[i._param("cityName",j.jsx("b",{children:this.props.cityName}))]));return j.jsx("div",{children:j.jsx(c("XUIText.react"),{size:"header3",weight:"bold",children:a})})};d.$2=function(){var a=this.props.otherCategories.options.map(function(a,b){return j.jsx(c("Grid.react").GridItem,{children:j.jsx(c("Link.react"),{href:a.href,children:j.jsx(c("XUIText.react"),{size:"meta1",className:"_4i-h",children:a.name})})},b)});return j.jsx("div",{className:"_4i-i",children:j.jsx(c("Grid.react"),{className:"_4i-j",cols:2,spacing:"ptm",children:a})})};return b}(j.Component);g["default"]=a}),98);
__d("PlacesSearchResultMapCard.react",["cx","fbt","invariant","ix","Arbiter","BrowseClickLogger","DOMScroll","FBTilesMap__DEPRECATED.react","GeoCoordinates","Image.react","LeafletMarker.react","LeafletUtils","LeafletView","PlacesSearchClickTypeEnums.react","PlacesSearchResultMapStore","PlacesSearchResultUpdateMapAction","PlacesSearchResults.react","QE2Logger","XUIButton.react","XUICard.react","ge","leaflet","react"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=d("react"),m=[24,35],n=[12,33],o=[12,50],p=12,q=15,r=8e4,s={dragging:!0,oomControl:!1,touchZoom:!1,doubleClickZoom:!0,scrollWheelZoom:!1,boxZoom:!1,keyboard:!1,tab:!1};a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,d){var e;e=a.call(this,b,d)||this;e.$3=function(){e.$2=!0;var a=e.state.mapSize;if(a==null)return;a=c("LeafletUtils").getViewBounds(e.state.mapView,{width:a.x,height:a.y});c("Arbiter").inform("PlacesSearchResultMapCard/SearchThisArea",a)};e.$5=function(a){e.setState({mapSize:a})};e.$4=function(a){e.setState({mapView:a})};e.$2=!1;return e}var e=b.prototype;e.render=function(){if(!this.state)return l.jsx("div",{});var a=null;if(!this.props.isKeywordSearch){var b=i._("Search this area"),e=k("142718");a=l.jsx(c("XUIButton.react"),babelHelpers["extends"]({className:"_2iis"},c("PlacesSearchResults.react").getLoggingData({resultID:"",clickType:d("PlacesSearchClickTypeEnums.react").MAP_SEARCH_BUTTON}),{label:b,size:"medium",image:l.jsx(c("Image.react"),{src:e}),onClick:this.$3}))}return l.jsxs("div",{children:[l.jsx(c("XUICard.react"),babelHelpers["extends"]({className:"_24ty","data-et":JSON.stringify({click_point:"map"})},c("PlacesSearchResults.react").getLoggingData({resultID:"",clickType:d("PlacesSearchClickTypeEnums.react").MAP}),{children:l.jsx(c("FBTilesMap__DEPRECATED.react"),{className:"_24tz",defaultOptions:s,onViewChange:this.$4,showZoomControls:!0,view:this.state.mapView,onSizeSettled:this.$5,surface:"local_search",children:this.$6()})})),a]})};e.componentDidMount=function(){var a=c("PlacesSearchResultMapStore").getPlacesResult();a!==null&&this.setState({mapView:this.$7(a)});this.setState({placesInfo:a});this.$1=[c("PlacesSearchResultMapStore").addListener(this.$8.bind(this))]};e.componentWillUnmount=function(){this.$1.forEach(function(a){return a.remove()})};e.componentDidUpdate=function(a,b){d("QE2Logger").logExposureForUser("local_search_www"),this.props.mapRecenterExperiment&&b&&!b.placesInfo&&Object.keys(this.state.placesInfo||{}).length>0&&d("PlacesSearchResultUpdateMapAction").updatePinNumber(0)};e.$8=function(){var a=c("PlacesSearchResultMapStore").getPlacesResult(),b=c("PlacesSearchResultMapStore").getPinNumber();this.setState({placesInfo:a});if(a===null)return;var d=this.$7(a);b>=0&&(this.setState({mouseOverPinNumber:b}),d=this.$9(a,b));d!==null&&this.setState({mapView:d})};e.$10=function(a,b,e){d("BrowseClickLogger").logClick(e.originalEvent,"click");e=c("ge")(a+"anchor"+b);e!==null&&d("DOMScroll").scrollTo(e,200,!1,0,40);a=this.$9(c("PlacesSearchResultMapStore").getPlacesResult(),b);a!=null&&this.$4(a)};e.$11=function(a){this.setState({mouseOverPinNumber:a})};e.$9=function(a,b){var d=this.state.mapView.zoom,e=Object.keys(a);a=a[e[b]].entityInfo.mapInfo;if(a==null)return null;e=new(c("GeoCoordinates"))(a.lat,a["long"]);b=this.state.mapSize;if(b==null)return null;b=c("LeafletUtils").getViewBounds(this.state.mapView,{width:b.x,height:b.y});b=b.contains([a.lat,a["long"]]);b&&(e=this.state.mapView.center);return new(c("LeafletView"))({center:e,zoom:d})};e.$7=function(a){if(this.$2)return this.state.mapView;var b=this.state&&this.state.mapView?this.state.mapView.zoom:this.props.isNearbySearch?q:p,d=0,e=0,f=0,g=-Number.MAX_VALUE,h=-Number.MAX_VALUE,i=Number.MAX_VALUE,j=Number.MAX_VALUE,k=Object.keys(a),l=null;for(var m=0;m<k.length;m++){var n=a[k[m]].entityInfo.mapInfo;n&&(l===null&&(l=n),d+=n.lat,e+=n["long"],g=Math.max(g,n.lat),i=Math.min(i,n.lat),h=Math.max(h,n["long"]),j=Math.min(j,n["long"]),f++)}d/=f;e/=f;l!==null&&(l=new(c("leaflet").LatLng)(l.lat,l["long"]),l.distanceTo([d,e])>r&&(d=l.lat,e=l.lng));return new(c("LeafletView"))({center:new(c("GeoCoordinates"))(d,e),zoom:b})};e.$12=function(a){return new(c("GeoCoordinates"))(a.lat,c("LeafletUtils").wrapLongitude(a["long"]))};e.$6=function(){var a=this,b={};this.state.placesInfo&&(b=this.state.placesInfo);var d=Object.keys(b).length===1,e=Object.keys(b).map(function(e,f){if(f===a.state.mouseOverPinNumber){var g=f+1<1e3?"_24t-":"_4-zj",h=d?'<img src="/images/pages/city_pages/blank_pin.png" width="24px"/><div style="margin-top:-34px; "></div>':f+1<1e3?'<img src="/images/pages/city_pages/blank_pin.png" width="24px"/><div style="margin-top:-34px; ">'+(f+1)+"</div>":'<img src="/images/pages/city_pages/blank_pin.png" width="24px"/><div style="margin-top:-32px; ">'+(f+1)+"</div>";g=c("leaflet").divIcon({iconSize:m,iconAnchor:o,className:g,html:h})}else g=c("leaflet").divIcon({iconSize:m,iconAnchor:n,className:"_24t-",html:'<img src="/images/pages/city_pages/pin-dot-2x.png"width="12px" />'});h={};b[e].entityInfo.mapInfo&&(h=b[e].entityInfo.mapInfo);h!=={}||j(0,4203,e);return l.jsx(c("LeafletMarker.react"),{coordinates:a.$12(h),eventHandlers:{click:a.$10.bind(a,e,f),mouseover:a.$11.bind(a,f)},options:{icon:g}},f)});return e.filter(function(a){return a!==null})};return b}(l.Component);g["default"]=a}),98);
__d("PlacesSearchSavedPlace.react",["cx","ix","xuiglyph","Image.react","Link.react","XUIText.react","react"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a=i("88877"),b=k.jsx(c("XUIText.react"),{children:this.props.placeData.category});this.props.placeData.categoryLink&&(b=k.jsx(c("Link.react"),{href:this.props.placeData.categoryLink,target:"_blank",children:b}));return k.jsxs("div",{className:"_1ukc",children:[k.jsx(c("Link.react"),{href:this.props.placeData.url,target:"_blank",children:k.jsx(c("Image.react"),{className:"_1ukd",src:this.props.placeData.src})}),k.jsx("div",{className:"_1uke",children:k.jsx("div",{className:"_1ukf",children:k.jsxs("div",{className:"_1ukq",children:[k.jsx(c("Link.react"),{className:"_1ukr",href:this.props.placeData.url,target:"_blank",children:this.props.placeData.name}),k.jsx("div",{className:"_1uks",children:b})]})})}),k.jsx("div",{className:"_1uku",children:k.jsx("div",{className:"_1ukv",children:k.jsx("div",{className:"_1uk_",children:k.jsx(c("Link.react"),{href:this.props.placeData.url,target:"_blank",children:k.jsx(c("Image.react"),{src:a})})})})})]})};return b}(k.Component);g["default"]=a}),98);
__d("PlacesSearchSavedPlacesDialog.react",["cx","fbt","invariant","Image.react","Link.react","List.react","ScrollableArea.react","XUISpinner.react","XUIText.react","react"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=d("react"),l=425,m=445;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){this.props.showError&&this.props.showLoader&&j(0,3190);if(this.props.showLoader)return k.jsx("div",{className:"_4p3c",children:k.jsx(c("XUISpinner.react"),{size:"large"})});else if(this.props.showError||this.props.savedPlaces.length===0)return k.jsx(c("XUIText.react"),{className:"_4p3d",children:i._("There was an error and we couldn't fetch the saved places.")});return k.jsx(c("ScrollableArea.react"),{height:l,width:m,children:k.jsx("div",{className:"_4p3e",children:this.$1()})})};d.$1=function(){var a=this,b=this.props.savedPlaces.map(function(b,c){return k.jsx("li",{children:a.$2(b)},c)});return k.jsx(c("List.react"),{border:"light",className:"_4p3f",spacing:"none",children:b})};d.$2=function(a){var b=k.jsx(c("XUIText.react"),{children:a.category});a.categoryLink&&(b=k.jsx(c("Link.react"),{href:a.categoryLink,target:"_blank",children:b}));return k.jsxs("div",{className:"_4p3g",children:[k.jsx(c("Link.react"),{href:a.url,target:"_blank",children:k.jsx(c("Image.react"),{className:"_4p3h",src:a.src})}),k.jsx("div",{className:"_4p3i",children:k.jsx("div",{className:"_4p3j",children:k.jsxs("div",{className:"_4p3p",children:[k.jsx(c("Link.react"),{className:"_4p3s",href:a.url,target:"_blank",children:a.name}),k.jsx("div",{className:"_4p3t",children:b})]})})})]})};return b}(k.Component);g["default"]=a}),98);
__d("PlacesSearchSavedPlacesCard.react",["cx","fbt","ix","xuiglyph","AsyncRequest","Image.react","LayerFadeOnHide","Link.react","List.react","PlacesSearchSavedPlace.react","PlacesSearchSavedPlacesDialog.react","ThisControllerNoLongerExists","XUIButton.react","XUICard.react","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react","XUIText.react","react"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){b=a.call(this,b,c)||this;b.$1=null;b.state={dialogShown:!1,savedPlaces:[],showLoader:!1,showError:!1};return b}var e=b.prototype;e.$2=function(a){a?this.setState({dialogShown:a}):this.setState({dialogShown:a,savedPlaces:[],showLoader:!1,showError:!1})};e.$3=function(){var a=this;return!this.state.dialogShown?null:l.jsxs(c("XUIDialog.react"),{causalElementRef:function(){return a.refs.link},shown:this.state.dialogShown,behaviors:{LayerFadeOnHide:c("LayerFadeOnHide")},onToggle:function(b){return a.$2(b)},width:445,children:[l.jsx(c("XUIDialogTitle.react"),{children:l.jsx("span",{children:i._("Saved places in {city_name}",[i._param("city_name",this.props.name)])})}),l.jsx(c("XUIDialogBody.react"),{useCustomPadding:!0,children:l.jsx(c("PlacesSearchSavedPlacesDialog.react"),{savedPlaces:this.state.savedPlaces,showError:this.state.showError,showLoader:this.state.showLoader})})]})};e.render=function(){return l.jsxs("div",{children:[this.$3(),l.jsxs(c("XUICard.react"),{className:"_5p25",children:[this.$4(),this.$5()]})]})};e.$4=function(){return l.jsx("div",{children:l.jsx(c("XUIText.react"),{size:"header3",weight:"bold",children:i._("Saved places")})})};e.$5=function(){return l.jsx("div",{className:"_5p32",children:this.props.savedPlaces.length===0?this.$6():this.$7()})};e.$6=function(){return l.jsxs("div",{className:"_5p2i",children:[l.jsxs(c("XUIText.react"),{className:"_5p31",children:[i._("Your saved places will be shown here."),l.jsx("br",{}),i._("To save a place, click"),"\xa0"]}),l.jsx(c("XUIButton.react"),{label:i._("Save"),style:{cursor:"default"},image:l.jsx(c("Image.react"),{src:j("88778")})})]})};e.$7=function(){var a=this.props.savedPlaces.slice(0,3).map(function(a,b){return l.jsx("li",{children:l.jsx(c("PlacesSearchSavedPlace.react"),{placeData:a})},b)});this.props.savedPlaces.length>3&&a.push(this.$8());return l.jsx(c("List.react"),{border:"light",className:"_2e6s",spacing:"none",children:a})};e.$8=function(){var a=this,b=j("88877");return l.jsx("li",{className:"_4p0d",children:l.jsxs(c("Link.react"),{className:"_2e6t",onClick:function(){return a.$9()},ref:"link",children:[l.jsx(c("XUIText.react"),{children:i._("See all")}),"\xa0",l.jsx(c("Image.react"),{src:b,style:{position:"relative",top:"1px"}})]})},4)};e.$9=function(){var a=this;this.setState({dialogShown:!0,savedPlaces:[],showLoader:!0,showError:!1},function(){a.$1&&a.$1.abandon();var b=d("ThisControllerNoLongerExists").__DEADURI__("x949l43n");a.$1=new(c("AsyncRequest"))(b).setData({city_id:a.props.cityID}).setErrorHandler(function(b){a.setState({dialogShown:!0,savedPlaces:[],showLoader:!1,showError:!0})}).setHandler(function(b){a.setState({dialogShown:!0,savedPlaces:b.getPayload(),showLoader:!1,showError:!1})});a.$1.send()})};return b}(l.Component);g["default"]=a}),98);
__d("XPlacesSearchCityContextInfoController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/places_search/city_context_info/",{city_id:{type:"Int"}})}),null);
__d("PlacesSearchSidebarCityGuideCard.react",["cx","fbt","invariant","ix","xuiglyph","AsyncRequest","CurrentUser","Facepile.react","Image.react","Link.react","PlacesSearchOptionalFriendContextRowOrDescription.react","XPlacesSearchCityContextInfoController","XUISpinner.react","react"],(function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=d("react"),n=9;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){b=a.call(this,b,c)||this;b.$1=null;c=b.props.cityInfo;var d=!!c.friendsInfo&&!!c.contextInfo;b.state={cityContextinfo:d?{friendsInfo:c.friendsInfo,contextInfo:c.contextInfo}:null,showLoader:!d};return b}var d=b.prototype;d.UNSAFE_componentWillMount=function(){this.state.showLoader&&this.$2()};d.componentWillUnmount=function(){this.$1&&this.$1.abandon()};d.render=function(){return m.jsxs("div",{className:"_4wbg",children:[this.$3(),this.$4(),this.$5()]})};d.$3=function(){var a;c("CurrentUser").isWorkUser()?a=i._("Discover the best places and see where colleagues have been"):a=i._("Discover the best places and see where friends have been");return m.jsxs("div",{className:"_4wbh",children:[m.jsx("div",{className:"_4wbj",children:i._("Explore {cityName}",[i._param("cityName",this.props.cityInfo.name)])}),m.jsx("div",{className:"_4wbk",children:a})]})};d.$4=function(){if(this.state.showLoader)return m.jsx("div",{className:"_5fdc",children:m.jsx(c("XUISpinner.react"),{size:"small"})});else if(this.state.cityContextinfo){var a=this.state.cityContextinfo,b=a.friendsInfo;a=a.contextInfo;b===null&&a===null||b!==null&&a!==null||j(0,547);if(!b||!a)return null;b=b.slice(0,n).map(function(a){return{uniqueID:Number(a.id),name:a.name,profilePicURI:a.profilePicURI,URL:a.url}});return m.jsxs("div",{className:"_4wbl",children:[m.jsx(c("Facepile.react"),{profiles:b,size:"medium"}),m.jsx("div",{className:"_4wbm",children:m.jsx(c("PlacesSearchOptionalFriendContextRowOrDescription.react"),{contextInfo:a,placeID:this.props.cityInfo.id,descriptionInfo:null,showContextAndDescription:null,enableSetSearchLogging:!1})})]})}return null};d.$5=function(){var a=k("88877");return m.jsx(c("Link.react"),{className:"_4wbn","data-et":JSON.stringify({click_point:"city_guide"}),href:this.props.cityInfo.url,target:"_blank",children:m.jsxs("div",{className:"_4wbo",children:[i._("See the {cityName} city guide",[i._param("cityName",this.props.cityInfo.name)]),"\xa0",m.jsx(c("Image.react"),{src:a,style:{position:"relative",top:"2px"}})]})})};d.$2=function(){var a=this;this.$1&&this.$1.abandon();var b=c("XPlacesSearchCityContextInfoController").getURIBuilder().getURI();this.$1=new(c("AsyncRequest"))(b).setData({city_id:this.props.cityInfo.id}).setAllowCrossPageTransition(!0).setErrorHandler(function(b){a.setState({showLoader:!1})}).setHandler(function(b){a.setState({cityContextinfo:a.state.cityContextinfo||b.getPayload(),showLoader:!1})});this.$1.send()};return b}(m.Component);g["default"]=a}),98);
__d("PlacesSearchSidebar.react",["cx","ClickableArea.react","List.react","PlacesSearchDemographicListsCard.react","PlacesSearchMoreServicesCard.react","PlacesSearchNearbyCitiesCard.react","PlacesSearchOtherCategoriesCard.react","PlacesSearchResultMapCard.react","PlacesSearchResultMapStore","PlacesSearchSavedPlacesCard.react","PlacesSearchSessionLogger","PlacesSearchSidebarCityGuideCard.react","ScrollableArea.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.$2=function(a){a.stopPropagation(),d("PlacesSearchSessionLogger").handleEvent(a)},b)||babelHelpers.assertThisInitialized(c)}var e=b.prototype;e.render=function(){return this.props.disableCityRelatedCards?i.jsx(c("List.react"),{border:"none",children:this.$1()}):i.jsx("div",{className:"_20nl",children:i.jsx("div",{className:"_20nm",children:i.jsx(c("ScrollableArea.react"),{shadow:!1,height:window.innerHeight*.8,children:i.jsx(c("ClickableArea.react"),{onClick:this.$2,children:i.jsx("div",{children:i.jsxs(c("List.react"),{border:"none",children:[this.$1(),this.$3(),this.$4(),this.$5(),this.$6(),this.$7(),this.$8(),this.$9()]})})})})})})};e.$1=function(){var a=c("PlacesSearchResultMapStore").getPlacesResult();return!this.props.useNewDesign||a===null?null:i.jsx(c("PlacesSearchResultMapCard.react"),{isKeywordSearch:this.props.isKeywordSearch,isNearbySearch:this.props.isNearbySearch,mapRecenterExperiment:this.props.mapRecenterExperiment})};e.$3=function(){return this.props.cityInfo?i.jsx(c("PlacesSearchSidebarCityGuideCard.react"),{cityInfo:this.props.cityInfo.basicInfo},0):null};e.$5=function(){return this.props.cityInfo&&this.props.cityInfo.savedPlaces?i.jsx(c("PlacesSearchSavedPlacesCard.react"),{cityID:this.props.cityInfo.basicInfo.id,name:this.props.cityInfo.basicInfo.name,savedPlaces:this.props.cityInfo.savedPlaces,url:this.props.cityInfo.basicInfo.url},1):null};e.$6=function(){return this.props.cityInfo&&this.props.cityInfo.nearbyCitiesInfo?i.jsx(c("PlacesSearchNearbyCitiesCard.react"),{nearbyCitiesInfo:this.props.cityInfo.nearbyCitiesInfo,nearbyCitiesTitle:this.props.cityInfo.nearbyCitiesTitle},2):null};e.$7=function(){return this.props.servicesInfo&&this.props.servicesInfo.moreServicesInfo?i.jsx(c("PlacesSearchMoreServicesCard.react"),{moreServicesInfo:this.props.servicesInfo.moreServicesInfo,moreServicesTitle:this.props.servicesInfo.moreServicesTitle},3):null};e.$4=function(){if(this.props.isKeywordSearch||!this.props.otherCategories||!this.props.isCategorySearch)return null;var a=null;if(this.props.otherCategories){this.props.cityInfo&&(a=this.props.cityInfo.basicInfo.name);return i.jsx(c("PlacesSearchOtherCategoriesCard.react"),{otherCategories:this.props.otherCategories,cityName:a},4)}return null};e.$8=function(){return this.props.demographicListInfo&&this.props.demographicListInfo.schoolDemographicItems?i.jsx(c("PlacesSearchDemographicListsCard.react"),{title:this.props.demographicListInfo.schoolTitle,demographicListInfo:this.props.demographicListInfo.schoolDemographicItems},5):null};e.$9=function(){return this.props.demographicListInfo&&this.props.demographicListInfo.fanDemographicItems?i.jsx(c("PlacesSearchDemographicListsCard.react"),{title:this.props.demographicListInfo.fanTitle,demographicListInfo:this.props.demographicListInfo.fanDemographicItems},6):null};return b}(i.Component);g["default"]=a}),98);